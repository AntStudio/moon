(function(a,d){a.om=a.om||{};if(a.om.version){return}a.extend(a.om,{version:"2.0",keyCode:{TAB:9,ENTER:13,ESCAPE:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40},lang:{_get:function(g,f,e){return g[e]?g[e]:a.om.lang[f][e]}}});a.fn.extend({propAttr:a.fn.prop||a.fn.attr,_oldFocus:a.fn.focus,focus:function(e,f){return typeof e==="number"?this.each(function(){var g=this;setTimeout(function(){a(g).focus();if(f){f.call(g)}},e)}):this._oldFocus.apply(this,arguments)},scrollParent:function(){var e;if((a.browser.msie&&(/(static|relative)/).test(this.css("position")))||(/absolute/).test(this.css("position"))){e=this.parents().filter(function(){return(/(relative|absolute|fixed)/).test(a.curCSS(this,"position",1))&&(/(auto|scroll)/).test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0)}else{e=this.parents().filter(function(){return(/(auto|scroll)/).test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0)}return(/fixed/).test(this.css("position"))||!e.length?a(document):e},zIndex:function(h){if(h!==d){return this.css("zIndex",h)}if(this.length){var f=a(this[0]),e,g;while(f.length&&f[0]!==document){e=f.css("position");if(e==="absolute"||e==="relative"||e==="fixed"){g=parseInt(f.css("zIndex"),10);if(!isNaN(g)&&g!==0){return g}}f=f.parent()}}return 0},disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".om-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".om-disableSelection")}});a.each(["Width","Height"],function(g,e){var f=e==="Width"?["Left","Right"]:["Top","Bottom"],h=e.toLowerCase(),k={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};function j(m,l,i,n){a.each(f,function(){l-=parseFloat(a.curCSS(m,"padding"+this,true))||0;if(i){l-=parseFloat(a.curCSS(m,"border"+this+"Width",true))||0}if(n){l-=parseFloat(a.curCSS(m,"margin"+this,true))||0}});return l}a.fn["inner"+e]=function(i){if(i===d){return k["inner"+e].call(this)}return this.each(function(){a(this).css(h,j(this,i)+"px")})};a.fn["outer"+e]=function(i,l){if(typeof i!=="number"){return k["outer"+e].call(this,i)}return this.each(function(){a(this).css(h,j(this,i,true,l)+"px")})}});function c(g,e){var j=g.nodeName.toLowerCase();if("area"===j){var i=g.parentNode,h=i.name,f;if(!g.href||!h||i.nodeName.toLowerCase()!=="map"){return false}f=a("img[usemap=#"+h+"]")[0];return !!f&&b(f)}return(/input|select|textarea|button|object/.test(j)?!g.disabled:"a"==j?g.href||e:e)&&b(g)}function b(e){return !a(e).parents().andSelf().filter(function(){return a.curCSS(this,"visibility")==="hidden"||a.expr.filters.hidden(this)}).length}a.extend(a.expr[":"],{data:function(g,f,e){return !!a.data(g,e[3])},focusable:function(e){return c(e,!isNaN(a.attr(e,"tabindex")))},tabbable:function(g){var e=a.attr(g,"tabindex"),f=isNaN(e);return(f||e>=0)&&c(g,!f)}});a(function(){var e=document.body,f=e.appendChild(f=document.createElement("div"));a.extend(f.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});a.support.minHeight=f.offsetHeight===100;a.support.selectstart="onselectstart" in f;e.removeChild(f).style.display="none"});a.extend(a.om,{plugin:{add:function(f,g,j){var h=a.om[f].prototype;for(var e in j){h.plugins[e]=h.plugins[e]||[];h.plugins[e].push([g,j[e]])}},call:function(e,g,f){var j=e.plugins[g];if(!j||!e.element[0].parentNode){return}for(var h=0;h<j.length;h++){if(e.options[j[h][0]]){j[h][1].apply(e.element,f)}}}}})})(jQuery);(function(a,c){if(a.cleanData){var b=a.cleanData;a.cleanData=function(d){for(var e=0,f;(f=d[e])!=null;e++){a(f).triggerHandler("om-remove")}b(d)}}a.omWidget=function(e,g,d){var f=e.split(".")[0],i;e=e.split(".")[1];i=f+"-"+e;if(!d){d=g;g=a.OMWidget}a.expr[":"][i]=function(j){return !!a.data(j,e)};a[f]=a[f]||{};a[f][e]=function(j,k){if(arguments.length){this._createWidget(j,k)}};var h=new g();h.options=a.extend(true,{},h.options);a[f][e].prototype=a.extend(true,h,{namespace:f,widgetName:e,widgetEventPrefix:a[f][e].prototype.widgetEventPrefix||e,widgetBaseClass:i},d);a.omWidget.bridge(e,a[f][e])};a.omWidget.bridge=function(e,d){a.fn[e]=function(h){var f=typeof h==="string",g=Array.prototype.slice.call(arguments,1),i=this;h=!f&&g.length?a.extend.apply(null,[true,h].concat(g)):h;if(f&&h.charAt(0)==="_"){return i}if(f){this.each(function(){var j=a.data(this,e);if(h=="options"){i=j&&j.options;return false}else{var k=j&&a.isFunction(j[h])?j[h].apply(j,g):j;if(k!==j&&k!==c){i=k;return false}}})}else{this.each(function(){var j=a.data(this,e);if(j){j._setOptions(h||{});a.extend(j.options,h);a(j.beforeInitListeners).each(function(){this.call(j)});j._init();a(j.initListeners).each(function(){this.call(j)})}else{a.data(this,e,new d(h,this))}})}return i}};a.omWidget.addCreateListener=function(e,f){var d=e.split(".");a[d[0]][d[1]].prototype.createListeners.push(f)};a.omWidget.addInitListener=function(e,f){var d=e.split(".");a[d[0]][d[1]].prototype.initListeners.push(f)};a.omWidget.addBeforeInitListener=function(e,f){var d=e.split(".");a[d[0]][d[1]].prototype.beforeInitListeners.push(f)};a.OMWidget=function(d,e){this.createListeners=[];this.initListeners=[];this.beforeInitListeners=[];if(arguments.length){this._createWidget(d,e)}};a.OMWidget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(e,f){a.data(f,this.widgetName,this);this.element=a(f);this.options=a.extend(true,{},this.options,this._getCreateOptions(),e);var d=this;this.element.bind("om-remove._"+this.widgetName,function(){d.destroy()});this._create();a(this.createListeners).each(function(){this.call(d)});this._trigger("create");a(this.beforeInitListeners).each(function(){this.call(d)});this._init();a(this.initListeners).each(function(){this.call(d)})},_getCreateOptions:function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName)},widget:function(){return this.element},option:function(e,f){var d=e;if(arguments.length===0){return a.extend({},this.options)}if(typeof e==="string"){if(f===c){return this.options[e]}d={};d[e]=f}this._setOptions(d);return this},_setOptions:function(e){var d=this;a.each(e,function(f,g){d._setOption(f,g)});return this},_setOption:function(d,e){this.options[d]=e;return this},_trigger:function(f,g){var k=this.options[f];g=a.Event(g);g.type=f;if(g.originalEvent){for(var e=a.event.props.length,j;e;){j=a.event.props[--e];g[j]=g.originalEvent[j]}}var d=[],h=arguments.length;for(var e=2;e<h;e++){d[e-2]=arguments[e]}if(h>1){d[h-2]=arguments[1]}return !(a.isFunction(k)&&k.apply(this.element,d)===false||g.isDefaultPrevented())}}})(jQuery);(function(a,b){a.omWidget("om.omMouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var c=this;this.element.bind("mousedown."+this.widgetName,function(d){return c._mouseDown(d)}).bind("click."+this.widgetName,function(d){if(true===a.data(d.target,c.widgetName+".preventClickEvent")){a.removeData(d.target,c.widgetName+".preventClickEvent");d.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(e){e.originalEvent=e.originalEvent||{};if(e.originalEvent.mouseHandled){return}(this._mouseStarted&&this._mouseUp(e));this._mouseDownEvent=e;var d=this,f=(e.which==1),c=(typeof this.options.cancel=="string"?a(e.target).closest(this.options.cancel).length:false);if(!f||c||!this._mouseCapture(e)){return true}this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=true},this.options.delay)}if(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)){this._mouseStarted=(this._mouseStart(e)!==false);if(!this._mouseStarted){e.preventDefault();return true}}if(true===a.data(e.target,this.widgetName+".preventClickEvent")){a.removeData(e.target,this.widgetName+".preventClickEvent")}this._mouseMoveDelegate=function(g){return d._mouseMove(g)};this._mouseUpDelegate=function(g){return d._mouseUp(g)};a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);e.preventDefault();e.originalEvent.mouseHandled=true;return true},_mouseMove:function(c){if(a.browser.msie&&!(document.documentMode>=9)&&!c.button){return this._mouseUp(c)}if(this._mouseStarted){this._mouseDrag(c);return c.preventDefault()}if(this._mouseDistanceMet(c)&&this._mouseDelayMet(c)){this._mouseStarted=(this._mouseStart(this._mouseDownEvent,c)!==false);(this._mouseStarted?this._mouseDrag(c):this._mouseUp(c))}return !this._mouseStarted},_mouseUp:function(c){a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;if(c.target==this._mouseDownEvent.target){a.data(c.target,this.widgetName+".preventClickEvent",true)}this._mouseStop(c)}return false},_mouseDistanceMet:function(c){return(Math.max(Math.abs(this._mouseDownEvent.pageX-c.pageX),Math.abs(this._mouseDownEvent.pageY-c.pageY))>=this.options.distance)},_mouseDelayMet:function(c){return this.mouseDelayMet},_mouseStart:function(c){},_mouseDrag:function(c){},_mouseStop:function(c){},_mouseCapture:function(c){return true}})})(jQuery);(function(f,g){f.om=f.om||{};var d=/left|center|right/,e=/top|center|bottom/,a="center",b=f.fn.position,c=f.fn.offset;f.fn.position=function(i){if(!i||!i.of){return b.apply(this,arguments)}i=f.extend({},i);var m=f(i.of),l=m[0],o=(i.collision||"flip").split(" "),n=i.offset?i.offset.split(" "):[0,0],k,h,j;if(l.nodeType===9){k=m.width();h=m.height();j={top:0,left:0}}else{if(l.setTimeout){k=m.width();h=m.height();j={top:m.scrollTop(),left:m.scrollLeft()}}else{if(l.preventDefault){i.at="left top";k=h=0;j={top:i.of.pageY,left:i.of.pageX}}else{k=m.outerWidth();h=m.outerHeight();j=m.offset()}}}f.each(["my","at"],function(){var p=(i[this]||"").split(" ");if(p.length===1){p=d.test(p[0])?p.concat([a]):e.test(p[0])?[a].concat(p):[a,a]}p[0]=d.test(p[0])?p[0]:a;p[1]=e.test(p[1])?p[1]:a;i[this]=p});if(o.length===1){o[1]=o[0]}n[0]=parseInt(n[0],10)||0;if(n.length===1){n[1]=n[0]}n[1]=parseInt(n[1],10)||0;if(i.at[0]==="right"){j.left+=k}else{if(i.at[0]===a){j.left+=k/2}}if(i.at[1]==="bottom"){j.top+=h}else{if(i.at[1]===a){j.top+=h/2}}j.left+=n[0];j.top+=n[1];return this.each(function(){var s=f(this),u=s.outerWidth(),r=s.outerHeight(),t=parseInt(f.curCSS(this,"marginLeft",true))||0,q=parseInt(f.curCSS(this,"marginTop",true))||0,w=u+t+(parseInt(f.curCSS(this,"marginRight",true))||0),x=r+q+(parseInt(f.curCSS(this,"marginBottom",true))||0),v=f.extend({},j),p;if(i.my[0]==="right"){v.left-=u}else{if(i.my[0]===a){v.left-=u/2}}if(i.my[1]==="bottom"){v.top-=r}else{if(i.my[1]===a){v.top-=r/2}}v.left=Math.round(v.left);v.top=Math.round(v.top);p={left:v.left-t,top:v.top-q};f.each(["left","top"],function(z,y){if(f.om.omPosition[o[z]]){f.om.omPosition[o[z]][y](v,{targetWidth:k,targetHeight:h,elemWidth:u,elemHeight:r,collisionPosition:p,collisionWidth:w,collisionHeight:x,offset:n,my:i.my,at:i.at})}});if(f.fn.bgiframe){s.bgiframe()}s.offset(f.extend(v,{using:i.using}))})};f.om.omPosition={fit:{left:function(h,i){var k=f(window),j=i.collisionPosition.left+i.collisionWidth-k.width()-k.scrollLeft();h.left=j>0?h.left-j:Math.max(h.left-i.collisionPosition.left,h.left)},top:function(h,i){var k=f(window),j=i.collisionPosition.top+i.collisionHeight-k.height()-k.scrollTop();h.top=j>0?h.top-j:Math.max(h.top-i.collisionPosition.top,h.top)}},flip:{left:function(i,k){if(k.at[0]===a){return}var m=f(window),l=k.collisionPosition.left+k.collisionWidth-m.width()-m.scrollLeft(),h=k.my[0]==="left"?-k.elemWidth:k.my[0]==="right"?k.elemWidth:0,j=k.at[0]==="left"?k.targetWidth:-k.targetWidth,n=-2*k.offset[0];i.left+=k.collisionPosition.left<0?h+j+n:l>0?h+j+n:0},top:function(i,k){if(k.at[1]===a){return}var m=f(window),l=k.collisionPosition.top+k.collisionHeight-m.height()-m.scrollTop(),h=k.my[1]==="top"?-k.elemHeight:k.my[1]==="bottom"?k.elemHeight:0,j=k.at[1]==="top"?k.targetHeight:-k.targetHeight,n=-2*k.offset[1];i.top+=k.collisionPosition.top<0?h+j+n:l>0?h+j+n:0}}};if(!f.offset.setOffset){f.offset.setOffset=function(l,i){if(/static/.test(f.curCSS(l,"position"))){l.style.position="relative"}var k=f(l),n=k.offset(),h=parseInt(f.curCSS(l,"top",true),10)||0,m=parseInt(f.curCSS(l,"left",true),10)||0,j={top:(i.top-n.top)+h,left:(i.left-n.left)+m};if("using" in i){i.using.call(l,j)}else{k.css(j)}};f.fn.offset=function(h){var i=this[0];if(!i||!i.ownerDocument){return null}if(h){return this.each(function(){f.offset.setOffset(this,h)})}return c.call(this)}}}(jQuery));(function(a,b){a.omWidget("om.omDroppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:false,greedy:false,hoverClass:false,_scope:"default"},_create:function(){var d=this.options,c=d.accept;this.isover=0;this.isout=1;this.accept=a.isFunction(c)?c:function(e){return e.is(c)};this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};a.om.ddmanager.droppables[d._scope]=a.om.ddmanager.droppables[d._scope]||[];a.om.ddmanager.droppables[d._scope].push(this);this.element.addClass("om-droppable")},destroy:function(){var c=a.om.ddmanager.droppables[this.options._scope];for(var d=0;d<c.length;d++){if(c[d]==this){c.splice(d,1)}}this.element.removeClass("om-droppable om-droppable-disabled").removeData("omDroppable").unbind(".droppable");return this},_setOption:function(c,d){if(c=="accept"){this.accept=a.isFunction(d)?d:function(e){return e.is(d)}}a.OMWidget.prototype._setOption.apply(this,arguments)},_activate:function(d){var c=a.om.ddmanager.current;if(this.options.activeClass){this.element.addClass(this.options.activeClass)}(c&&this._trigger("onDragStart",d,c.currentItem||c.element))},_deactivate:function(d){var c=a.om.ddmanager.current;if(this.options.activeClass){this.element.removeClass(this.options.activeClass)}},_over:function(d){var c=a.om.ddmanager.current;if(!c||(c.currentItem||c.element)[0]==this.element[0]){return}if(this.accept.call(this.element[0],(c.currentItem||c.element))){if(this.options.hoverClass){this.element.addClass(this.options.hoverClass)}this._trigger("onDragOver",d,c.currentItem||c.element)}},_out:function(d){var c=a.om.ddmanager.current;if(!c||(c.currentItem||c.element)[0]==this.element[0]){return}if(this.accept.call(this.element[0],(c.currentItem||c.element))){if(this.options.hoverClass){this.element.removeClass(this.options.hoverClass)}this._trigger("onDragOut",d,c.currentItem||c.element)}},_drop:function(d,e){var c=e||a.om.ddmanager.current;if(!c||(c.currentItem||c.element)[0]==this.element[0]){return false}var f=false;this.element.find(":data(omDroppable)").not(".om-draggable-dragging").each(function(){var g=a.data(this,"omDroppable");if(g.options.greedy&&!g.options.disabled&&g.options._scope==c.options._scope&&g.accept.call(g.element[0],(c.currentItem||c.element))&&a.om.intersect(c,a.extend(g,{offset:g.element.offset()}))){f=true;return false}});if(f){return false}if(this.accept.call(this.element[0],(c.currentItem||c.element))){if(this.options.activeClass){this.element.removeClass(this.options.activeClass)}if(this.options.hoverClass){this.element.removeClass(this.options.hoverClass)}this._trigger("onDrop",d,c.currentItem||c.element);return this.element}return false}});a.om.intersect=function(m,g){if(!g.offset){return false}var e=(m.positionAbs||m.position.absolute).left,d=e+m.helperProportions.width,j=(m.positionAbs||m.position.absolute).top,i=j+m.helperProportions.height;var f=g.offset.left,c=f+g.proportions.width,k=g.offset.top,h=k+g.proportions.height;return(f<e+(m.helperProportions.width/2)&&d-(m.helperProportions.width/2)<c&&k<j+(m.helperProportions.height/2)&&i-(m.helperProportions.height/2)<h)};a.om.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(f,h){var c=a.om.ddmanager.droppables[f.options._scope]||[];var g=h?h.type:null;var k=(f.currentItem||f.element).find(":data(omDroppable)").andSelf();droppablesLoop:for(var e=0;e<c.length;e++){if(c[e].options.disabled||(f&&!c[e].accept.call(c[e].element[0],(f.currentItem||f.element)))){continue}for(var d=0;d<k.length;d++){if(k[d]==c[e].element[0]){c[e].proportions.height=0;continue droppablesLoop}}c[e].visible=c[e].element.css("display")!="none";if(!c[e].visible){continue}if(g=="mousedown"){c[e]._activate.call(c[e],h)}c[e].offset=c[e].element.offset();c[e].proportions={width:c[e].element[0].offsetWidth,height:c[e].element[0].offsetHeight}}},drop:function(c,d){var e=false;a.each(a.om.ddmanager.droppables[c.options._scope]||[],function(){if(!this.options){return}if(!this.options.disabled&&this.visible&&a.om.intersect(c,this)){e=e||this._drop.call(this,d)}if(!this.options.disabled&&this.visible&&this.accept.call(this.element[0],(c.currentItem||c.element))){this.isout=1;this.isover=0;this._deactivate.call(this,d)}});return e},dragStart:function(c,d){c.element.parentsUntil("body").bind("scroll.droppable",function(){if(!c.options.refreshPositions){a.om.ddmanager.prepareOffsets(c,d)}})},drag:function(c,d){if(c.options.refreshPositions){a.om.ddmanager.prepareOffsets(c,d)}a.each(a.om.ddmanager.droppables[c.options._scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible){return}var f=a.om.intersect(c,this);var h=!f&&this.isover==1?"isout":(f&&this.isover==0?"isover":null);if(!h){return}var g;if(this.options.greedy){var e=this.element.parents(":data(omDroppable):eq(0)");if(e.length){g=a.data(e[0],"omDroppable");g.greedyChild=(h=="isover"?1:0)}}if(g&&h=="isover"){g.isover=0;g.isout=1;g._out.call(g,d)}this[h]=1;this[h=="isout"?"isover":"isout"]=0;this[h=="isover"?"_over":"_out"].call(this,d);if(g&&h=="isout"){g.isout=0;g.isover=1;g._over.call(g,d)}})},dragStop:function(c,d){c.element.parentsUntil("body").unbind("scroll.droppable");if(!c.options.refreshPositions){a.om.ddmanager.prepareOffsets(c,d)}}}})(jQuery);(function(a,b){a.omWidget("om.omDraggable",a.om.omMouse,{widgetEventPrefix:"drag",options:{axis:false,containment:false,cursor:"auto",_scope:"default",handle:false,helper:"original",revert:false,scroll:true},_create:function(){if(this.options.helper=="original"&&!(/^(?:r|a|f)/).test(this.element.css("position"))){this.element[0].style.position="relative"}this.element.addClass("om-draggable");(this.options.disabled&&this.element.addClass("om-draggable-disabled"));this._mouseInit()},destroy:function(){if(!this.element.data("omDraggable")){return}this.element.removeData("omDraggable").unbind(".draggable").removeClass("om-draggable om-draggable-dragging om-draggable-disabled");this._mouseDestroy();return this},_mouseCapture:function(c){var d=this.options;if(this.helper||d.disabled||a(c.target).is(".om-resizable-handle")){return false}this.handle=this._getHandle(c);if(!this.handle){return false}return true},_mouseStart:function(c){var d=this.options;this.helper=this._createHelper(c);this._cacheHelperProportions();if(a.om.ddmanager){a.om.ddmanager.current=this}this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};a.extend(this.offset,{click:{left:c.pageX-this.offset.left,top:c.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(c);this.originalPageX=c.pageX;this.originalPageY=c.pageY;if(d.containment){this._setContainment()}if(this._trigger("onStart",c)===false){this._clear();return false}this._cacheHelperProportions();if(a.om.ddmanager&&!d.dropBehaviour){a.om.ddmanager.prepareOffsets(this,c)}this.helper.addClass("om-draggable-dragging");this._mouseDrag(c,true);if(a.om.ddmanager){a.om.ddmanager.dragStart(this,c)}return true},_mouseDrag:function(c,e){this.position=this._generatePosition(c);this.positionAbs=this._convertPositionTo("absolute");if(!e){var d=this._uiHash();if(this._trigger("onDrag",c,d)===false){this._mouseUp({});return false}this.position=d.position}if(!this.options.axis||this.options.axis!="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!="x"){this.helper[0].style.top=this.position.top+"px"}if(a.om.ddmanager){a.om.ddmanager.drag(this,c)}return false},_mouseStop:function(d){var e=false;if(a.om.ddmanager&&!this.options.dropBehaviour){e=a.om.ddmanager.drop(this,d)}if(this.dropped){e=this.dropped;this.dropped=false}if((!this.element[0]||!this.element[0].parentNode)&&this.options.helper=="original"){return false}if((this.options.revert=="invalid"&&!e)||(this.options.revert=="valid"&&e)||this.options.revert===true||(a.isFunction(this.options.revert)&&this.options.revert.call(this.element,e))){var c=this;a(this.helper).animate(this.originalPosition,500,function(){if(c._trigger("onStop",d)!==false){c._clear()}})}else{if(this._trigger("onStop",d)!==false){this._clear()}}return false},_mouseUp:function(c){if(a.om.ddmanager){a.om.ddmanager.dragStop(this,c)}return a.om.omMouse.prototype._mouseUp.call(this,c)},cancel:function(){if(this.helper.is(".om-draggable-dragging")){this._mouseUp({})}else{this._clear()}return this},_getHandle:function(c){var d=!this.options.handle||!a(this.options.handle,this.element).length?true:false;a(this.options.handle,this.element).find("*").andSelf().each(function(){if(this==c.target){d=true}});return d},_createHelper:function(d){var e=this.options;var c=a.isFunction(e.helper)?a(e.helper.apply(this.element[0],[d])):(e.helper=="clone"?this.element.clone().removeAttr("id"):this.element);if(!c.parents("body").length){c.appendTo(this.element[0].parentNode)}if(c[0]!=this.element[0]&&!(/(fixed|absolute)/).test(c.css("position"))){c.css("position","absolute")}return c},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var c=this.offsetParent.offset();if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],this.offsetParent[0])){c.left+=this.scrollParent.scrollLeft();c.top+=this.scrollParent.scrollTop()}if((this.offsetParent[0]==document.body)||(this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&a.browser.msie)){c={top:0,left:0}}return{top:c.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:c.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var c=this.element.position();return{top:c.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:c.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else{return{top:0,left:0}}},_cacheMargins:function(){this.margins={left:(parseInt(this.element.css("marginLeft"),10)||0),top:(parseInt(this.element.css("marginTop"),10)||0),right:(parseInt(this.element.css("marginRight"),10)||0),bottom:(parseInt(this.element.css("marginBottom"),10)||0)}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var g=this.options;if(g.containment=="parent"){g.containment=this.helper[0].parentNode}if(g.containment=="document"||g.containment=="window"){this.containment=[g.containment=="document"?0:a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,g.containment=="document"?0:a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(g.containment=="document"?0:a(window).scrollLeft())+a(g.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(g.containment=="document"?0:a(window).scrollTop())+(a(g.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!(/^(document|window|parent)$/).test(g.containment)&&g.containment.constructor!=Array){var h=a(g.containment);var e=h[0];if(!e){return}var f=h.offset();var d=(a(e).css("overflow")!="hidden");this.containment=[(parseInt(a(e).css("borderLeftWidth"),10)||0)+(parseInt(a(e).css("paddingLeft"),10)||0),(parseInt(a(e).css("borderTopWidth"),10)||0)+(parseInt(a(e).css("paddingTop"),10)||0),(d?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(a(e).css("borderLeftWidth"),10)||0)-(parseInt(a(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(d?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(a(e).css("borderTopWidth"),10)||0)-(parseInt(a(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];this.relative_container=h}else{if(g.containment.constructor==Array){this.containment=g.containment}}},_convertPositionTo:function(g,i){if(!i){i=this.position}var e=g=="absolute"?1:-1;var f=this.options,c=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,h=(/(html|body)/i).test(c[0].tagName);return{top:(i.top+this.offset.relative.top*e+this.offset.parent.top*e-(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():(h?0:c.scrollTop()))*e)),left:(i.left+this.offset.relative.left*e+this.offset.parent.left*e-(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():h?0:c.scrollLeft())*e))}},_generatePosition:function(f){var h=this.options,c=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,j=(/(html|body)/i).test(c[0].tagName);var e=f.pageX;var d=f.pageY;if(this.originalPosition){var i;if(this.containment){if(this.relative_container){var g=this.relative_container.offset();i=[this.containment[0]+g.left,this.containment[1]+g.top,this.containment[2]+g.left,this.containment[3]+g.top]}else{i=this.containment}if(f.pageX-this.offset.click.left<i[0]){e=i[0]+this.offset.click.left}if(f.pageY-this.offset.click.top<i[1]){d=i[1]+this.offset.click.top}if(f.pageX-this.offset.click.left>i[2]){e=i[2]+this.offset.click.left}if(f.pageY-this.offset.click.top>i[3]){d=i[3]+this.offset.click.top}}}return{top:(d-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():(j?0:c.scrollTop())))),left:(e-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():j?0:c.scrollLeft())))}},_clear:function(){this.helper.removeClass("om-draggable-dragging");if(this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval){this.helper.remove()}this.helper=null;this.cancelHelperRemoval=false},_trigger:function(c,d,e){e=e||this._uiHash();a.om.plugin.call(this,c,[d,e]);if(c=="onDrag"){this.positionAbs=this._convertPositionTo("absolute")}return a.OMWidget.prototype._trigger.call(this,c,d,e)},plugins:{},_uiHash:function(c){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});a.om.plugin.add("omDraggable","cursor",{onStart:function(e,d){var c=a("body"),f=a(this).data("omDraggable").options;if(c.css("cursor")){f._cursor=c.css("cursor")}c.css("cursor",f.cursor)},onStop:function(e,d){var c=a(this).data("omDraggable");if(c){var f=c.options;if(f._cursor){a("body").css("cursor",f._cursor)}}}});a.om.plugin.add("omDraggable","scroll",{onStart:function(e,d){var c=a(this).data("omDraggable");if(c.scrollParent[0]!=document&&c.scrollParent[0].tagName!="HTML"){c.overflowOffset=c.scrollParent.offset()}},onDrag:function(h,g){var e=a(this).data("omDraggable"),j=e.options,c=false,d=20,f=20;if(e.scrollParent[0]!=document&&e.scrollParent[0].tagName!="HTML"){if(!j.axis||j.axis!="x"){if((e.overflowOffset.top+e.scrollParent[0].offsetHeight)-g.pageY<d){e.scrollParent[0].scrollTop=c=e.scrollParent[0].scrollTop+f}else{if(g.pageY-e.overflowOffset.top<d){e.scrollParent[0].scrollTop=c=e.scrollParent[0].scrollTop-f}}}if(!j.axis||j.axis!="y"){if((e.overflowOffset.left+e.scrollParent[0].offsetWidth)-g.pageX<d){e.scrollParent[0].scrollLeft=c=e.scrollParent[0].scrollLeft+f}else{if(g.pageX-e.overflowOffset.left<d){e.scrollParent[0].scrollLeft=c=e.scrollParent[0].scrollLeft-f}}}}else{if(!j.axis||j.axis!="x"){if(g.pageY-a(document).scrollTop()<d){c=a(document).scrollTop(a(document).scrollTop()-f)}else{if(a(window).height()-(g.pageY-a(document).scrollTop())<d){c=a(document).scrollTop(a(document).scrollTop()+f)}}}if(!j.axis||j.axis!="y"){if(g.pageX-a(document).scrollLeft()<d){c=a(document).scrollLeft(a(document).scrollLeft()-f)}else{if(a(window).width()-(g.pageX-a(document).scrollLeft())<d){c=a(document).scrollLeft(a(document).scrollLeft()+f)}}}}if(c!==false&&a.om.ddmanager&&!j.dropBehaviour){a.om.ddmanager.prepareOffsets(e,g)}}})})(jQuery);(function(c,d){c.omWidget("om.omResizable",c.om.omMouse,{widgetEventPrefix:"resize",options:{alsoResize:false,aspectRatio:false,autoHide:false,containment:false,handles:"e,s,se",helper:false,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1000},_create:function(){var f=this,k=this.options;this.element.addClass("om-resizable");c.extend(this,{_aspectRatio:!!(k.aspectRatio),aspectRatio:k.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:k.helper||k.ghost||k.animate?k.helper||"om-resizable-helper":null});if(this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)){if(/relative/.test(this.element.css("position"))&&c.browser.opera){this.element.css({position:"relative",top:"auto",left:"auto"})}this.element.wrap(c('<div class="om-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")}));this.element=this.element.parent().data("resizable",this.element.data("resizable"));this.elementIsWrapper=true;this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")});this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0});this.originalResizeStyle=this.originalElement.css("resize");this.originalElement.css("resize","none");this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"}));this.originalElement.css({margin:this.originalElement.css("margin")});this._proportionallyResize()}this.handles=k.handles||(!c(".om-resizable-handle",this.element).length?"e,s,se":{n:".om-resizable-n",e:".om-resizable-e",s:".om-resizable-s",w:".om-resizable-w",se:".om-resizable-se",sw:".om-resizable-sw",ne:".om-resizable-ne",nw:".om-resizable-nw"});if(this.handles.constructor==String){if(this.handles=="all"){this.handles="n,e,s,w,se,sw,ne,nw"}var l=this.handles.split(",");this.handles={};for(var g=0;g<l.length;g++){var j=c.trim(l[g]),e="om-resizable-"+j;var h=c('<div class="om-resizable-handle '+e+'"></div>');if(/sw|se|ne|nw/.test(j)){h.css({zIndex:++k.zIndex})}if("se"==j){h.addClass("om-icon om-icon-gripsmall-diagonal-se")}this.handles[j]=".om-resizable-"+j;this.element.append(h)}}this._renderAxis=function(q){q=q||this.element;for(var n in this.handles){if(this.handles[n].constructor==String){this.handles[n]=c(this.handles[n],this.element).show()}if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var o=c(this.handles[n],this.element),p=0;p=/sw|ne|nw|se|n|s/.test(n)?o.outerHeight():o.outerWidth();var m=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join("");q.css(m,p);this._proportionallyResize()}if(!c(this.handles[n]).length){continue}}};this._renderAxis(this.element);this._handles=c(".om-resizable-handle",this.element).disableSelection();this._handles.mouseover(function(){if(!f.resizing){if(this.className){var i=this.className.match(/om-resizable-(se|sw|ne|nw|n|e|s|w)/i)}f.axis=i&&i[1]?i[1]:"se"}});if(k.autoHide){this._handles.hide();c(this.element).addClass("om-resizable-autohide").hover(function(){if(k.disabled){return}c(this).removeClass("om-resizable-autohide");f._handles.show()},function(){if(k.disabled){return}if(!f.resizing){c(this).addClass("om-resizable-autohide");f._handles.hide()}})}this._mouseInit()},destroy:function(){this._mouseDestroy();var e=function(g){c(g).removeClass("om-resizable om-resizable-disabled om-resizable-resizing").removeData("resizable").unbind(".resizable").find(".om-resizable-handle").remove()};if(this.elementIsWrapper){e(this.element);var f=this.element;f.after(this.originalElement.css({position:f.css("position"),width:f.outerWidth(),height:f.outerHeight(),top:f.css("top"),left:f.css("left")})).remove()}this.originalElement.css("resize",this.originalResizeStyle);e(this.originalElement);return this},_mouseCapture:function(f){var g=false;for(var e in this.handles){if(c(this.handles[e])[0]==f.target){g=true}}return !this.options.disabled&&g},_mouseStart:function(g){var j=this.options,f=this.element.position(),e=this.element;this.resizing=true;this.documentScroll={top:c(document).scrollTop(),left:c(document).scrollLeft()};if(e.is(".ui-draggable")||(/absolute/).test(e.css("position"))){e.css({position:"absolute",top:f.top,left:f.left})}if(c.browser.opera&&(/relative/).test(e.css("position"))){e.css({position:"relative",top:"auto",left:"auto"})}this._renderProxy();var k=b(this.helper.css("left")),h=b(this.helper.css("top"));if(j.containment){k+=c(j.containment).scrollLeft()||0;h+=c(j.containment).scrollTop()||0}this.offset=this.helper.offset();this.position={left:k,top:h};this.size=this._helper?{width:e.outerWidth(),height:e.outerHeight()}:{width:e.width(),height:e.height()};this.originalSize=this._helper?{width:e.outerWidth(),height:e.outerHeight()}:{width:e.width(),height:e.height()};this.originalPosition={left:k,top:h};this.sizeDiff={width:e.outerWidth()-e.width(),height:e.outerHeight()-e.height()};this.originalMousePosition={left:g.pageX,top:g.pageY};this.aspectRatio=(typeof j.aspectRatio=="number")?j.aspectRatio:((this.originalSize.width/this.originalSize.height)||1);var i=c(".om-resizable-"+this.axis).css("cursor");c("body").css("cursor",i=="auto"?this.axis+"-resize":i);e.addClass("om-resizable-resizing");this._propagate("start",g);return true},_mouseDrag:function(e){var h=this.helper,g=this.options,m={},q=this,j=this.originalMousePosition,n=this.axis;var r=(e.pageX-j.left)||0,p=(e.pageY-j.top)||0;var i=this._change[n];if(!i){return false}var l=i.apply(this,[e,r,p]),k=c.browser.msie&&c.browser.version<7,f=this.sizeDiff;this._updateVirtualBoundaries(e.shiftKey);if(this._aspectRatio||e.shiftKey){l=this._updateRatio(l,e)}l=this._respectSize(l,e);this._propagate("resize",e);h.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"});if(!this._helper&&this._proportionallyResizeElements.length){this._proportionallyResize()}this._updateCache(l);this._trigger("resize",e,this.ui());return false},_mouseStop:function(h){this.resizing=false;var i=this.options,m=this;if(this._helper){var g=this._proportionallyResizeElements,e=g.length&&(/textarea/i).test(g[0].nodeName),f=e&&m._hasScroll(g[0],"left")?0:m.sizeDiff.height,k=e?0:m.sizeDiff.width;var n={width:(m.helper.width()-k),height:(m.helper.height()-f)},j=(parseInt(m.element.css("left"),10)+(m.position.left-m.originalPosition.left))||null,l=(parseInt(m.element.css("top"),10)+(m.position.top-m.originalPosition.top))||null;if(!i.animate){this.element.css(c.extend(n,{top:l,left:j}))}m.helper.height(m.size.height);m.helper.width(m.size.width);if(this._helper&&!i.animate){this._proportionallyResize()}}c("body").css("cursor","auto");this.element.removeClass("om-resizable-resizing");this._propagate("stop",h);if(this._helper){this.helper.remove()}return false},_updateVirtualBoundaries:function(g){var j=this.options,i,h,f,k,e;e={minWidth:a(j.minWidth)?j.minWidth:0,maxWidth:a(j.maxWidth)?j.maxWidth:Infinity,minHeight:a(j.minHeight)?j.minHeight:0,maxHeight:a(j.maxHeight)?j.maxHeight:Infinity};if(this._aspectRatio||g){i=e.minHeight*this.aspectRatio;f=e.minWidth/this.aspectRatio;h=e.maxHeight*this.aspectRatio;k=e.maxWidth/this.aspectRatio;if(i>e.minWidth){e.minWidth=i}if(f>e.minHeight){e.minHeight=f}if(h<e.maxWidth){e.maxWidth=h}if(k<e.maxHeight){e.maxHeight=k}}this._vBoundaries=e},_updateCache:function(e){var f=this.options;this.offset=this.helper.offset();if(a(e.left)){this.position.left=e.left}if(a(e.top)){this.position.top=e.top}if(a(e.height)){this.size.height=e.height}if(a(e.width)){this.size.width=e.width}},_updateRatio:function(h,g){var i=this.options,j=this.position,f=this.size,e=this.axis;if(a(h.height)){h.width=(h.height*this.aspectRatio)}else{if(a(h.width)){h.height=(h.width/this.aspectRatio)}}if(e=="sw"){h.left=j.left+(f.width-h.width);h.top=null}if(e=="nw"){h.top=j.top+(f.height-h.height);h.left=j.left+(f.width-h.width)}return h},_respectSize:function(l,g){var j=this.helper,i=this._vBoundaries,r=this._aspectRatio||g.shiftKey,q=this.axis,t=a(l.width)&&i.maxWidth&&(i.maxWidth<l.width),m=a(l.height)&&i.maxHeight&&(i.maxHeight<l.height),h=a(l.width)&&i.minWidth&&(i.minWidth>l.width),s=a(l.height)&&i.minHeight&&(i.minHeight>l.height);if(h){l.width=i.minWidth}if(s){l.height=i.minHeight}if(t){l.width=i.maxWidth}if(m){l.height=i.maxHeight}var f=this.originalPosition.left+this.originalSize.width,p=this.position.top+this.size.height;var k=/sw|nw|w/.test(q),e=/nw|ne|n/.test(q);if(h&&k){l.left=f-i.minWidth}if(t&&k){l.left=f-i.maxWidth}if(s&&e){l.top=p-i.minHeight}if(m&&e){l.top=p-i.maxHeight}var n=!l.width&&!l.height;if(n&&!l.left&&l.top){l.top=null}else{if(n&&!l.top&&l.left){l.left=null}}return l},_proportionallyResize:function(){var k=this.options;if(!this._proportionallyResizeElements.length){return}var g=this.helper||this.element;for(var f=0;f<this._proportionallyResizeElements.length;f++){var h=this._proportionallyResizeElements[f];if(!this.borderDif){var e=[h.css("borderTopWidth"),h.css("borderRightWidth"),h.css("borderBottomWidth"),h.css("borderLeftWidth")],j=[h.css("paddingTop"),h.css("paddingRight"),h.css("paddingBottom"),h.css("paddingLeft")];this.borderDif=c.map(e,function(l,n){var m=parseInt(l,10)||0,o=parseInt(j[n],10)||0;return m+o})}if(c.browser.msie&&!(!(c(g).is(":hidden")||c(g).parents(":hidden").length))){continue}h.css({height:(g.height()-this.borderDif[0]-this.borderDif[2])||0,width:(g.width()-this.borderDif[1]-this.borderDif[3])||0})}},_renderProxy:function(){var f=this.element,i=this.options;this.elementOffset=f.offset();if(this._helper){this.helper=this.helper||c('<div style="overflow:hidden;"></div>');var e=c.browser.msie&&c.browser.version<7,g=(e?1:0),h=(e?2:-1);this.helper.addClass(this._helper).css({width:this.element.outerWidth()+h,height:this.element.outerHeight()+h,position:"absolute",left:this.elementOffset.left-g+"px",top:this.elementOffset.top-g+"px",zIndex:++i.zIndex});this.helper.appendTo("body").disableSelection()}else{this.helper=this.element}},_change:{e:function(g,f,e){return{width:this.originalSize.width+f}},w:function(h,f,e){var j=this.options,g=this.originalSize,i=this.originalPosition;return{left:i.left+f,width:g.width-f}},n:function(h,f,e){var j=this.options,g=this.originalSize,i=this.originalPosition;return{top:i.top+e,height:g.height-e}},s:function(g,f,e){return{height:this.originalSize.height+e}},se:function(g,f,e){return c.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[g,f,e]))},sw:function(g,f,e){return c.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[g,f,e]))},ne:function(g,f,e){return c.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[g,f,e]))},nw:function(g,f,e){return c.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[g,f,e]))}},_propagate:function(f,e){c.om.plugin.call(this,f,[e,this.ui()]);(f!="resize"&&this._trigger(f,e,this.ui()))},_hasScroll:function(h,f){if(c(h).css("overflow")==="hidden"){return false}var e=(f&&f==="left")?"scrollLeft":"scrollTop",g=false;if(h[e]>0){return true}h[e]=1;g=(h[e]>0);h[e]=0;return g},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});c.extend(c.om.resizable,{version:"1.1"});c.om.plugin.add("omResizable","alsoResize",{start:function(f,g){var e=c(this).data("omResizable"),i=e.options;var h=function(j){c(j).each(function(){var k=c(this);k.data("resizable-alsoresize",{width:parseInt(k.width(),10),height:parseInt(k.height(),10),left:parseInt(k.css("left"),10),top:parseInt(k.css("top"),10),position:k.css("position")})})};if(typeof(i.alsoResize)=="object"&&!i.alsoResize.parentNode){if(i.alsoResize.length){i.alsoResize=i.alsoResize[0];h(i.alsoResize)}else{c.each(i.alsoResize,function(j){h(j)})}}else{h(i.alsoResize)}},resize:function(g,i){var f=c(this).data("omResizable"),j=f.options,h=f.originalSize,l=f.originalPosition;var k={height:(f.size.height-h.height)||0,width:(f.size.width-h.width)||0,top:(f.position.top-l.top)||0,left:(f.position.left-l.left)||0},e=function(m,n){c(m).each(function(){var q=c(this),r=c(this).data("resizable-alsoresize"),p={},o=n&&n.length?n:q.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];c.each(o,function(s,u){var t=(r[u]||0)+(k[u]||0);if(t&&t>=0){p[u]=t||null}});if(c.browser.opera&&/relative/.test(q.css("position"))){f._revertToRelativePosition=true;q.css({position:"absolute",top:"auto",left:"auto"})}q.css(p)})};if(typeof(j.alsoResize)=="object"&&!j.alsoResize.nodeType){c.each(j.alsoResize,function(m,n){e(m,n)})}else{e(j.alsoResize)}},stop:function(g,h){var f=c(this).data("omResizable"),i=f.options;var e=function(j){c(j).each(function(){var k=c(this);k.css({position:k.data("resizable-alsoresize").position})})};if(f._revertToRelativePosition){f._revertToRelativePosition=false;if(typeof(i.alsoResize)=="object"&&!i.alsoResize.nodeType){c.each(i.alsoResize,function(j){e(j)})}else{e(i.alsoResize)}}c(this).removeData("resizable-alsoresize")}});c.om.plugin.add("omResizable","containment",{start:function(f,r){var t=c(this).data("omResizable"),j=t.options,l=t.element;var g=j.containment,k=(g instanceof c)?g.get(0):(/parent/.test(g))?l.parent().get(0):g;if(!k){return}t.containerElement=c(k);if(/document/.test(g)||g==document){t.containerOffset={left:0,top:0};t.containerPosition={left:0,top:0};t.parentData={element:c(document),left:0,top:0,width:c(document).width(),height:c(document).height()||document.body.parentNode.scrollHeight}}else{var n=c(k),i=[];c(["Top","Right","Left","Bottom"]).each(function(p,o){i[p]=b(n.css("padding"+o))});t.containerOffset=n.offset();t.containerPosition=n.position();t.containerSize={height:(n.innerHeight()-i[3]),width:(n.innerWidth()-i[1])};var q=t.containerOffset,e=t.containerSize.height,m=t.containerSize.width,h=(t._hasScroll(k,"left")?k.scrollWidth:m),s=(t._hasScroll(k)?k.scrollHeight:e);t.parentData={element:k,left:q.left,top:q.top,width:h,height:s}}},resize:function(g,q){var t=c(this).data("omResizable"),i=t.options,f=t.containerSize,p=t.containerOffset,m=t.size,n=t.position,r=t._aspectRatio||g.shiftKey,e={top:0,left:0},h=t.containerElement;if(h[0]!=document&&(/static/).test(h.css("position"))){e=p}if(n.left<(t._helper?p.left:0)){t.size.width=t.size.width+(t._helper?(t.position.left-p.left):(t.position.left-e.left));if(r){t.size.height=t.size.width/i.aspectRatio}t.position.left=i.helper?p.left:0}if(n.top<(t._helper?p.top:0)){t.size.height=t.size.height+(t._helper?(t.position.top-p.top):t.position.top);if(r){t.size.width=t.size.height*i.aspectRatio}t.position.top=t._helper?p.top:0}t.offset.left=t.parentData.left+t.position.left;t.offset.top=t.parentData.top+t.position.top;var l=Math.abs((t._helper?t.offset.left-e.left:(t.offset.left-e.left))+t.sizeDiff.width),s=Math.abs((t._helper?t.offset.top-e.top:(t.offset.top-p.top))+t.sizeDiff.height);var k=t.containerElement.get(0)==t.element.parent().get(0),j=/relative|absolute/.test(t.containerElement.css("position"));if(k&&j){l-=t.parentData.left}if(l+t.size.width>=t.parentData.width){t.size.width=t.parentData.width-l;if(r){t.size.height=t.size.width/t.aspectRatio}}if(s+t.size.height>=t.parentData.height){t.size.height=t.parentData.height-s;if(r){t.size.width=t.size.height*t.aspectRatio}}},stop:function(f,n){var q=c(this).data("omResizable"),g=q.options,l=q.position,m=q.containerOffset,e=q.containerPosition,i=q.containerElement;var j=c(q.helper),r=j.offset(),p=j.outerWidth()-q.sizeDiff.width,k=j.outerHeight()-q.sizeDiff.height;if(q._helper&&!g.animate&&(/relative/).test(i.css("position"))){c(this).css({left:r.left-e.left-m.left,width:p,height:k})}if(q._helper&&!g.animate&&(/static/).test(i.css("position"))){c(this).css({left:r.left-e.left-m.left,width:p,height:k})}}});var b=function(e){return parseInt(e,10)||0};var a=function(e){return !isNaN(parseInt(e,10))}})(jQuery);(function(a,b){a.omWidget("om.sortable",a.om.omMouse,{widgetEventPrefix:"sort",options:{helper:"original",items:"> *",placeholder:false},_create:function(){this.containerCache={};this.element.addClass("ui-sortable");this.refresh();this.floating=this.items.length?(/left|right/).test(this.items[0].item.css("float"))||(/inline|table-cell/).test(this.items[0].item.css("display")):false;this.offset=this.element.offset();this._mouseInit()},_mouseCapture:function(f,g){if(this.reverting){return false}if(this.options.disabled||this.options.type=="static"){return false}this._refreshItems(f);var e=null,d=this,c=a(f.target).parents().each(function(){if(a.data(this,"sortable-item")==d){e=a(this);return false}});if(a.data(f.target,"sortable-item")==d){e=a(f.target)}if(!e){return false}this.currentItem=e;return true},_mouseStart:function(d,e,c){this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(d);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");a.extend(this.offset,{click:{left:d.pageX-this.offset.left,top:d.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this._generatePosition(d);this.originalPageX=d.pageX;this.originalPageY=d.pageY;this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};if(this.helper[0]!=this.currentItem[0]){this.currentItem.hide()}this._createPlaceholder();this.helper.css("zIndex",1000);if(this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"){this.overflowOffset=this.scrollParent.offset()}this._trigger("start",d,this._uiHash());if(!this._preserveHelperProportions){this._cacheHelperProportions()}this.helper.addClass("ui-sortable-helper");this._mouseDrag(d);return true},_mouseDrag:function(g){this.position=this._generatePosition(g);this.positionAbs=this._convertPositionTo("absolute");if(!this.lastPositionAbs){this.lastPositionAbs=this.positionAbs}var h=this.options,c=false;if((this.overflowOffset.top+this.scrollParent[0].offsetHeight)-g.pageY<20){this.scrollParent[0].scrollTop=c=this.scrollParent[0].scrollTop+20}else{if(g.pageY-this.overflowOffset.top<20){this.scrollParent[0].scrollTop=c=this.scrollParent[0].scrollTop-20}}if((this.overflowOffset.left+this.scrollParent[0].offsetWidth)-g.pageX<20){this.scrollParent[0].scrollLeft=c=this.scrollParent[0].scrollLeft+20}else{if(g.pageX-this.overflowOffset.left<20){this.scrollParent[0].scrollLeft=c=this.scrollParent[0].scrollLeft-20}}this.positionAbs=this._convertPositionTo("absolute");this.helper[0].style.left=this.position.left+"px";this.helper[0].style.top=this.position.top+"px";for(var e=this.items.length-1;e>=0;e--){var f=this.items[e],d=f.item[0],j=this._intersectsWithPointer(f);if(!j){continue}if(d!=this.currentItem[0]&&this.placeholder[j==1?"next":"prev"]()[0]!=d&&!a.contains(this.placeholder[0],d)&&(this.options.type=="semi-dynamic"?!a.contains(this.element[0],d):true)){this.direction=j==1?"down":"up";if(this._intersectsWithSides(f)){this._rearrange(g,f)}else{break}break}}this.lastPositionAbs=this.positionAbs;return false},_mouseStop:function(c,d){if(!c){return}this._clear(c,d);return false},_intersectsWith:function(m){var e=this.positionAbs.left,d=e+this.helperProportions.width,k=this.positionAbs.top,j=k+this.helperProportions.height;var f=m.left,c=f+m.width,n=m.top,i=n+m.height;var o=this.offset.click.top,h=this.offset.click.left;var g=(k+o)>n&&(k+o)<i&&(e+h)>f&&(e+h)<c;return(f<e+(this.helperProportions.width/2)&&d-(this.helperProportions.width/2)<c&&n<k+(this.helperProportions.height/2)&&j-(this.helperProportions.height/2)<i)},_isOverAxis:function(d,c,e){return(d>c)&&(d<(c+e))},_intersectsWithPointer:function(e){var f=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),d=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),h=f&&d,c=this._getDragVerticalDirection(),g=this._getDragHorizontalDirection();if(!h){return false}return this.floating?(((g&&g=="right")||c=="down")?2:1):(c&&(c=="down"?2:1))},_intersectsWithSides:function(f){var d=this._isOverAxis(this.positionAbs.top+this.offset.click.top,f.top+(f.height/2),f.height),e=this._isOverAxis(this.positionAbs.left+this.offset.click.left,f.left+(f.width/2),f.width),c=this._getDragVerticalDirection(),g=this._getDragHorizontalDirection();if(this.floating&&g){return((g=="right"&&e)||(g=="left"&&!e))}else{return c&&((c=="down"&&d)||(c=="up"&&!d))}},_getDragVerticalDirection:function(){var c=this.positionAbs.top-this.lastPositionAbs.top;return c!=0&&(c>0?"down":"up")},_getDragHorizontalDirection:function(){var c=this.positionAbs.left-this.lastPositionAbs.left;return c!=0&&(c>0?"right":"left")},refresh:function(c){this._refreshItems(c);this.refreshPositions();return this},_refreshItems:function(h){this.items=[];this.containers=[this];var d=this.items;var f=[a(this.options.items,this.element),this];var k=f[1];var c=f[0];for(var e=0,i=c.length;e<i;e++){var g=a(c[e]);g.data("sortable-item",k);d.push({item:g,instance:k,width:0,height:0,left:0,top:0})}},refreshPositions:function(c){if(this.offsetParent&&this.helper){this.offset.parent=this._getParentOffset()}for(var e=this.items.length-1;e>=0;e--){var f=this.items[e];if(f.instance!=this.currentContainer&&this.currentContainer&&f.item[0]!=this.currentItem[0]){continue}var d=f.item;if(!c){f.width=d.outerWidth();f.height=d.outerHeight()}var g=d.offset();f.left=g.left;f.top=g.top}return this},_createPlaceholder:function(e){var c=e||this,f=c.options;if(!f.placeholder||f.placeholder.constructor==String){var d=f.placeholder;f.placeholder={element:function(){var g=a(document.createElement(c.currentItem[0].nodeName)).addClass(d||c.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];if(!d){g.style.visibility="hidden"}return g}}}c.placeholder=a(f.placeholder.element.call(c.element,c.currentItem));c.currentItem.after(c.placeholder)},_createHelper:function(d){var c=this.currentItem;if(!c.parents("body").length){a(this.currentItem[0].parentNode)[0].appendChild(c[0])}this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")};return c},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var d=this.offsetParent,c=d.offset();if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],d[0])){c.left+=this.scrollParent.scrollLeft();c.top+=this.scrollParent.scrollTop()}if((d[0]==document.body)||(d[0].tagName&&d[0].tagName.toLowerCase()=="html"&&a.browser.msie)){c={top:0,left:0}}return{top:c.top+(parseInt(d.css("borderTopWidth"),10)||0),left:c.left+(parseInt(d.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var c=this.currentItem.position();return{top:c.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:c.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else{return{top:0,left:0}}},_cacheMargins:function(){this.margins={left:(parseInt(this.currentItem.css("marginLeft"),10)||0),top:(parseInt(this.currentItem.css("marginTop"),10)||0)}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_convertPositionTo:function(g,i){if(!i){i=this.position}var e=g=="absolute"?1:-1;var f=this.options,c=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,h=(/(html|body)/i).test(c[0].tagName);return{top:(i.top+this.offset.relative.top*e+this.offset.parent.top*e-(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():(h?0:c.scrollTop()))*e)),left:(i.left+this.offset.relative.left*e+this.offset.parent.left*e-(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():h?0:c.scrollLeft())*e))}},_generatePosition:function(f){var g=this.options,c=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,h=(/(html|body)/i).test(c[0].tagName);if(this.cssPosition=="relative"&&!(this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0])){this.offset.relative=this._getRelativeOffset()}var e=f.pageX;var d=f.pageY;return{top:(d-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():(h?0:c.scrollTop())))),left:(e-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():h?0:c.scrollLeft())))}},_rearrange:function(h,g,d,f){d?d[0].appendChild(this.placeholder[0]):g.item[0].parentNode.insertBefore(this.placeholder[0],(this.direction=="down"?g.item[0]:g.item[0].nextSibling));this.counter=this.counter?++this.counter:1;var e=this,c=this.counter;window.setTimeout(function(){if(c==e.counter){e.refreshPositions(!f)}},0)},_clear:function(e,f){this.reverting=false;var g=[],c=this;if(!this._noFinalSort&&this.currentItem.parent().length){this.placeholder.before(this.currentItem)}this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var d in this._storedCSS){if(this._storedCSS[d]=="auto"||this._storedCSS[d]=="static"){this._storedCSS[d]=""}}this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else{this.currentItem.show()}this.helper.css("zIndex",1000);if(this.cancelHelperRemoval){if(!f){for(var d=0;d<g.length;d++){g[d].call(this,e)}this._trigger("stop",e,this._uiHash())}return false}this.placeholder[0].parentNode.removeChild(this.placeholder[0]);if(this.helper[0]!=this.currentItem[0]){this.helper.remove()}this.helper=null;if(!f){for(var d=0;d<g.length;d++){g[d].call(this,e)}this._trigger("stop",e,this._uiHash())}this.fromOutside=false;return true},_trigger:function(){a.OMWidget.prototype._trigger.apply(this,arguments)},_uiHash:function(d){var c=d||this;return{helper:c.helper,placeholder:c.placeholder||a([]),position:c.position,originalPosition:c.originalPosition,offset:c.positionAbs,item:c.currentItem,sender:d?d.element:null}}});a.extend(a.om.sortable,{version:"1.1"})})(jQuery);(function(d){var b=["collapse","min","max","close"],a=["om-panel-tool-collapse","om-panel-tool-expand","om-panel-tool-min","om-panel-tool-max","om-panel-tool-close"],c={anim:true,speed:"fast"};d.omWidget("om.omPanel",{options:{title:"",width:"auto",height:"auto",header:true,collapsible:false,closable:false,closed:false,collapsed:false,tools:[],loadingMessage:"default",_closeMode:"hidden",_helpMsg:false},_create:function(){this.element.addClass("om-panel-body om-widget-content").wrap("<div class='om-widget om-panel'></div>")},_init:function(){var g=this.options,h=this.element,i=h.parent(),f;this._renderHeader();f=h.prev();if(g.header===false){h.addClass("om-panel-noheader")}this._bindEvent();this._resize(i);var e=g.header!==false?f.outerHeight():0;if(g.collapsed!==false){"auto"!==g.height&&i.height(e);h.hide();if(g.header!==false){f.find(">.om-panel-tool >.om-panel-tool-collapse").removeClass("om-panel-tool-collapse").addClass("om-panel-tool-expand")}}else{h.show();"auto"!==g.height&&i.height(e+h.outerHeight());if(g.header!==false){f.find(">.om-panel-tool >.om-panel-tool-expand").removeClass("om-panel-tool-expand").addClass("om-panel-tool-collapse")}}g.closed!==false?this._hide(i):this._show(i);this.reload()},_hide:function(e){if("hidden"===this.options._closeMode){e.hide()}else{if("visibility"===this.options._closeMode){e.addClass("om-helper-hidden-accessible")}}},_show:function(e){if("hidden"===this.options._closeMode){e.show()}else{if("visibility"===this.options._closeMode){e.removeClass("om-helper-hidden-accessible")}}},_bindEvent:function(){var e=this,g=this.element,f=this.options,h=g.prev();if(f.collapsible!==false){h.click(function(i){if(d(i.target).is(".om-panel-icon,.om-panel-title,.om-panel-header")){f.collapsed!==false?e.expand():e.collapse()}}).find(".om-panel-tool-collapse , .om-panel-tool-expand").click(function(){f.collapsed!==false?e.expand():e.collapse()})}if(f.closable!==false){h.find(".om-panel-tool-close").click(function(i){e.close()})}},_renderHeader:function(){this.header&&this.header.remove();if(this.options.header===false){return}var h=this,n=this.options,g=n.tools,e=this.header=d("<div class='om-panel-header'></div>").insertBefore(this.element);if(n._helpMsg){e.parent().addClass("helpMsg")}if(n.iconCls){d("<div class='om-icon om-panel-icon'></div>").addClass(n.iconCls).appendTo(e)}d("<div class='om-panel-title'></div>").html(n.title).appendTo(e);$tool=d("<div class='om-panel-tool'></div>");if(n.collapsible!==false){d("<div class='om-icon om-panel-tool-collapse'></div>").appendTo($tool)}if(d.isArray(g)){for(var f=0,k=g.length;f<k;f++){var j=g[f],m;if(m=this._getInnerToolCls(j.id)){d("<div class='om-icon'></div>").addClass(m).click(function(i){j.handler.call(this,h,i)}).appendTo($tool)}else{if(typeof j.iconCls==="string"){d("<div class='om-icon'></div>").addClass(j.iconCls).click(function(i){j.handler.call(this,h,i)}).appendTo($tool)}else{if(d.isArray(j.iconCls)){(function(i){d("<div class='om-icon'></div>").addClass(i.iconCls[0]).click(function(o){i.handler.call(this,h,o)}).hover(function(){if(i.iconCls[1]){d(this).toggleClass(i.iconCls[1])}}).appendTo($tool)})(j)}}}}}else{try{d(g).appendTo($tool)}catch(l){throw"bad format of jquery selector."}}if(n.closable!==false){d("<div class='om-icon om-panel-tool-close'></div>").appendTo($tool)}$tool.find(">div.om-icon").hover(function(){var i=this;d.each(a,function(){if(d(i).hasClass(this)){d(i).toggleClass(this+"-hover")}})});$tool.appendTo(e)},_resize:function(i){var h=this.element,e=h.prev(),i=h.parent(),f=this.options;if(f.width=="fit"){f.width="100%";i.width("100%");e.css("width","");h.css("width","")}else{if(f.width!=="auto"){i.width(f.width);e.outerWidth(i.width());h.outerWidth(i.width())}else{var g=h.attr("style");if(g&&g.indexOf("width")!==-1){i.width(h.outerWidth());e.outerWidth(h.outerWidth())}else{i.css("width","");e.css("width","");h.css("width","")}}}if(f.height=="fit"){f.height="100%";i.height("100%");h.outerHeight(i.height()-(this.options.header!==false?e.outerHeight():0))}else{if(f.height!=="auto"){i.height(f.height);h.outerHeight(i.height()-(this.options.header!==false?e.outerHeight():0))}else{var g=h.attr("style");if(g&&g.indexOf("height")!==-1){i.height(e.outerHeight()+h.outerHeight())}else{i.css("height","");h.css("height","")}}}},_getInnerToolCls:function(e){return d.inArray(e,b)!=-1?"om-panel-tool-"+e:null},_showLoadingMessage:function(){var f=this.options,g=this.element,h=g.next(".om-panel-loadingMessage"),e={width:g.innerWidth(),height:g.innerHeight(),left:g.position().left+parseInt(g.css("border-left-width")),top:g.position().top};if(h.length===0){if("default"===f.loadingMessage){d("<div class='om-panel-loadingMessage'><div class='valignMiddle'><div class='loadingImg'>数据加载中</div></div></div>").css(e).appendTo(g.parent())}else{d("<div class='om-panel-loadingMessage'></div>").appendTo(g.parent()).html(f.loadingMessage).css(e)}}else{h.css(e).show()}},_hideLoadingMessage:function(){this.element.parent().find(".om-panel-loadingMessage").hide()},setTitle:function(e){this.element.prev().find(">.om-panel-title").html(e)},setIconClass:function(g){var f=this.element.prev();var e=f.find(">.om-panel-icon");if(g==null&&e.length!==0){e.remove()}else{if(e.length==0){e=d("<div class='om-icon om-panel-icon'></div>").insertBefore(f.find(">.om-panel-title"))}if(this.options.iconCls){e.removeClass(this.options.iconCls)}e.addClass(g);this.options.iconCls=g}},open:function(){var f=this.element,e=this.options;if(e.closed){if(e.onBeforeOpen&&this._trigger("onBeforeOpen")===false){return}this._show(f.parent());e.closed=false;e.onOpen&&this._trigger("onOpen")}},close:function(){var f=this.element,e=this.options;if(!e.closed){if(e.onBeforeClose&&this._trigger("onBeforeClose")===false){return}this._hide(f.parent());e.closed=true;e.onClose&&this._trigger("onClose")}},reload:function(g){var f=this.options,h=this.element,e=this;if(h.data("loading")){return}else{h.data("loading",true)}g=g||f.url;if(!g){h.data("loading",false);return}f.url=g;this._showLoadingMessage();d.ajax(g,{cache:false,success:function(j,k,i){h.html(f.preProcess?f.preProcess.call(h[0],j,k):j);h.data("loading",false);e._hideLoadingMessage();f.onSuccess&&e._trigger("onSuccess",null,j,k,i)},error:function(i,k,j){h.data("loading",false);e._hideLoadingMessage();f.onError&&e._trigger("onError",null,i,k,j)}})},resize:function(f){var g=this.options,h,e;if(d.isPlainObject(f)){h=f.width||null;e=f.height||null}else{h=arguments[0];e=arguments[1]}g.width=h||g.width;g.height=e||g.height;this._resize(this.element.parent())},collapse:function(){var l=this,i=this.element,e=i.prev(),h=i.parent(),k=i.next(".om-panel-loadingMessage"),m=this.options,g=c.anim,f=c.speed;if(arguments[0]!=undefined){g=arguments[0]}f=arguments[1]||f;if(m.onBeforeCollapse&&l._trigger("onBeforeCollapse")===false){return}h.stop(true,true);if(e.length!==0){var j=e.find("> .om-panel-tool > div.om-panel-tool-collapse");if(j.length!==0){j.removeClass("om-panel-tool-collapse").addClass("om-panel-tool-expand");if(j.hasClass("om-panel-tool-collapse-hover")){j.toggleClass("om-panel-tool-collapse-hover om-panel-tool-expand-hover")}}}h.animate({height:"-="+i.outerHeight()},g?(f||"normal"):0,function(){i.hide();k.hide();"auto"===m.height&&h.css("height","");m.onCollapse&&l._trigger("onCollapse")});m.collapsed=true},expand:function(){var l=this,i=this.element,e=i.prev(),h=i.parent(),k=i.next(".om-panel-loadingMessage"),m=this.options,g=c.anim,f=c.speed;if(arguments[0]!=undefined){g=arguments[0]}f=arguments[1]||f;if(m.onBeforeExpand&&l._trigger("onBeforeExpand")===false){return}h.stop(true,true);if(e.length!==0){var j=e.find("> .om-panel-tool > div.om-panel-tool-expand");if(j.length!==0){j.removeClass("om-panel-tool-expand").addClass("om-panel-tool-collapse");if(j.hasClass("om-panel-tool-expand-hover")){j.toggleClass("om-panel-tool-expand-hover om-panel-tool-collapse-hover")}}}"auto"===m.height&&h.height(e.outerHeight());i.show();if(i.data("loading")){k.show()}h.animate({height:"+="+i.outerHeight()},g?(f||"normal"):0,function(){"auto"===m.height&&h.css("height","");m.onExpand&&l._trigger("onExpand")});m.collapsed=false},destroy:function(){var e=this.element;e.parent().after(e).remove()}})})(jQuery);(function(b,c){var a="om-accordion-panel-"+(((1+Math.random())*65536)|0).toString(16).substring(1)+"-",d=0;b.omWidget("om.omAccordion",{options:{active:0,autoPlay:false,collapsible:false,disabled:false,height:"auto",header:"> ul:first li",iconCls:null,interval:1000,switchEffect:false,switchMode:"click",width:"auto",onActivate:function(e,f){},onBeforeActivate:function(e,f){},onBeforeCollapse:function(e,f){},onCollapse:function(e,f){}},activate:function(f){var e=this.options;clearInterval(e.autoInterId);this._activate(f);this._setAutoInterId(this)},disable:function(){var g=this.element,f=this.options,e;if(f.autoPlay){clearInterval(f.autoInterId)}f.disabled=true;if((e=g.find(">.om-accordion-disable")).length===0){b("<div class='om-accordion-disable'></div>").css({position:"absolute",top:0,left:0}).width(g.outerWidth()).height(g.outerHeight()).appendTo(g)}e.show()},enable:function(){this.options.disabled=false;this.element.find(">.om-accordion-disable").hide()},getActivated:function(){var f=b.data(this.element,"panels");for(var g=0,e=f.length;g<e;g++){if(!f[g].omPanel("option","collapsed")){return f[g].prop("id")}}return null},getLength:function(){return b.data(this.element,"panels").length},reload:function(f){var e=b.data(this.element,"panels");if(this.options.disabled!==false||e.length===0){return this}f=this._correctIndex(f);e[f].omPanel("reload")},resize:function(){var h=this.element,g=this.options,f=b.data(this.element,"panels"),e=0;this._initWidthOrHeight("width");this._initWidthOrHeight("height");b.each(f,function(j,i){e+=i.prev().outerHeight()});b.each(f,function(j,i){if(g.height==="auto"){i.css("height","")}else{i.outerHeight(h.height()-e)}})},setTitle:function(f,g){var e=b.data(this.element,"panels");if(this.options.disabled!==false||e.length===0){return this}f=this._correctIndex(f);e[f].omPanel("setTitle",g)},url:function(g,f){var e=b.data(this.element,"panels");if(!f||this.options.disabled!==false||e.length===0){return}g=this._correctIndex(g);e[g].omPanel("option","url",f)},_create:function(){var f=this.element,e=this.options;f.addClass("om-widget om-accordion").css("position","relative");this._renderPanels();e.active=this._correctIndex(e.active);this.resize();this._buildEvent();if(e.disabled!==false){this.disable()}},_correctIndex:function(h){var j=this.element,g=b.data(this.element,"panels"),f=j.children().find(">div#"+h),e=g.length,k=h;h=f.length?j.find(">.om-panel").index(f.parent()):h;h=h==-1?k:h;var i=parseInt(h);i=(isNaN(i)&&"0"||i)-0;return e==0||(i===-1&&this.options.collapsible!==false)?-1:(i<0?0:(i>=e?e-1:i))},_panelCreateCollapse:function(e,i){var k=this.element,h=this.options,f,g;if(h.active===-1&&h.collapsible===true){return true}else{f=k.find(">div#"+h.active);g=k.children().index(f);g=(g==-1?h.active:g);var j=parseInt(g);j=(isNaN(j)&&"0"||j)-0;j=j<0?0:(j>=e?e-1:j);return j!==i}},_renderPanels:function(){var k=this.element,f=this,h=[],g=this.options,i=k.find(g.header),e=[],j;i.find("a").each(function(s){var l=this.getAttribute("href",2);var p=l.split("#")[0],r;if(p&&(p===location.toString().split("#")[0]||(r=b("base")[0])&&p===r.href)){l=this.hash;this.href=l}var o=b(this);e[s]={title:o.text(),iconCls:o.attr("iconCls"),onExpand:function(n){f._trigger("onActivate",n,s)},tools:[{id:"collapse",handler:function(n,t){clearInterval(g.autoInterId);f._activate(s,true);f._setAutoInterId(f);t.stopPropagation()}}],onCollapse:function(n){f._trigger("onCollapse",n,s)},onSuccess:function(){f.resize()},onError:function(){f.resize()}};var q=b(">"+l,k);var m=q.prop("id");if(!!(q[0])){if(!m){q.prop("id",m=a+(d++))}q.appendTo(k)}else{e[s].url=o.attr("href");b("<div></div>").prop("id",m=(o.prop("id")||a+(d++))).appendTo(k)}j=j||m});j&&k.find("#"+j).prevAll().remove();i.remove();b.each(e,function(m,l){l.collapsed=f._panelCreateCollapse(e.length,m)});b.each(k.children(),function(n,m){h.push(f._createPanel(m,e[n]));if(n===0){var l=h[0].prev();l.css("border-top-width",l.css("border-bottom-width"))}});b.data(k,"panels",h)},_initWidthOrHeight:function(f){var i=this.element,e=this.options,g=this.element.attr("style"),h=e[f];if(h=="fit"){i.css(f,"100%")}else{if(h!=="auto"){i.css(f,h)}else{if(g&&g.indexOf(f)!=-1){e[f]=i.css(f)}else{i.css(f,"")}}}},_createPanel:function(f,e){return b(f).omPanel(e)},_buildEvent:function(){var f=this.options,e=this;this.element.children().find(">div.om-panel-header").each(function(h){var g=b(this);g.unbind();if(f.switchMode=="mouseover"){g.bind("mouseenter.omaccordions",function(i){clearInterval(f.autoInterId);var j=b.data(e.element,"expandTimer");(typeof j!=="undefined")&&clearTimeout(j);j=setTimeout(function(){e._activate(h,true);e._setAutoInterId(e)},200);b.data(e.element,"expandTimer",j)})}else{if(f.switchMode=="click"){g.bind("click.omaccordions",function(i){clearInterval(f.autoInterId);e._activate(h,true);e._setAutoInterId(e)})}}g.hover(function(){b(this).toggleClass("om-panel-header-hover")})});if(f.autoPlay){clearInterval(f.autoInterId);e._setAutoInterId(e)}},_setAutoInterId:function(e){var f=e.options;if(f.autoPlay){f.autoInterId=setInterval(function(){e._activate("next")},f.interval)}},_setOption:function(f,g){b.OMWidget.prototype._setOption.apply(this,arguments);var e=this.options;switch(f){case"active":this.activate(g);break;case"disabled":g===false?this.enable():this.disable();break;case"width":e.width=g;this._initWidthOrHeight("width");break;case"height":e.height=g;this._initWidthOrHeight("height");break}},_activate:function(l,n){var o=b.data(this.element,"panels"),m=o.length,q=this.options,p=this,j=false,k=-1,g=false,e;if(q.disabled!==false&&m===0){return}l=l==="next"?(q.active+1)%m:p._correctIndex(l);if(q.switchEffect){g=true;e="fast"}for(var h=0;h<m;h++){b(o[h]).stop(true,true)}var f=p.getActivated();j=!!f;if(j){k=p._correctIndex(f);if(k==l){if(n===true&&q.collapsible!==false&&p._trigger("onBeforeCollapse",null,k)!==false){b(o[k]).omPanel("collapse",g,e);q.active=-1}else{q.active=k}}else{if(l===-1){if(p._trigger("onBeforeCollapse",null,k)!==false){b(o[k]).omPanel("collapse",g,e);q.active=-1}else{q.active=k}}else{if(p._trigger("onBeforeCollapse",null,k)!==false&&(canAct=p._trigger("onBeforeActivate",null,l)!==false)){b(o[k]).omPanel("collapse",g,e);b(o[l]).omPanel("expand",g,e);q.active=l}else{q.active=k}}}}else{if(l==="-1"){q.active=-1}else{if(p._trigger("onBeforeActivate",null,l)!==false){b(o[l]).omPanel("expand",g,e);q.active=l}}}}})})(jQuery);(function(b){b.fn.omAjaxSubmit=function(d){if(!this.length){a("omAjaxSubmit: skipping submit process - no element selected");return this}var c,p,f,g=this;if(typeof d=="function"){d={success:d}}c=this.attr("method");p=this.attr("action");f=(typeof p==="string")?b.trim(p):"";f=f||window.location.href||"";if(f){f=(f.match(/^([^#]+)/)||[])[1]}d=b.extend(true,{url:f,success:b.ajaxSettings.success,method:c||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},d);var j={};this.trigger("form-pre-serialize",[this,d,j]);if(j.veto){a("omAjaxSubmit: submit vetoed via form-pre-serialize trigger");return this}if(d.beforeSerialize&&d.beforeSerialize(this,d)===false){a("omAjaxSubmit: submit aborted via beforeSerialize callback");return this}var o,i,w=this.formToArray(d.semantic);if(d.data){d.extraData=d.data;for(o in d.data){if(d.data[o] instanceof Array){for(var r in d.data[o]){w.push({name:o,value:d.data[o][r]})}}else{i=d.data[o];i=b.isFunction(i)?i():i;w.push({name:o,value:i})}}}if(d.beforeSubmit&&d.beforeSubmit(w,this,d)===false){a("omAjaxSubmit: submit aborted via beforeSubmit callback");return this}this.trigger("form-submit-validate",[w,this,d,j]);if(j.veto){a("omAjaxSubmit: submit vetoed via form-submit-validate trigger");return this}var m=b.param(w);if(d.method.toUpperCase()=="GET"){d.url+=(d.url.indexOf("?")>=0?"&":"?")+m;d.data=null}else{d.data=m}var x=[];if(d.resetForm){x.push(function(){g.resetForm()})}if(d.clearForm){x.push(function(){g.clearForm()})}if(!d.dataType&&d.target){var e=d.success||function(){};x.push(function(n){var k=d.replaceTarget?"replaceWith":"html";b(d.target)[k](n).each(e,arguments)})}else{if(d.success){x.push(d.success)}}d.success=function(y,n,z){var v=d.context||d;for(var q=0,k=x.length;q<k;q++){x[q].apply(v,[y,n,z||g,g])}};var t=b("input:file",this).length>0;var s="multipart/form-data";var l=(g.attr("enctype")==s||g.attr("encoding")==s);if(d.iframe!==false&&(t||d.iframe||l)){if(d.closeKeepAlive){b.get(d.closeKeepAlive,function(){h(w)})}else{h(w)}}else{if(b.browser.msie&&c=="get"){var u=g[0].getAttribute("method");if(typeof u==="string"){d.method=u}}d.type=d.method;b.ajax(d)}this.trigger("form-submit-notify",[this,d]);return this;function h(T){var y=g[0],v,P,J,R,M,A,E,C,D,N,Q,H;var B=!!b.fn.prop;if(T){for(P=0;P<T.length;P++){v=b(y[T[P].name]);v[B?"prop":"attr"]("disabled",false)}}if(b(":input[name=submit],:input[id=submit]",y).length){alert('Error: Form elements must not have name or id of "submit".');return}J=b.extend(true,{},b.ajaxSettings,d);J.context=J.context||J;M="jqFormIO"+(new Date().getTime());if(J.iframeTarget){A=b(J.iframeTarget);N=A.attr("name");if(N==null){A.attr("name",M)}else{M=N}}else{A=b('<iframe name="'+M+'" src="'+J.iframeSrc+'" />');A.css({position:"absolute",top:"-1000px",left:"-1000px"})}E=A[0];C={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(n){var W=(n==="timeout"?"timeout":"aborted");a("aborting upload... "+W);this.aborted=1;A.attr("src",J.iframeSrc);C.error=W;J.error&&J.error.call(J.context,C,W,n);R&&b.event.trigger("ajaxError",[C,J,W]);J.complete&&J.complete.call(J.context,C,W)}};R=J.global;if(R&&!b.active++){b.event.trigger("ajaxStart")}if(R){b.event.trigger("ajaxSend",[C,J])}if(J.beforeSend&&J.beforeSend.call(J.context,C,J)===false){if(J.global){b.active--}return}if(C.aborted){return}D=y.clk;if(D){N=D.name;if(N&&!D.disabled){J.extraData=J.extraData||{};J.extraData[N]=D.value;if(D.type=="image"){J.extraData[N+".x"]=y.clk_x;J.extraData[N+".y"]=y.clk_y}}}var I=1;var F=2;function G(W){var n=W.contentWindow?W.contentWindow.document:W.contentDocument?W.contentDocument:W.document;return n}function O(){var Y=g.attr("target"),W=g.attr("action");y.setAttribute("target",M);if(!c){y.setAttribute("method","POST")}if(W!=J.url){y.setAttribute("action",J.url)}if(!J.skipEncodingOverride&&(!c||/post/i.test(c))){g.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"})}if(J.timeout){H=setTimeout(function(){Q=true;L(I)},J.timeout)}function Z(){try{var n=G(E).readyState;a("state = "+n);if(n.toLowerCase()=="uninitialized"){setTimeout(Z,50)}}catch(ab){a("Server abort: ",ab," (",ab.name,")");L(F);H&&clearTimeout(H);H=undefined}}var X=[];try{if(J.extraData){for(var aa in J.extraData){X.push(b('<input type="hidden" name="'+aa+'" />').attr("value",J.extraData[aa]).appendTo(y)[0])}}if(!J.iframeTarget){A.appendTo("body");E.attachEvent?E.attachEvent("onload",L):E.addEventListener("load",L,false)}setTimeout(Z,15);y.submit()}finally{y.setAttribute("action",W);if(Y){y.setAttribute("target",Y)}else{g.removeAttr("target")}b(X).remove()}}if(J.forceSync){O()}else{setTimeout(O,10)}var U,V,S=50,z;function L(aa){if(C.aborted||z){return}try{V=G(E)}catch(ad){a("cannot access response document: ",ad);aa=F}if(aa===I&&C){C.abort("timeout");return}else{if(aa==F&&C){C.abort("server abort");return}}if(!V||V.location.href==J.iframeSrc){if(!Q){return}}E.detachEvent?E.detachEvent("onload",L):E.removeEventListener("load",L,false);var Y="success",ac;try{if(Q){throw"timeout"}var X=J.dataType=="xml"||V.XMLDocument||b.isXMLDoc(V);a("isXml="+X);if(!X&&window.opera&&(V.body==null||V.body.innerHTML=="")){if(--S){a("requeing onLoad callback, DOM not available");setTimeout(L,250);return}}var ae=V.body?V.body:V.documentElement;C.responseText=ae?ae.innerHTML:null;C.responseXML=V.XMLDocument?V.XMLDocument:V;if(X){J.dataType="xml"}C.getResponseHeader=function(ah){var ag={"content-type":J.dataType};return ag[ah]};if(ae){C.status=Number(ae.getAttribute("status"))||C.status;C.statusText=ae.getAttribute("statusText")||C.statusText}var n=J.dataType||"";var ab=/(json|script|text)/.test(n.toLowerCase());if(ab||J.textarea){var Z=V.getElementsByTagName("textarea")[0];if(Z){C.responseText=Z.value;C.status=Number(Z.getAttribute("status"))||C.status;C.statusText=Z.getAttribute("statusText")||C.statusText}else{if(ab){var W=V.getElementsByTagName("pre")[0];var af=V.getElementsByTagName("body")[0];if(W){C.responseText=W.textContent?W.textContent:W.innerHTML}else{if(af){C.responseText=af.innerHTML}}}}}else{if(J.dataType=="xml"&&!C.responseXML&&C.responseText!=null){C.responseXML=K(C.responseText)}}try{U=k(C,J.dataType,J)}catch(aa){Y="parsererror";C.error=ac=(aa||Y)}}catch(aa){a("error caught: ",aa);Y="error";C.error=ac=(aa||Y)}if(C.aborted){a("upload aborted");Y=null}if(C.status){Y=(C.status>=200&&C.status<300||C.status===304)?"success":"error"}if(Y==="success"){J.success&&J.success.call(J.context,U,"success",C);R&&b.event.trigger("ajaxSuccess",[C,J])}else{if(Y){if(ac==undefined){ac=C.statusText}J.error&&J.error.call(J.context,C,Y,ac);R&&b.event.trigger("ajaxError",[C,J,ac])}}R&&b.event.trigger("ajaxComplete",[C,J]);if(R&&!--b.active){b.event.trigger("ajaxStop")}J.complete&&J.complete.call(J.context,C,Y);z=true;if(J.timeout){clearTimeout(H)}setTimeout(function(){if(!J.iframeTarget){A.remove()}C.responseXML=null},100)}var K=b.parseXML||function(n,W){if(window.ActiveXObject){W=new ActiveXObject("Microsoft.XMLDOM");W.async="false";W.loadXML(n)}else{W=(new DOMParser()).parseFromString(n,"text/xml")}return(W&&W.documentElement&&W.documentElement.nodeName!="parsererror")?W:null};var q=b.parseJSON||function(n){return window["eval"]("("+n+")")};var k=function(aa,Y,X){var W=aa.getResponseHeader("content-type")||"",n=Y==="xml"||!Y&&W.indexOf("xml")>=0,Z=n?aa.responseXML:aa.responseText;if(n&&Z.documentElement.nodeName==="parsererror"){b.error&&b.error("parsererror")}if(X&&X.dataFilter){Z=X.dataFilter(Z,Y)}if(typeof Z==="string"){if(Y==="json"||!Y&&W.indexOf("json")>=0){Z=q(Z)}else{if(Y==="script"||!Y&&W.indexOf("javascript")>=0){b.globalEval(Z)}}}return Z}}};b.fn.ajaxForm=function(c){if(this.length===0){var d={s:this.selector,c:this.context};if(!b.isReady&&d.s){a("DOM not ready, queuing ajaxForm");b(function(){b(d.s,d.c).ajaxForm(c)});return this}a("terminating; zero elements found by selector"+(b.isReady?"":" (DOM not ready)"));return this}return this.ajaxFormUnbind().bind("submit.form-plugin",function(f){if(!f.isDefaultPrevented()){f.preventDefault();b(this).omAjaxSubmit(c)}}).bind("click.form-plugin",function(j){var i=j.target;var g=b(i);if(!(g.is(":submit,input:image"))){var f=g.closest(":submit");if(f.length==0){return}i=f[0]}var h=this;h.clk=i;if(i.type=="image"){if(j.offsetX!=undefined){h.clk_x=j.offsetX;h.clk_y=j.offsetY}else{if(typeof b.fn.offset=="function"){var k=g.offset();h.clk_x=j.pageX-k.left;h.clk_y=j.pageY-k.top}else{h.clk_x=j.pageX-i.offsetLeft;h.clk_y=j.pageY-i.offsetTop}}}setTimeout(function(){h.clk=h.clk_x=h.clk_y=null},100)})};b.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};b.fn.formToArray=function(q){var p=[];if(this.length===0){return p}var d=this[0];var g=q?d.getElementsByTagName("*"):d.elements;if(!g){return p}var k,h,f,r,e,m,c;for(k=0,m=g.length;k<m;k++){e=g[k];f=e.name;if(!f){continue}if(q&&d.clk&&e.type=="image"){if(!e.disabled&&d.clk==e){p.push({name:f,value:b(e).val()});p.push({name:f+".x",value:d.clk_x},{name:f+".y",value:d.clk_y})}continue}r=b.fieldValue(e,true);if(r&&r.constructor==Array){for(h=0,c=r.length;h<c;h++){p.push({name:f,value:r[h]})}}else{if(r!==null&&typeof r!="undefined"){p.push({name:f,value:r})}}}if(!q&&d.clk){var l=b(d.clk),o=l[0];f=o.name;if(f&&!o.disabled&&o.type=="image"){p.push({name:f,value:l.val()});p.push({name:f+".x",value:d.clk_x},{name:f+".y",value:d.clk_y})}}return p};b.fn.formSerialize=function(c){return b.param(this.formToArray(c))};b.fn.fieldSerialize=function(d){var c=[];this.each(function(){var h=this.name;if(!h){return}var f=b.fieldValue(this,d);if(f&&f.constructor==Array){for(var g=0,e=f.length;g<e;g++){c.push({name:h,value:f[g]})}}else{if(f!==null&&typeof f!="undefined"){c.push({name:this.name,value:f})}}});return b.param(c)};b.fn.fieldValue=function(h){for(var g=[],e=0,c=this.length;e<c;e++){var f=this[e];var d=b.fieldValue(f,h);if(d===null||typeof d=="undefined"||(d.constructor==Array&&!d.length)){continue}d.constructor==Array?b.merge(g,d):g.push(d)}return g};b.fieldValue=function(c,j){var e=c.name,p=c.type,q=c.tagName.toLowerCase();if(j===undefined){j=true}if(j&&(!e||c.disabled||p=="reset"||p=="button"||(p=="checkbox"||p=="radio")&&!c.checked||(p=="submit"||p=="image")&&c.form&&c.form.clk!=c||q=="select"&&c.selectedIndex==-1)){return null}if(q=="select"){var k=c.selectedIndex;if(k<0){return null}var m=[],d=c.options;var g=(p=="select-one");var l=(g?k+1:d.length);for(var f=(g?k:0);f<l;f++){var h=d[f];if(h.selected){var o=h.value;if(!o){o=(h.attributes&&h.attributes.value&&!(h.attributes.value.specified))?h.text:h.value}if(g){return o}m.push(o)}}return m}return b(c).val()};b.fn.clearForm=function(){return this.each(function(){b("input,select,textarea",this).clearFields()})};b.fn.clearFields=b.fn.clearInputs=function(){var c=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var e=this.type,d=this.tagName.toLowerCase();if(c.test(e)||d=="textarea"){this.value=""}else{if(e=="checkbox"||e=="radio"){this.checked=false}else{if(d=="select"){this.selectedIndex=-1}}}})};b.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=="function"||(typeof this.reset=="object"&&!this.reset.nodeType)){this.reset()}})};b.fn.enable=function(c){if(c===undefined){c=true}return this.each(function(){this.disabled=!c})};b.fn.selected=function(c){if(c===undefined){c=true}return this.each(function(){var d=this.type;if(d=="checkbox"||d=="radio"){this.checked=c}else{if(this.tagName.toLowerCase()=="option"){var e=b(this).parent("select");if(c&&e[0]&&e[0].type=="select-one"){e.find("option").selected(false)}this.selected=c}}})};function a(){var c="[jquery.form] "+Array.prototype.join.call(arguments,"");if(window.console&&window.console.log){window.console.log(c)}else{if(window.opera&&window.opera.postError){window.opera.postError(c)}}}})(jQuery);(function(a){a.omWidget("om.omButton",{options:{disabled:null,label:null,icons:{left:null,right:null},width:null,onClick:null},_create:function(){this._determineButtonType();var e=a("<span>").addClass("om-btn om-state-default").css("border","none"),d=a("<span>").addClass("om-btn-bg om-btn-left"),c=a("<span>").addClass("om-btn-bg om-btn-center"),b=a("<span>").addClass("om-btn-bg om-btn-right");if(this.element.hasClass("apusic-btn-deepblue")){e.addClass("apusic-btn-deepblue")}this.element.addClass("om-btn-txt").css({"background-position":"left center","background-repeat":"no-repeat"}).wrap(e).before(d).after(b).wrap(c)},_init:function(){var c=this,d=this.options,e=this.element;if(typeof d.disabled!="boolean"){d.disabled=e.propAttr("disabled")}if(e.attr("disabled")=="disabled"||d.disabled=="disabled"){d.disabled=true}this._initButton();if(d.disabled){c._addClass("disabled");e.css("cursor","default")}var b=e.parent().parent();b.bind("mouseenter",function(f){if(d.disabled){return false}c._addClass("hover")}).bind("mouseleave",function(f){if(d.disabled){return false}c._removeClass("hover");c._removeClass("active")}).bind("click",function(f){if(d.disabled){f.preventDefault();f.stopImmediatePropagation();return false}else{if(c.options.onClick){c._trigger("onClick",f)}}}).bind("mousedown",function(f){if(d.disabled){return false}c._addClass("active");c._removeClass("focus");var g=d.onClick}).bind("mouseup",function(f){if(d.disabled){return false}c._addClass("focus");c._removeClass("active")}).bind("keydown",function(f){if(d.disabled){return false}if(f.keyCode==a.om.keyCode.SPACE||f.keyCode==a.om.keyCode.ENTER){c._addClass("active")}if(f.keyCode==a.om.keyCode.SPACE){var g=d.onClick;if(g&&c._trigger("onClick",f)===false){return}}}).bind("keyup",function(){c._removeClass("active")});e.bind("focus.button",function(f){if(d.disabled){return false}c._addClass("focus")}).bind("blur.button",function(f){if(d.disabled){return false}c._removeClass("focus")})},enable:function(){this._removeClass("disabled");this.options.disabled=false;this.element.css("cursor","pointer").removeAttr("disabled")},disable:function(){this._addClass("disabled");this.options.disabled=true;this.element.css("cursor","default");if(this.type=="input"||this.type=="button"){this.element.attr("disabled","disabled")}},click:function(){if(!this.options.disabled&&this.options.onClick){this._trigger("onClick")}},changeLabel:function(b){if(this.type=="a"){this.element.text(b)}else{if(this.type=="input"){this.element.val(b)}else{if(this.type=="button"){this.element.html(b)}}}},changeIcons:function(b){if(!this.options.disabled){if(b){b.left?this.element.css("backgroundImage","url( "+b.left+" )"):null;b.right?this.element.next().attr("src",b.right):null}}},destroy:function(){$el=this.element;$el.closest(".om-btn").after($el).remove()},_addClass:function(b){this.element.parent().parent().addClass("om-state-"+b)},_removeClass:function(b){this.element.parent().parent().removeClass("om-state-"+b)},_initButton:function(){var c=this.options,b=this._getLabel(),d=this.element;d.removeClass("om-btn-icon om-btn-only-icon").next("img").remove();if(c.width>10){d.parent().css("width",parseInt(c.width)-10)}if(this.type=="a"||this.type=="button"){d.html(b)}else{d.val(b)}if(c.icons.left){if(b){d.addClass("om-btn-icon").css("background-image","url("+c.icons.left+")")}else{d.addClass("om-btn-only-icon").css("background-image","url("+c.icons.left+")")}}if(c.icons.right){if(b!=""){a("<img>").attr("src",c.icons.right).css({"vertical-align":"baseline","padding-left":"3px"}).insertAfter(d)}else{a("<img>").attr("src",c.icons.right).css("vertical-align","baseline").insertAfter(d)}}},_getLabel:function(){return this.options.label||this.element.html()||this.element.text()||this.element.val()},_determineButtonType:function(){if(this.element.is("input")){this.type="input"}else{if(this.element.is("a")){this.type="a"}else{if(this.element.is("button")){this.type="button"}}}}})})(jQuery);(function(a){a.omWidget("om.omCalendar",{options:{date:new Date(),startDay:0,pages:1,minDate:false,maxDate:false,popup:true,showTime:false,onSelect:function(b,c){},disabledDays:[],disabledFn:function(b){},disabled:false,readOnly:false,editable:true,dateFormat:false},disable:function(){if(this.options.popup){this.hide();this.options.disabled=true;this.element.attr("disabled",true).unbind(".omCalendar").next().addClass("om-state-disabled").unbind()}},enable:function(){if(this.options.popup){this.options.disabled=false;this.element.attr("disabled",false).next().removeClass("om-state-disabled");this._buildStatusEvent()}},getDate:function(){return this.options.date},setDate:function(b){this.options.date=b;this._render({date:b})},_create:function(){var c=this.element,b=this.options;this.cid=this._stamp(c);if(b.popup){c.wrap("<span></span>").after('<span class="om-calendar-trigger"></span>').parent().addClass("om-calendar om-widget om-state-default");this.con=a("<div></div>").appendTo(document.body).css({top:"0px",position:"absolute",background:"white",visibility:"hidden","z-index":"2000"});this._buildBodyEvent();this._buildStatusEvent()}else{this.con=this.element}this.con.addClass("om-calendar-list-wrapper om-widget om-clearfix om-widget-content")},_init:function(){var c=this.element,b=this.options;this.con.addClass("multi-"+b.pages);this._buildParam();if(b.popup){c.val()&&(b.date=a.omCalendar.parseDate(c.val(),b.dateFormat||this._defaultFormat)||new Date())}this._render();if(b.readOnly||!b.editable){c.attr("readonly","readOnly").unbind()}else{c.removeAttr("readonly")}b.disabled?this.disable():this.enable()},_render:function(d){var g=0,b,e,h,k=this.element,c=this.options;this.ca=[];this._parseParam(d);this.con.html("");for(g=0,h=[this.year,this.month];g<c.pages;g++){if(g===0){b=true}else{b=false;h=this._computeNextMonth(h)}e=g==(c.pages-1);this.ca.push(new a.om.omCalendar.Page({year:h[0],month:h[1],prevArrow:b,nextArrow:e,showTime:self.showTime},this));this.ca[g]._render()}if(c.pages>1){var f=k.find(".om-cal-box");var j=[];a.each(f,function(l,m){j.push(a(m).css("height"))});j.sort();f.css("height",j[j.length-1])}},_stamp:function(b){if(b.attr("id")===undefined||b.attr("id")===""){b.attr("id","K_"+new Date().getTime())}return b.attr("id")},_buildStatusEvent:function(){var b=this;this.element.unbind(".omCalendar").bind("click.omCalendar",function(c){b.toggle()}).bind("focus.omCalendar",function(){a(this).parent().addClass("om-state-hover om-state-active")}).bind("blur.omCalendar",function(){a(this).parent().removeClass("om-state-hover om-state-active")}).next().unbind().click(function(){b.element.trigger("focus");b.show()}).mouseover(function(){a(this).parent().addClass("om-state-hover")}).mouseout(function(){!b.isVisible()&&a(this).parent().removeClass("om-state-hover")})},_buildBodyEvent:function(){var b=this;a(document).bind("mousedown.omCalendar",this.globalEvent=function(c){b.hide()});b.con.mousedown(function(c){c.stopPropagation()})},toggle:function(){if(!this.isVisible()){this.show()}else{this.hide()}},isVisible:function(){if(this.con.css("visibility")=="hidden"){return false}return true},show:function(){var e=this.element.parent();this.con.css("visibility","");var d=e.offset().left,b=e.offsetHeight||e.outerHeight(),c=e.offset().top+b;this.con.css("left",d.toString()+"px");this.con.css("top",c.toString()+"px")},hide:function(){this.con.css("visibility","hidden")},destroy:function(){var b=this.element;a("body").unbind(".omCalendar",this.globalEvent);if(this.options.popup){b.parent().after(b).remove();this.con.remove()}},_buildParam:function(){var b=this.options;b.startDay&&(b.startDay=(7-b.startDay)%7);!b.dateFormat&&(this._defaultFormat=b.showTime?"yy-mm-dd H:i:s":"yy-mm-dd");this.EV=[];return this},_parseParam:function(b){b&&a.extend(this.options,b);this._handleDate()},_templetShow:function(c,h){var e,j,d,b,g,f;if(h instanceof Array){e="";for(d=0;d<h.length;d++){e+=arguments.callee(c,h[d])}c=e}else{j=c.match(/{\$(.*?)}/g);if(h!==undefined&&j!==null){for(d=0,b=j.length;d<b;d++){f=j[d].replace(/({\$)|}/g,"");g=(h[f]!==undefined)?h[f]:"";c=c.replace(j[d],g)}}}return c},_handleDate:function(){var b=this.options.date;this.day=b.getDate();this.month=b.getMonth();this.year=b.getFullYear()},_getHeadStr:function(b,c){return b.toString()+a.om.lang.omCalendar.year+(Number(c)+1).toString()+a.om.lang.omCalendar.month},_monthAdd:function(){var b=this;if(b.month==11){b.year++;b.month=0}else{b.month++}b.options.date.setFullYear(b.year,b.month,1);return this},_monthMinus:function(){var b=this;if(b.month===0){b.year--;b.month=11}else{b.month--}b.options.date.setFullYear(b.year,b.month,1);return this},_computeNextMonth:function(b){var d=b[0],c=b[1];if(c==11){d++;c=0}else{c++}return[d,c]},_handleOffset:function(){var d=this,g=a.om.lang.omCalendar,f=[g.Su,g.Mo,g.Tu,g.We,g.Th,g.Fr,g.Sa],c="<span>{$day}</span>",j=this.options.startDay,h="",b=[];for(var e=0;e<7;e++){b[e]={day:f[(e-j+7)%7]}}h=d._templetShow(c,b);return{day_html:h}}});a.extend(a.om.omCalendar,{Page:function(c,b){var d=a.om.lang.omCalendar;this.father=b;this.month=Number(c.month);this.year=Number(c.year);this.prevArrow=c.prevArrow;this.nextArrow=c.nextArrow;this.node=null;this.timmer=null;this.id="";this.EV=[];this.html=['<div class="om-cal-box" id="{$id}">','<div class="om-cal-hd om-widget-header">','<a href="javascript:void(0);" class="om-prev {$prev}"><span class="om-icon om-icon-seek-prev">Prev</span></a>','<a href="javascript:void(0);" class="om-title">{$title}</a>','<a href="javascript:void(0);" class="om-next {$next}"><span class="om-icon om-icon-seek-next">Next</span></a>',"</div>",'<div class="om-cal-bd">','<div class="om-whd">',b._handleOffset().day_html,"</div>",'<div class="om-dbd om-clearfix">',"{$ds}","</div>","</div>",'<div class="om-setime om-state-default hidden">',"</div>",'<div class="om-cal-ft {$showtime}">','<div class="om-cal-time om-state-default">',"时间：00:00 &hearts;","</div>","</div>",'<div class="om-selectime om-state-default hidden">',"</div>","</div><!--#om-cal-box-->"].join("");this.nav_html=["<p>",d.month,'<select value="{$the_month}">','<option class="m1" value="1">01</option>','<option class="m2" value="2">02</option>','<option class="m3" value="3">03</option>','<option class="m4" value="4">04</option>','<option class="m5" value="5">05</option>','<option class="m6" value="6">06</option>','<option class="m7" value="7">07</option>','<option class="m8" value="8">08</option>','<option class="m9" value="9">09</option>','<option class="m10" value="10">10</option>','<option class="m11" value="11">11</option>','<option class="m12" value="12">12</option>',"</select>","</p>","<p>",d.year,'<input type="text" value="{$the_year}" onfocus="this.select()"/>',"</p>","<p>",'<button class="ok">',d.ok,'</button><button class="cancel">',d.cancel,"</button>","</p>"].join("");this.Verify=function(){var f=function(h){if(!/^\d+$/i.test(h)){return false}h=Number(h);return !(h<1||h>31)},e=function(h){if(!/^\d+$/i.test(h)){return false}h=Number(h);return !(h<100||h>10000)},g=function(h){if(!/^\d+$/i.test(h)){return false}h=Number(h);return !(h<1||h>12)};return{isDay:f,isYear:e,isMonth:g}};this._renderUI=function(){var h=this,e={},g,f=h.father.options;h.HTML="";e.prev="";e.next="";e.title="";e.ds="";if(!h.prevArrow){e.prev="hidden"}if(!h.nextArrow){e.next="hidden"}if(!h.father.showTime){e.showtime="hidden"}e.id=h.id="om-cal-"+Math.random().toString().replace(/.\./i,"");e.title=h.father._getHeadStr(h.year,h.month);h.createDS();e.ds=h.ds;h.father.con.append(h.father._templetShow(h.html,e));h.node=a("#"+h.id);if(f.showTime){g=h.node.find(".om-cal-ft");g.removeClass("hidden");h.timmer=new a.om.omCalendar.TimeSelector(g,h.father)}return this};this._buildEvent=function(){var h=this,f,e=a("#"+h.id),g=h.father.options;h.EV[0]=e.find("div.om-dbd").bind("mousedown",function(k){var m=a(k.target);if(m.filter(".om-null, .om-state-disabled").length>0){return}var j=Number(m.html());var l=new Date(g.date);l.setFullYear(h.year,h.month,j);h.father.dt_date=l;if(!g.showTime){h.father._trigger("onSelect",k,l)}if(g.popup&&!g.showTime){h.father.hide();if(!isNaN(h.father.dt_date)){var i=a.omCalendar.formatDate(h.father.dt_date,g.dateFormat||h.father._defaultFormat);a(h.father.element).val(i).focus().blur()}}h.father._render({date:l})}).find("a").bind("mouseover",function(i){a(this).addClass("om-state-hover om-state-nobd")}).bind("mouseout",function(i){a(this).removeClass("om-state-hover").not(".om-state-highlight, .om-state-active").removeClass("om-state-nobd")});h.EV[1]=e.find("a.om-prev").bind("click",function(i){h.father._monthMinus()._render();return false});h.EV[2]=e.find("a.om-next").bind("click",function(i){h.father._monthAdd()._render();return false});h.EV[3]=e.find("a.om-title").bind("click",function(j){try{h.timmer.hidePopup()}catch(k){}var l=a(j.target);var i=h.father._templetShow(h.nav_html,{the_month:h.month+1,the_year:h.year});e.find(".om-setime").html(i).removeClass("hidden").find("option:[value="+(h.month+1)+"]").attr("selected","selected");this.blur();e.find("input").bind("keydown",function(o){var p=a(o.target);if(o.keyCode==a.om.keyCode.UP){p.val(Number(p.val())+1);p[0].select()}if(o.keyCode==a.om.keyCode.DOWN){p.val(Number(p.val())-1);p[0].select()}if(o.keyCode==a.om.keyCode.ENTER){var n=e.find(".om-setime select").val();var m=e.find(".om-setime input").val();e.find(".om-setime").addClass("hidden");if(!h.Verify().isYear(m)){return}if(!h.Verify().isMonth(n)){return}h.father._render({date:h._computeDate(h,m,n)})}});return false}).bind("mouseover",function(i){a(this).addClass("om-state-hover")}).bind("mouseout",function(i){a(this).removeClass("om-state-hover")});h.EV[4]=e.find(".om-setime").bind("click",function(l){l.preventDefault();var m=a(l.target),k=a(this);if(m.hasClass("ok")){var j=k.find("select").val(),i=k.find("input").val();k.addClass("hidden");if(!h.Verify().isYear(i)){return}if(!h.Verify().isMonth(j)){return}j=j-k.parent().prevAll(".om-cal-box").length-1;h.father._render({date:h._computeDate(h,i,j)})}else{if(m.hasClass("cancel")){k.addClass("hidden")}}})};this._computeDate=function(h,f,g){var e=new Date(h.father.options.date.getTime());e.setFullYear(f,g);return e};this._getNode=function(){var e=this;return e.node};this._getNumOfDays=function(e,f){return 32-new Date(e,f-1,32).getDate()};this.createDS=function(){var g=this,m=g.father.options,o="",h=(new Date(g.year+"/"+(g.month+1)+"/01").getDay()+m.startDay+7)%7,j=g._getNumOfDays(g.year,g.month+1)+h,l,f;var e=[];for(l=0;l<m.disabledDays.length;l++){e[l]=m.disabledDays[l]%7}for(l=0;l<j;l++){var n=new Date(g.year+"/"+Number(g.month+1)+"/"+(l+1-h).toString());if(l<h){o+='<a href="javascript:void(0);" class="om-null" >0</a>'}else{if(a.inArray((l+m.startDay)%7,e)>=0){o+='<a href="javascript:void(0);" class="om-state-disabled">'+(l-h+1)+"</a>"}else{if(m.disabledFn(n)===false){o+='<a href="javascript:void(0);" class="om-state-disabled">'+(l-h+1)+"</a>"}else{if(m.minDate instanceof Date&&new Date(g.year+"/"+(g.month+1)+"/"+(l+1-h)).getTime()<(m.minDate.getTime()+1)){o+='<a href="javascript:void(0);" class="om-state-disabled">'+(l-h+1)+"</a>"}else{if(m.maxDate instanceof Date&&new Date(g.year+"/"+(g.month+1)+"/"+(l+1-h)).getTime()>m.maxDate.getTime()){o+='<a href="javascript:void(0);" class="om-state-disabled">'+(l-h+1)+"</a>"}else{if(l==(h+(new Date()).getDate()-1)&&(new Date()).getFullYear()==g.year&&(new Date()).getMonth()==g.month){o+='<a href="javascript:void(0);" class="om-state-highlight om-state-nobd">'+(l-h+1)+"</a>"}else{if(l==(h+m.date.getDate()-1)&&g.month==m.date.getMonth()&&g.year==m.date.getFullYear()){o+='<a href="javascript:void(0);" class="om-state-active om-state-nobd">'+(l-h+1)+"</a>"}else{o+='<a href="javascript:void(0);">'+(l-h+1)+"</a>"}}}}}}}}if(j%7!==0){for(l=0;l<(7-j%7);l++){o+='<a href="javascript:void(0);" class="om-null">0</a>'}}g.ds=o};this._render=function(){var e=this;e._renderUI();e._buildEvent()}}});a.extend(a.om.omCalendar,{TimeSelector:function(e,c){var b=c.options.date,d=a.om.lang.omCalendar;this.father=c;this.fcon=e.parent(".om-cal-box");this.popupannel=this.fcon.find(".om-selectime");if(typeof b=="undefined"){c.options.date=new Date()}this.time=c.options.date;this.status="s";this.ctime=a('<div class="om-cal-time om-state-default">'+d.time+'：<span class="h">h</span>:<span class="m">m</span>:<span class="s">s</span><!--{{arrow--><div class="cta"><button class="u om-icon om-icon-triangle-1-n"></button><button class="d om-icon om-icon-triangle-1-s"></button></div><!--arrow}}--></div>');this.button=a('<button class="ct-ok om-state-default">'+d.ok+"</button>");this.h_a=["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23"];this.m_a=["00","10","20","30","40","50"];this.s_a=["00","10","20","30","40","50"];this.parseSubHtml=function(f){var h="";for(var g=0;g<f.length;g++){h+='<a href="javascript:void(0);" class="om-cal-item">'+f[g]+"</a>"}h+='<a href="javascript:void(0);" class="x">x</a>';return h};this.showPopup=function(g){var h=this;this.popupannel.html(g);this.popupannel.removeClass("hidden");var f=h.status;var i="om-state-active om-state-nobd";h.ctime.find("span").removeClass(i);switch(f){case"h":h.ctime.find(".h").addClass(i);break;case"m":h.ctime.find(".m").addClass(i);break;case"s":h.ctime.find(".s").addClass(i);break}};this.hidePopup=function(){this.popupannel.addClass("hidden")};this._render=function(){var g=this;var j=g.get("h");var f=g.get("m");var i=g.get("s");g.father._time=g.time;g.ctime.find(".h").html(j);g.ctime.find(".m").html(f);g.ctime.find(".s").html(i);return g};this.set=function(f,h){var g=this;h=Number(h);switch(f){case"h":g.time.setHours(h);break;case"m":g.time.setMinutes(h);break;case"s":g.time.setSeconds(h);break}g._render()};this.get=function(f){var g=this;var h=g.time;switch(f){case"h":return h.getHours();case"m":return h.getMinutes();case"s":return h.getSeconds()}};this.add=function(){var h=this;var f=h.status;var g=h.get(f);g++;h.set(f,g)};this.minus=function(){var h=this;var f=h.status;var g=h.get(f);g--;h.set(f,g)};this._timeInit=function(){var f=this;e.html("").append(f.ctime);e.append(f.button);f._render();f.popupannel.bind("click",function(i){var h=a(i.target);if(h.hasClass("x")){f.hidePopup()}else{if(h.hasClass("om-cal-item")){var g=Number(h.html());f.set(f.status,g);f.hidePopup()}}});f.button.bind("click",function(h){var j=f.father.options;var i=typeof f.father.dt_date=="undefined"?j.date:f.father.dt_date;i.setHours(f.get("h"));i.setMinutes(f.get("m"));i.setSeconds(f.get("s"));f.father._trigger("onSelect",h,i);if(j.popup){var g=a.omCalendar.formatDate(i,j.dateFormat||f.father._defaultFormat);a(f.father.element).val(g);f.father.hide()}});f.ctime.bind("keyup",function(g){if(g.keyCode==a.om.keyCode.UP||g.keyCode==a.om.keyCode.LEFT){g.preventDefault();f.add()}if(g.keyCode==a.om.keyCode.DOWN||g.keyCode==a.om.keyCode.RIGHT){g.preventDefault();f.minus()}});f.ctime.find(".u").bind("click",function(){f.hidePopup();f.add()});f.ctime.find(".d").bind("click",function(){f.hidePopup();f.minus()});f.ctime.find(".h").bind("click",function(){var g=f.parseSubHtml(f.h_a);f.status="h";f.showPopup(g)});f.ctime.find(".m").bind("click",function(){var g=f.parseSubHtml(f.m_a);f.status="m";f.showPopup(g)});f.ctime.find(".s").bind("click",function(){var g=f.parseSubHtml(f.s_a);f.status="s";f.showPopup(g)})};this._timeInit()}});a.omCalendar=a.omCalendar||{};a.extend(a.omCalendar,{leftPad:function(e,c,d){var b=new String(e);if(!d){d=" "}while(b.length<c){b=d+b}return b.toString()}});a.extend(a.omCalendar,{getShortDayName:function(b){return a.omCalendar.dayMaps[b][0]},getDayName:function(b){return a.omCalendar.dayMaps[b][1]},getShortMonthName:function(b){return a.omCalendar.monthMaps[b][0]},getMonthName:function(b){return a.omCalendar.monthMaps[b][1]},dayMaps:[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],monthMaps:[["Jan","January"],["Feb","February"],["Mar","March"],["Apr","April"],["May","May"],["Jun","June"],["Jul","July"],["Aug","August"],["Sep","September"],["Oct","October"],["Nov","November"],["Dec","December"]],formatCodes:{d:{g:"this.getDate()",s:"this.setDate({param})",r:"(0[1-9]|[1-2][0-9]|3[0-1]|[1-9])"},dd:{g:"$.omCalendar.leftPad(this.getDate(), 2, '0')",s:"this.setDate(parseInt('{param}', 10))",r:"(0[1-9]|[1-2][0-9]|3[0-1]|[1-9])"},m:{g:"(this.getMonth() + 1)",s:"this.setMonth(parseInt('{param}', 10) - 1)",r:"(0[1-9]|1[0-2]|[1-9])"},mm:{g:"$.omCalendar.leftPad(this.getMonth() + 1, 2, '0')",s:"this.setMonth(parseInt('{param}', 10) - 1)",r:"(0[1-9]|1[0-2]|[1-9])"},y:{g:"('' + this.getFullYear()).substring(2, 4)",s:"this.setFullYear(parseInt('20{param}', 10))",r:"(\\d{2})"},yy:{g:"this.getFullYear()",s:"this.setFullYear(parseInt('{param}', 10))",r:"(\\d{4})"},h:{g:"$.omCalendar.leftPad((this.getHours() % 12) ? this.getHours() % 12 : 12, 2, '0')",s:"this.setHours(parseInt('{param}', 10))",r:"(0[0-9]|1[0-1])"},H:{g:"$.omCalendar.leftPad(this.getHours(), 2, '0')",s:"this.setHours(parseInt('{param}', 10))",r:"([0-1][0-9]|2[0-3])"},g:{g:"((this.getHours() % 12) ? this.getHours() % 12 : 12)",s:"this.setHours(parseInt('{param}', 10))",r:"([0-9]|1[0-1])"},G:{g:"this.getHours()",s:"this.setHours(parseInt('{param}', 10))",r:"([0-9]|1[0-9]|2[0-3])"},i:{g:"$.omCalendar.leftPad(this.getMinutes(), 2, '0')",s:"this.setMinutes(parseInt('{param}', 10))",r:"([0-5][0-9])"},s:{g:"$.omCalendar.leftPad(this.getSeconds(), 2, '0')",s:"this.setSeconds(parseInt('{param}', 10))",r:"([0-5][0-9])"},u:{g:"$.omCalendar.leftPad(this.getMilliseconds(), 3, '0')",s:"this.setMilliseconds(parseInt('{param}', 10))",r:"(\\d{1,3})"},D:{g:"$.omCalendar.getShortDayName(this.getDay())",s:"",r:""},DD:{g:"$.omCalendar.getDayName(this.getDay())",s:"",r:""},M:{g:"$.omCalendar.getShortMonthName(this.getMonth())",s:"",r:""},MM:{g:"$.omCalendar.getMonthName(this.getMonth())",s:"",r:""},a:{g:"(this.getHours() < 12 ? 'am' : 'pm')",s:"",r:""},A:{g:"(this.getHours() < 12 ? 'AM' : 'PM')",s:"",r:""}}});a.extend(a.omCalendar,{formatDate:function(c,e){if(!c||!e){return null}if(!(Object.prototype.toString.call(c)==="[object Date]")){return null}var d,g,b="",f=false;for(d=0;d<e.length;d++){g=e.charAt(d);fi_next=e.charAt(d+1);if(g=="'"){f=!f;continue}if(!f&&a.omCalendar.formatCodes[g+fi_next]){g=new Function("return "+a.omCalendar.formatCodes[g+fi_next].g).call(c);d++}else{if(!f&&a.omCalendar.formatCodes[g]){g=new Function("return "+a.omCalendar.formatCodes[g].g).call(c)}}b+=g}return b},parseDate:function(g,j){if(!g||!j){return null}if(!(Object.prototype.toString.call(g)==="[object String]")){return null}var c=[],e,k,h=null,b;for(e=0;e<j.length;e++){k=j.charAt(e);fi_next=j.charAt(e+1);if(a.omCalendar.formatCodes[k+fi_next]){h=a.omCalendar.formatCodes[k+fi_next];e++}else{if(a.omCalendar.formatCodes[k]){h=a.omCalendar.formatCodes[k]}else{continue}}b=g.match(new RegExp(h.r));if(!b){return null}c.push(h.s.replace("{param}",b[0]));g=g.substring(b.index+b[0].length);var f=j.charAt(e+1);if(!(f==""&&g=="")&&(f!==g.charAt(0))&&(a.omCalendar.formatCodes[f]===undefined)){return null}}var d=new Date();new Function(c.join(";")).call(d);return d}});a.om.lang.omCalendar={year:"年",month:"月",Su:"日",Mo:"一",Tu:"二",We:"三",Th:"四",Fr:"五",Sa:"六",cancel:"取消",ok:"确定",time:"时间"}})(jQuery);(function(a){if(!Array.prototype.indexOf){Array.prototype.indexOf=function(d){var b=this.length;for(var c=0;c<b;c++){if(this[c]===d){return c}}return -1}}a.omWidget("om.omCombo",{options:{optionField:"text",valueField:"value",width:"auto",disabled:false,readOnly:false,editable:true,lazyLoad:false,listMaxHeight:300,listAutoWidth:false,autoFilter:true,filterStrategy:"first",filterDelay:500,forceSelection:false,multi:false,multiSeparator:","},_init:function(){var b=this.options,e=this.textInput,d=b.dataSource;if(!b.inputField){b.inputField=b.optionField}if(typeof b.value!=="undefined"){b.lazyLoad=false}if(b.width!="auto"){var c=e.parent().width(b.width);e.width(c.innerWidth()-e.next().outerWidth()-e.outerWidth()+e.width())}if(b.multi){b.editable=this.options.editable=false}this._refeshEmptyText(b.emptyText);b.disabled?e.attr("disabled",true):e.removeAttr("disabled");(b.readOnly||!b.editable)?e.attr("readonly","readOnly"):e.removeAttr("readonly");if(!b.lazyLoad){this._toggleLoading("add");if(d&&typeof d=="string"){this._ajaxLoad(d)}else{if(d&&typeof d=="object"){this._loadData(d);this._toggleLoading("remove")}else{this.dataHasLoaded=true;this._toggleLoading("remove")}}}else{this.dataHasLoaded=false}var f=b.disabled||b.readOnly;if(f){this.expandTrigger.addClass("om-state-disabled")}else{this._bindEvent()}},_create:function(){var c=this.element;var b=a('<span class="om-combo om-widget om-state-default"></span>').insertAfter(c).wrapInner(c);this.textInput=c.clone().removeAttr("id").removeAttr("name").appendTo(b);this.expandTrigger=a('<span class="om-combo-trigger"></span>').appendTo(b);c.hide();this.dropList=a(a('<div class="om-widget"><div class="om-widget-content om-droplist"></div></div>').css({position:"absolute",zIndex:2000}).appendTo(document.body).children()[0]).hide()},setData:function(e){var b=this,d=b.textInput,c=b.element;b.options.value="";c.val("");d.val("");b._toggleLoading("add");if(typeof e==="string"){b._ajaxLoad(e)}else{b._loadData(e);b._toggleLoading("remove")}},getData:function(){var b=this.options.dataSource;return(typeof b=="object")?b:null},value:function(b){if(typeof b==="undefined"){var c=this.element.val();return c?c:""}else{this._setValue(b+"");return this}},disable:function(){var b=this.element;b.attr("disabled",true).unbind();this.options.disabled=true;this.expandTrigger.addClass("om-state-disabled").unbind()},enable:function(){var b=this.element;b.removeAttr("disabled").unbind();this.options.disabled=false;this.expandTrigger.removeClass("om-state-disabled").unbind();this._bindEvent()},destroy:function(){var b=this.element;a(document).unbind("mousedown.omCombo",this.globalEvent);b.parent().after(b).remove();this.dropList.parent().remove()},_bindEvent:function(){var i=this,j=i.options,e=i.textInput,c=i.element,b=i.dropList,g=i.expandTrigger,d=j.emptyText;var h=false,f=e.parent("span");f.mouseenter(function(){if(!j.disabled){f.addClass("om-state-hover")}}).mouseleave(function(){f.removeClass("om-state-hover")}).mousedown(function(k){k.stopPropagation()});e.focus(function(){if(h){return}h=true;a(".om-droplist").hide();f.addClass("om-state-focus");i._refeshEmptyText(d);if(!i.dataHasLoaded){if(!g.hasClass("om-loading")){i._toggleLoading("add");if(typeof(j.dataSource)=="object"){i._loadData(j.dataSource);i._toggleLoading("remove")}else{if(typeof(j.dataSource)=="string"){i._ajaxLoad(j.dataSource)}else{i.dataHasLoaded=true;i._toggleLoading("remove")}}}}if(!j.disabled&&!j.readOnly){i._showDropList()}}).blur(function(n){h=false;f.removeClass("om-state-focus");e.removeClass("om-combo-focus");if(!j.disabled&&!j.readOnly&&!j.multi){if(i.hasManualInput){i.hasManualInput=false;var o=e.val();if(o!==""){var p=a.data(c,"allInputText");var k=a.data(c,"allValues");var l=p.indexOf(o);if(l>-1){i._setValue(k[l])}else{if(!j.forceSelection){c.val(e.val())}else{var m=c.val();l=k.indexOf(m);if(l>-1){e.val(p[l])}else{e.val("")}}}}else{c.val("")}}i._refeshEmptyText(d)}}).keyup(function(m){var k=m.keyCode,l=a.om.keyCode;switch(k){case l.DOWN:i._selectNext();break;case l.UP:i._selectPrev();break;case l.ENTER:i._backfill(i.dropList.find(".om-state-hover"));break;case l.ESCAPE:b.hide();break;case l.TAB:break;default:i.hasManualInput=true;if(!j.disabled&&!j.readOnly&&j.editable&&j.autoFilter){if(window._omcomboFilterTimer){clearTimeout(window._omcomboFilterTimer)}window._omcomboFilterTimer=setTimeout(function(){if(a(document).attr("activeElement").id==e.attr("id")){b.show()}i._doFilter(e)},j.filterDelay)}}});b.mousedown(function(k){k.stopPropagation()});g.click(function(){!g.hasClass("om-loading")&&e.focus()}).mousedown(function(){!g.hasClass("om-loading")&&f.addClass("om-state-active")}).mouseup(function(){!g.hasClass("om-loading")&&f.removeClass("om-state-active")});a(document).bind("mousedown.omCombo",this.globalEvent=function(){b.hide()})},_showDropList:function(){var p=this,r=p.options,n=p.textInput,o=p.element,b=p.dropList.scrollTop(0).css("height","auto"),q,e=o.val(),k=b.find(".om-combo-list-row"),h=p._getAllOptionsBeforeFiltered().removeClass("om-helper-hidden om-state-hover");if(h.size()<=0){return}k.removeClass("om-combo-selected");if(e!==undefined&&e!==""){var c=a.data(o,"allValues");if(r.multi){var j=e.split(r.multiSeparator);for(var d=0;d<j.length;d++){var f=c.indexOf(j[d]);if(f>-1){a(b.find(".om-combo-list-row").get(f)).addClass("om-combo-selected")}}valueItem=j[0]}else{var f=c?c.indexOf(e):-1;if(f>-1){q=a(b.find(".om-combo-list-row").get(f)).addClass("om-combo-selected")}}}var m=b.parent(),l=n.parent();if(!r.listAutoWidth){m.width(l.outerWidth())}else{if(a.browser.msie&&(a.browser.version=="7.0")&&!a.support.style){m.width(b.show().outerWidth())}else{m.width(b.outerWidth())}}if(r.listMaxHeight!="auto"&&b.show().height()>r.listMaxHeight){b.height(r.listMaxHeight).css("overflow-y","auto")}var g=l.offset();m.css({left:g.left,top:g.top+l.outerHeight()});b.show();if(q){b.scrollTop(a(q).offset().top-b.offset().top)}},_toggleLoading:function(b){if(!this.options.disabled){if(b=="add"){this.expandTrigger.removeClass("om-icon-carat-1-s").addClass("om-loading")}else{if(b=="remove"){this.expandTrigger.removeClass("om-loading").addClass("om-icon-carat-1-s")}}}},_ajaxLoad:function(d){var b=this;var c=this.options;a.ajax({url:d,method:"POST",dataType:"json",success:function(e,g){b.dataHasLoaded=true;var f=c.onSuccess;if(f&&b._trigger("onSuccess",null,e,g)===false){c.dataSource=e;return}b._loadData(e);b._toggleLoading("remove")},error:function(e,g,f){b.dataHasLoaded=true;if(c.onError){b._toggleLoading("remove");b._trigger("onError",null,e,g,f)}else{b._toggleLoading("remove");throw new Error('An error occurred while load records from URL "'+d+'",the error message is:'+f.message)}}})},_loadData:function(g){var m=this.options,e=this.element;m.dataSource=g;this.dataHasLoaded=true;var f=m.inputField;var h=[];if(typeof f==="string"){a(g).each(function(){h.push(this[f])})}else{a(g).each(function(n){h.push(f(this,n))})}a.data(e,"allInputText",h);var l=m.valueField;var c=[];if(typeof l==="string"){a(g).each(function(){c.push(""+this[l])})}else{a(g).each(function(n){c.push(""+l(this,n))})}a.data(e,"allValues",c);var b=this.dropList.empty();if(m.listProvider){var j=m.listProvider(b,g);if(j){j.each(function(){a(this).addClass("om-combo-list-row")})}}else{var i=m.optionField;var d="";var k=this;if(typeof i==="string"){a(g).each(function(n){d+=k._wrapText(this[m.optionField])})}else{a(g).each(function(n){d+=k._wrapText(m.optionField(this,n))})}if(d){a(d).appendTo(b);b.show().css("height","auto");if(m.listMaxHeight!="auto"&&b.height()>m.listMaxHeight){b.height(m.listMaxHeight).css("overflow-y","auto")}b.hide();if(e.parent().hasClass("om-state-hover")){k._showDropList()}}}if(m.value){this._setValue(""+m.value)}this._bindEventsToList()},_bindEventsToList:function(){var c=this,b=c._getAllOptionsBeforeFiltered();b.hover(function(){b.removeClass("om-state-hover");a(this).addClass("om-state-hover")},function(){a(this).removeClass("om-state-hover")}).mousedown(function(){c._backfill(this)})},_wrapText:function(b){return'<div class="om-combo-list-row">'+b+"</div>"},_setValue:function(k){var j=this.textInput,d=this.element;var f=true;var b=d.val();var m=this.options;if(k==b){f=false}var c=a.data(d,"allValues");var g=[],l=[];if(m.multi){l=k.split(m.multiSeparator)}else{l.push(k)}for(var e=0;e<l.length;e++){var h=c?c.indexOf(l[e]):-1;if(h>-1){g.push(a.data(d,"allInputText")[h])}else{if(!m.forceSelection){g.push(k)}else{d.val("");k=""}}}d.val(k);if(m.multi){j.val(g.join(m.multiSeparator))}else{j.val(g.join(""))}m.value=k;if(m.onValueChange&&f){this._trigger("onValueChange",null,j,k,b)}this._refeshEmptyText(m.emptyText)},_findHighlightItem:function(){var b=this.dropList;var c=b.find(".om-state-hover");if(c.length>0){return c}var d=b.find(".om-combo-selected");return d.length>0?d[0]:d},_selectPrev:function(){var b=this._findHighlightItem();var d=this._getAllOptionsAfterFiltered();var f=d.index(b);var c=a(d[f]);if(f===0){f=d.length}else{if(f==-1){f=d.length}}var e=a(d[f-1]);this._highLisghtAndScrollTo(c,e)},_selectNext:function(){var d=this.dropList;if(d.css("display")=="none"){this._showDropList();return}var e=this._getAllOptionsAfterFiltered();var f=e.index(this._findHighlightItem());var c=a(e[f]);if(f==e.length-1){f=-1}var b=a(e[f+1]);this._highLisghtAndScrollTo(c,b)},_highLisghtAndScrollTo:function(c,d){var b=this.dropList;c.removeClass("om-state-hover");d.addClass("om-state-hover");if(d.position().top<=0){b.scrollTop(b.scrollTop()+d.position().top)}else{if(d.position().top+d.outerHeight()>b.height()){b.scrollTop(b.scrollTop()+d.position().top+d.outerHeight()-b.height())}}},_backfill:function(b){if(b.length===0){return}var k=this,e=k.element,c=k.dropList,l=k.options,d=l.multi;if(d){a(b).toggleClass("om-combo-selected").removeClass("om-state-hover")}else{this._getAllOptionsBeforeFiltered().removeClass("om-combo-selected");a(b).addClass("om-combo-selected")}if(c.css("display")=="none"){return}var j=[],h=c.find(".om-combo-selected");for(var g=0;g<h.length;g++){var f=a(h[g]).index();if(f>-1){j.push(a.data(e,"allValues")[f])}}this._setValue(j.join(d?l.multiSeparator:""));if(!d){c.hide()}},_getAllOptionsBeforeFiltered:function(){return this.dropList.find(".om-combo-list-row")},_getAllOptionsAfterFiltered:function(){var b=this.dropList;return b.find(".om-combo-list-row").not(b.find(".om-helper-hidden"))},_doFilter:function(){var b=this,f=b.textInput,e=b.element,c=b.options;records=c.dataSource,filterStrategy=c.filterStrategy,text=f.val(),needShow=false,items=b._getAllOptionsBeforeFiltered(),allInputText=a.data(e,"allInputText");a(records).each(function(g){if(b._filetrPass(filterStrategy,text,records[g],allInputText[g])){a(items.get(g)).removeClass("om-helper-hidden");needShow=true}else{a(items.get(g)).addClass("om-helper-hidden")}});var d=this.dropList.css("height","auto");if(c.listMaxHeight!="auto"&&d.height()>c.listMaxHeight){d.height(c.listMaxHeight).css("overflow-y","auto")}if(!needShow){d.hide()}},_filetrPass:function(d,f,b,e){if(f===""){return true}if(typeof d==="function"){return d(f,b)}else{if(d==="first"){return e.indexOf(f)===0}else{if(d==="anywhere"){return e.indexOf(f)>-1}else{if(d==="last"){var c=e.lastIndexOf(f);return c>-1&&c+f.length==e.length}else{return false}}}}},_refeshEmptyText:function(b){var c=this.textInput;if(!b){return}if(c.val()===""){c.val(b).addClass("om-empty-text")}else{if(c.val()===b){c.val("")}c.removeClass("om-empty-text")}}})})(jQuery);(function(e,f){var c="om-dialog om-widget om-widget-content om-corner-all ",b={buttons:true,height:true,maxHeight:true,maxWidth:true,minHeight:true,minWidth:true,width:true},d={maxHeight:true,maxWidth:true,minHeight:true,minWidth:true},a=e.attrFn||{val:true,css:true,html:true,text:true,data:true,width:true,height:true,offset:true,click:true};e.omWidget("om.omDialog",{options:{autoOpen:true,buttons:{},closeOnEscape:true,closeText:"close",dialogClass:"",draggable:true,hide:null,height:"auto",maxHeight:false,maxWidth:false,minHeight:150,minWidth:150,modal:false,position:{my:"center",at:"center",collision:"fit",using:function(h){var g=e(this).css(h).offset().top;if(g<0){e(this).css("top",h.top-g)}}},resizable:true,show:null,stack:true,title:"",width:300,zIndex:1000},_create:function(){this.originalTitle=this.element.attr("title");if(typeof this.originalTitle!=="string"){this.originalTitle=""}this.options.title=this.options.title||this.originalTitle;var o=this;o.element.parent().bind("om-remove.omDialog",(o.__removeBind=function(){o.element.remove()}));var p=o.options,m=p.title||"&#160;",h=e.om.omDialog.getTitleId(o.element),n=(o.uiDialog=e("<div></div>")).appendTo(document.body).hide().addClass(c+p.dialogClass).css({zIndex:p.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(q){if(p.closeOnEscape&&q.keyCode&&q.keyCode===e.om.keyCode.ESCAPE){o.close(q);q.preventDefault()}}).attr({role:"dialog","aria-labelledby":h}).mousedown(function(q){o.moveToTop(false,q)}),j=o.element.show().removeAttr("title").addClass("om-dialog-content om-widget-content").appendTo(n),i=(o.uiDialogTitlebar=e("<div></div>")).addClass("om-dialog-titlebar om-widget-header om-corner-all om-helper-clearfix").prependTo(n),l=e('<a href="#"></a>').addClass("om-dialog-titlebar-close om-corner-tr").attr("role","button").hover(function(){l.addClass("om-state-hover")},function(){l.removeClass("om-state-hover")}).focus(function(){l.addClass("om-state-focus")}).blur(function(){l.removeClass("om-state-focus")}).click(function(q){o.close(q);return false}).appendTo(i),k=(o.uiDialogTitlebarCloseText=e("<span></span>")).addClass("om-icon-closethick").text(p.closeText).appendTo(l),g=e("<span></span>").addClass("om-dialog-title").attr("id",h).html(m).prependTo(i);i.find("*").add(i).disableSelection();if(p.draggable&&e.om.omDraggable){o._makeDraggable()}if(p.resizable&&e.fn.omResizable){o._makeResizable()}o._createButtons(p.buttons);o._isOpen=false;if(e.fn.bgiframe){n.bgiframe()}},_init:function(){if(this.options.autoOpen){this.open()}},destroy:function(){var g=this;if(g.overlay){g.overlay.destroy()}g.uiDialog.hide();g.element.unbind(".dialog").removeData("dialog").removeClass("om-dialog-content om-widget-content").hide().appendTo("body");g.uiDialog.remove();if(g.originalTitle){g.element.attr("title",g.originalTitle)}return g},widget:function(){return this.uiDialog},close:function(m){var i=this,l,k,j=this.options,g=j.onBeforeClose,h=j.onClose;if(g&&false===i._trigger("onBeforeClose",m)){return}if(i.overlay){i.overlay.destroy()}i.uiDialog.unbind("keypress.om-dialog");i._isOpen=false;if(i.options.hide){i.uiDialog.hide(i.options.hide,function(){h&&i._trigger("onClose",m)})}else{i.uiDialog.hide();h&&i._trigger("onClose",m)}e.om.omDialog.overlay.resize();if(i.options.modal){l=0;e(".om-dialog").each(function(){if(this!==i.uiDialog[0]){k=e(this).css("z-index");if(!isNaN(k)){l=Math.max(l,k)}}});e.om.omDialog.maxZ=l}return i},isOpen:function(){return this._isOpen},moveToTop:function(k,j){var g=this,i=g.options,h;if((i.modal&&!k)||(!i.stack&&!i.modal)){return g._trigger("onFocus",j)}if(i.zIndex>e.om.omDialog.maxZ){e.om.omDialog.maxZ=i.zIndex}if(g.overlay){e.om.omDialog.maxZ+=1;g.overlay.$el.css("z-index",e.om.omDialog.overlay.maxZ=e.om.omDialog.maxZ)}h={scrollTop:g.element.scrollTop(),scrollLeft:g.element.scrollLeft()};e.om.omDialog.maxZ+=1;g.uiDialog.css("z-index",e.om.omDialog.maxZ);g.element.attr(h);g._trigger("onFocus",j);return g},open:function(){if(this._isOpen){return}var i=this,j=i.options,h=i.uiDialog;i.overlay=j.modal?new e.om.omDialog.overlay(i):null;i._size();i._position(j.position);h.show(j.show);i.moveToTop(true);if(j.modal){h.bind("keypress.om-dialog",function(m){if(m.keyCode!==e.om.keyCode.TAB){return}var l=e(":tabbable",this),n=l.filter(":first"),k=l.filter(":last");if(m.target===k[0]&&!m.shiftKey){n.focus(1);return false}else{if(m.target===n[0]&&m.shiftKey){k.focus(1);return false}}})}e(i.element.find(":tabbable").get().concat(h.find(".om-dialog-buttonpane :tabbable").get().concat(h.get()))).eq(0).focus();i._isOpen=true;var g=j.onOpen;if(g){i._trigger("onOpen")}return i},_createButtons:function(j){var i=this,g=false,h=e("<div></div>").addClass("om-dialog-buttonpane om-helper-clearfix"),k=e("<div></div>").addClass("om-dialog-buttonset").appendTo(h);i.uiDialog.find(".om-dialog-buttonpane").remove();if(typeof j==="object"&&j!==null){e.each(j,function(){return !(g=true)})}if(g){e.each(j,function(l,n){n=e.isFunction(n)?{click:n,text:l}:n;var m=e('<button type="button"></button>').click(function(){n.click.apply(i.element[0],arguments)}).appendTo(k);e.each(n,function(o,p){if(o==="click"){return}if(o in a){m[o](p)}else{m.attr(o,p)}});if(e.fn.omButton){m.omButton()}});h.appendTo(i.uiDialog)}},_makeDraggable:function(){var g=this,j=g.options,k=e(document),i;function h(l){return{position:l.position,offset:l.offset}}g.uiDialog.omDraggable({cancel:".om-dialog-content, .om-dialog-titlebar-close",handle:".om-dialog-titlebar",containment:"document",cursor:"move",onStart:function(m,l){i=j.height==="auto"?"auto":e(this).height();e(this).height(e(this).height()).addClass("om-dialog-dragging");g._trigger("onDragStart",h(m),l)},onDrag:function(m,l){g._trigger("onDrag",h(m),l)},onStop:function(m,l){j.position=[m.position.left-k.scrollLeft(),m.position.top-k.scrollTop()];e(this).removeClass("om-dialog-dragging").height(i);g._trigger("onDragStop",h(m),l);e.om.omDialog.overlay.resize()}})},_makeResizable:function(l){l=(l===f?this.options.resizable:l);var h=this,k=h.options,g=h.uiDialog.css("position"),j=(typeof l==="string"?l:"n,e,s,w,se,sw,ne,nw");function i(m){return{originalPosition:m.originalPosition,originalSize:m.originalSize,position:m.position,size:m.size}}h.uiDialog.omResizable({cancel:".om-dialog-content",containment:"document",alsoResize:h.element,maxWidth:k.maxWidth,maxHeight:k.maxHeight,minWidth:k.minWidth,minHeight:h._minHeight(),handles:j,start:function(m,n){e(this).addClass("om-dialog-resizing");h._trigger("onResizeStart",m,i(n))},resize:function(m,n){h._trigger("onResize",m,i(n))},stop:function(m,n){e(this).removeClass("om-dialog-resizing");k.height=e(this).height();k.width=e(this).width();h._trigger("onResizeStop",m,i(n));e.om.omDialog.overlay.resize()}}).css("position",g).find(".om-resizable-se").addClass("om-icon om-icon-grip-diagonal-se")},_minHeight:function(){var g=this.options;if(g.height==="auto"){return g.minHeight}else{return Math.min(g.minHeight,g.height)}},_position:function(h){var i=[],j=[0,0],g;if(h){if(typeof h==="string"||(typeof h==="object"&&"0" in h)){i=h.split?h.split(" "):[h[0],h[1]];if(i.length===1){i[1]=i[0]}e.each(["left","top"],function(l,k){if(+i[l]===i[l]){j[l]=i[l];i[l]=k}});h={my:i.join(" "),at:i.join(" "),offset:j.join(" ")}}h=e.extend({},e.om.omDialog.prototype.options.position,h)}else{h=e.om.omDialog.prototype.options.position}g=this.uiDialog.is(":visible");if(!g){this.uiDialog.show()}this.uiDialog.css({top:0,left:0}).position(e.extend({of:window},h));if(!g){this.uiDialog.hide()}},_setOptions:function(j){var h=this,g={},i=false;e.each(j,function(k,l){h._setOption(k,l);if(k in b){i=true}if(k in d){g[k]=l}});if(i){this._size()}if(this.uiDialog.is(":data(resizable)")){this.uiDialog.omResizable("option",g)}},_setOption:function(j,k){var h=this,g=h.uiDialog;switch(j){case"buttons":h._createButtons(k);break;case"closeText":h.uiDialogTitlebarCloseText.text(""+k);break;case"dialogClass":g.removeClass(h.options.dialogClass).addClass(c+k);break;case"disabled":if(k){g.addClass("om-dialog-disabled")}else{g.removeClass("om-dialog-disabled")}break;case"draggable":var i=g.is(":data(draggable)");if(i&&!k){g.omDraggable("destroy")}if(!i&&k){h._makeDraggable()}break;case"position":h._position(k);break;case"resizable":var l=g.is(":data(resizable)");if(l&&!k){g.omResizable("destroy")}if(l&&typeof k==="string"){g.omResizable("option","handles",k)}if(!l&&k!==false){h._makeResizable(k)}break;case"title":e(".om-dialog-title",h.uiDialogTitlebar).html(""+(k||"&#160;"));break}e.OMWidget.prototype._setOption.apply(h,arguments)},_size:function(){var k=this.options,h,j,g=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0});if(k.minWidth>k.width){k.width=k.minWidth}h=this.uiDialog.css({height:"auto",width:k.width}).height();j=Math.max(0,k.minHeight-h);if(k.height==="auto"){if(e.support.minHeight){this.element.css({minHeight:j,height:"auto"})}else{this.uiDialog.show();var i=this.element.css("height","auto").height();if(!g){this.uiDialog.hide()}this.element.height(Math.max(i,j))}}else{this.element.height(Math.max(k.height-h,0))}if(this.uiDialog.is(":data(resizable)")){this.uiDialog.omResizable("option","minHeight",this._minHeight())}}});e.extend(e.om.omDialog,{version:"@VERSION",uuid:0,maxZ:0,getTitleId:function(g){var h=g.attr("id");if(!h){this.uuid+=1;h=this.uuid}return"ui-dialog-title-"+h},overlay:function(g){this.$el=e.om.omDialog.overlay.create(g)}});e.extend(e.om.omDialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:e.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(g){return g+".dialog-overlay"}).join(" "),create:function(h){if(this.instances.length===0){setTimeout(function(){if(e.om.omDialog.overlay.instances.length){e(document).bind(e.om.omDialog.overlay.events,function(i){if(e(i.target).zIndex()<e.om.omDialog.overlay.maxZ){return false}})}},1);e(document).bind("keydown.dialog-overlay",function(i){if(h.options.closeOnEscape&&i.keyCode&&i.keyCode===e.om.keyCode.ESCAPE){h.close(i);i.preventDefault()}});e(window).bind("resize.dialog-overlay",e.om.omDialog.overlay.resize)}var g=(this.oldInstances.pop()||e("<div></div>").addClass("om-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});if(e.fn.bgiframe){g.bgiframe()}this.instances.push(g);return g},destroy:function(g){g.parent().unbind(this.__removeBind);var h=e.inArray(g,this.instances);if(h!=-1){this.oldInstances.push(this.instances.splice(h,1)[0])}if(this.instances.length===0){e([document,window]).unbind(".dialog-overlay")}g.remove();var i=0;e.each(this.instances,function(){i=Math.max(i,this.css("z-index"))});this.maxZ=i},height:function(){var h,g;if(e.browser.msie&&e.browser.version<7){h=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);g=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight);if(h<g){return e(window).height()+"px"}else{return h+"px"}}else{return e(document).height()+"px"}},width:function(){var g,h;if(e.browser.msie){g=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth);h=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth);if(g<h){return e(window).width()+"px"}else{return g+"px"}}else{return e(document).width()+"px"}},resize:function(){var g=e([]);e.each(e.om.omDialog.overlay.instances,function(){g=g.add(this)});g.css({width:0,height:0}).css({width:e.om.omDialog.overlay.width(),height:e.om.omDialog.overlay.height()})}});e.extend(e.om.omDialog.overlay.prototype,{destroy:function(){e.om.omDialog.overlay.destroy(this.$el)}})}(jQuery));var swfobject=function(){var aq="undefined",aD="object",ab="Shockwave Flash",X="ShockwaveFlash.ShockwaveFlash",aE="application/x-shockwave-flash",ac="SWFObjectExprInst",ax="onreadystatechange",af=window,aL=document,aB=navigator,aa=false,Z=[aN],aG=[],ag=[],al=[],aJ,ad,ap,at,ak=false,aU=false,aH,an,aI=true,ah=function(){var a=typeof aL.getElementById!=aq&&typeof aL.getElementsByTagName!=aq&&typeof aL.createElement!=aq,e=aB.userAgent.toLowerCase(),c=aB.platform.toLowerCase(),h=c?/win/.test(c):/win/.test(e),j=c?/mac/.test(c):/mac/.test(e),g=/webkit/.test(e)?parseFloat(e.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,d=!+"\v1",f=[0,0,0],k=null;if(typeof aB.plugins!=aq&&typeof aB.plugins[ab]==aD){k=aB.plugins[ab].description;if(k&&!(typeof aB.mimeTypes!=aq&&aB.mimeTypes[aE]&&!aB.mimeTypes[aE].enabledPlugin)){aa=true;d=false;k=k.replace(/^.*\s+(\S+\s+\S+$)/,"$1");f[0]=parseInt(k.replace(/^(.*)\..*$/,"$1"),10);f[1]=parseInt(k.replace(/^.*\.(.*)\s.*$/,"$1"),10);f[2]=/[a-zA-Z]/.test(k)?parseInt(k.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else{if(typeof af.ActiveXObject!=aq){try{var i=new ActiveXObject(X);if(i){k=i.GetVariable("$version");if(k){d=true;k=k.split(" ")[1].split(",");f=[parseInt(k[0],10),parseInt(k[1],10),parseInt(k[2],10)]}}}catch(b){}}}return{w3:a,pv:f,wk:g,ie:d,win:h,mac:j}}(),aK=function(){if(!ah.w3){return}if((typeof aL.readyState!=aq&&aL.readyState=="complete")||(typeof aL.readyState==aq&&(aL.getElementsByTagName("body")[0]||aL.body))){aP()}if(!ak){if(typeof aL.addEventListener!=aq){aL.addEventListener("DOMContentLoaded",aP,false)}if(ah.ie&&ah.win){aL.attachEvent(ax,function(){if(aL.readyState=="complete"){aL.detachEvent(ax,arguments.callee);aP()}});if(af==top){(function(){if(ak){return}try{aL.documentElement.doScroll("left")}catch(a){setTimeout(arguments.callee,0);return}aP()})()}}if(ah.wk){(function(){if(ak){return}if(!/loaded|complete/.test(aL.readyState)){setTimeout(arguments.callee,0);return}aP()})()}aC(aP)}}();function aP(){if(ak){return}try{var b=aL.getElementsByTagName("body")[0].appendChild(ar("span"));b.parentNode.removeChild(b)}catch(a){return}ak=true;var d=Z.length;for(var c=0;c<d;c++){Z[c]()}}function aj(a){if(ak){a()}else{Z[Z.length]=a}}function aC(a){if(typeof af.addEventListener!=aq){af.addEventListener("load",a,false)}else{if(typeof aL.addEventListener!=aq){aL.addEventListener("load",a,false)}else{if(typeof af.attachEvent!=aq){aM(af,"onload",a)}else{if(typeof af.onload=="function"){var b=af.onload;af.onload=function(){b();a()}}else{af.onload=a}}}}}function aN(){if(aa){Y()}else{am()}}function Y(){var d=aL.getElementsByTagName("body")[0];var b=ar(aD);b.setAttribute("type",aE);var a=d.appendChild(b);if(a){var c=0;(function(){if(typeof a.GetVariable!=aq){var e=a.GetVariable("$version");if(e){e=e.split(" ")[1].split(",");ah.pv=[parseInt(e[0],10),parseInt(e[1],10),parseInt(e[2],10)]}}else{if(c<10){c++;setTimeout(arguments.callee,10);return}}d.removeChild(b);a=null;am()})()}else{am()}}function am(){var g=aG.length;if(g>0){for(var h=0;h<g;h++){var c=aG[h].id;var l=aG[h].callbackFn;var a={success:false,id:c};if(ah.pv[0]>0){var i=aS(c);if(i){if(ao(aG[h].swfVersion)&&!(ah.wk&&ah.wk<312)){ay(c,true);if(l){a.success=true;a.ref=av(c);l(a)}}else{if(aG[h].expressInstall&&au()){var e={};e.data=aG[h].expressInstall;e.width=i.getAttribute("width")||"0";e.height=i.getAttribute("height")||"0";if(i.getAttribute("class")){e.styleclass=i.getAttribute("class")}if(i.getAttribute("align")){e.align=i.getAttribute("align")}var f={};var d=i.getElementsByTagName("param");var k=d.length;for(var j=0;j<k;j++){if(d[j].getAttribute("name").toLowerCase()!="movie"){f[d[j].getAttribute("name")]=d[j].getAttribute("value")}}ae(e,f,c,l)}else{aF(i);if(l){l(a)}}}}}else{ay(c,true);if(l){var b=av(c);if(b&&typeof b.SetVariable!=aq){a.success=true;a.ref=b}l(a)}}}}}function av(b){var d=null;var c=aS(b);if(c&&c.nodeName=="OBJECT"){if(typeof c.SetVariable!=aq){d=c}else{var a=c.getElementsByTagName(aD)[0];if(a){d=a}}}return d}function au(){return !aU&&ao("6.0.65")&&(ah.win||ah.mac)&&!(ah.wk&&ah.wk<312)}function ae(f,d,h,e){aU=true;ap=e||null;at={success:false,id:h};var a=aS(h);if(a){if(a.nodeName=="OBJECT"){aJ=aO(a);ad=null}else{aJ=a;ad=h}f.id=ac;if(typeof f.width==aq||(!/%$/.test(f.width)&&parseInt(f.width,10)<310)){f.width="310"}if(typeof f.height==aq||(!/%$/.test(f.height)&&parseInt(f.height,10)<137)){f.height="137"}aL.title=aL.title.slice(0,47)+" - Flash Player Installation";var b=ah.ie&&ah.win?"ActiveX":"PlugIn",c="MMredirectURL="+af.location.toString().replace(/&/g,"%26")+"&MMplayerType="+b+"&MMdoctitle="+aL.title;if(typeof d.flashvars!=aq){d.flashvars+="&"+c}else{d.flashvars=c}if(ah.ie&&ah.win&&a.readyState!=4){var g=ar("div");h+="SWFObjectNew";g.setAttribute("id",h);a.parentNode.insertBefore(g,a);a.style.display="none";(function(){if(a.readyState==4){a.parentNode.removeChild(a)}else{setTimeout(arguments.callee,10)}})()}aA(f,d,h)}}function aF(a){if(ah.ie&&ah.win&&a.readyState!=4){var b=ar("div");a.parentNode.insertBefore(b,a);b.parentNode.replaceChild(aO(a),b);a.style.display="none";(function(){if(a.readyState==4){a.parentNode.removeChild(a)}else{setTimeout(arguments.callee,10)}})()}else{a.parentNode.replaceChild(aO(a),a)}}function aO(b){var d=ar("div");if(ah.win&&ah.ie){d.innerHTML=b.innerHTML}else{var e=b.getElementsByTagName(aD)[0];if(e){var a=e.childNodes;if(a){var f=a.length;for(var c=0;c<f;c++){if(!(a[c].nodeType==1&&a[c].nodeName=="PARAM")&&!(a[c].nodeType==8)){d.appendChild(a[c].cloneNode(true))}}}}}return d}function aA(e,g,c){var d,a=aS(c);if(ah.wk&&ah.wk<312){return d}if(a){if(typeof e.id==aq){e.id=c}if(ah.ie&&ah.win){var f="";for(var i in e){if(e[i]!=Object.prototype[i]){if(i.toLowerCase()=="data"){g.movie=e[i]}else{if(i.toLowerCase()=="styleclass"){f+=' class="'+e[i]+'"'}else{if(i.toLowerCase()!="classid"){f+=" "+i+'="'+e[i]+'"'}}}}}var h="";for(var j in g){if(g[j]!=Object.prototype[j]){h+='<param name="'+j+'" value="'+g[j]+'" />'}}a.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+f+">"+h+"</object>";ag[ag.length]=e.id;d=aS(e.id)}else{var b=ar(aD);b.setAttribute("type",aE);for(var k in e){if(e[k]!=Object.prototype[k]){if(k.toLowerCase()=="styleclass"){b.setAttribute("class",e[k])}else{if(k.toLowerCase()!="classid"){b.setAttribute(k,e[k])}}}}for(var l in g){if(g[l]!=Object.prototype[l]&&l.toLowerCase()!="movie"){aQ(b,l,g[l])}}a.parentNode.replaceChild(b,a);d=b}}return d}function aQ(b,d,c){var a=ar("param");a.setAttribute("name",d);a.setAttribute("value",c);b.appendChild(a)}function aw(a){var b=aS(a);if(b&&b.nodeName=="OBJECT"){if(ah.ie&&ah.win){b.style.display="none";(function(){if(b.readyState==4){aT(a)}else{setTimeout(arguments.callee,10)}})()}else{b.parentNode.removeChild(b)}}}function aT(a){var b=aS(a);if(b){for(var c in b){if(typeof b[c]=="function"){b[c]=null}}b.parentNode.removeChild(b)}}function aS(a){var c=null;try{c=aL.getElementById(a)}catch(b){}return c}function ar(a){return aL.createElement(a)}function aM(a,c,b){a.attachEvent(c,b);al[al.length]=[a,c,b]}function ao(a){var b=ah.pv,c=a.split(".");c[0]=parseInt(c[0],10);c[1]=parseInt(c[1],10)||0;c[2]=parseInt(c[2],10)||0;return(b[0]>c[0]||(b[0]==c[0]&&b[1]>c[1])||(b[0]==c[0]&&b[1]==c[1]&&b[2]>=c[2]))?true:false}function az(b,f,a,c){if(ah.ie&&ah.mac){return}var e=aL.getElementsByTagName("head")[0];if(!e){return}var g=(a&&typeof a=="string")?a:"screen";if(c){aH=null;an=null}if(!aH||an!=g){var d=ar("style");d.setAttribute("type","text/css");d.setAttribute("media",g);aH=e.appendChild(d);if(ah.ie&&ah.win&&typeof aL.styleSheets!=aq&&aL.styleSheets.length>0){aH=aL.styleSheets[aL.styleSheets.length-1]}an=g}if(ah.ie&&ah.win){if(aH&&typeof aH.addRule==aD){aH.addRule(b,f)}}else{if(aH&&typeof aL.createTextNode!=aq){aH.appendChild(aL.createTextNode(b+" {"+f+"}"))}}}function ay(a,c){if(!aI){return}var b=c?"visible":"hidden";if(ak&&aS(a)){aS(a).style.visibility=b}else{az("#"+a,"visibility:"+b)}}function ai(b){var a=/[\\\"<>\.;]/;var c=a.exec(b)!=null;return c&&typeof encodeURIComponent!=aq?encodeURIComponent(b):b}var aR=function(){if(ah.ie&&ah.win){window.attachEvent("onunload",function(){var a=al.length;for(var b=0;b<a;b++){al[b][0].detachEvent(al[b][1],al[b][2])}var d=ag.length;for(var c=0;c<d;c++){aw(ag[c])}for(var e in ah){ah[e]=null}ah=null;for(var f in swfobject){swfobject[f]=null}swfobject=null})}}();return{registerObject:function(a,e,c,b){if(ah.w3&&a&&e){var d={};d.id=a;d.swfVersion=e;d.expressInstall=c;d.callbackFn=b;aG[aG.length]=d;ay(a,false)}else{if(b){b({success:false,id:a})}}},getObjectById:function(a){if(ah.w3){return av(a)}},embedSWF:function(k,e,h,f,c,a,b,i,g,j){var d={success:false,id:e};if(ah.w3&&!(ah.wk&&ah.wk<312)&&k&&e&&h&&f&&c){ay(e,false);aj(function(){h+="";f+="";var q={};if(g&&typeof g===aD){for(var o in g){q[o]=g[o]}}q.data=k;q.width=h;q.height=f;var n={};if(i&&typeof i===aD){for(var p in i){n[p]=i[p]}}if(b&&typeof b===aD){for(var l in b){if(typeof n.flashvars!=aq){n.flashvars+="&"+l+"="+b[l]}else{n.flashvars=l+"="+b[l]}}}if(ao(c)){var m=aA(q,n,e);if(q.id==e){ay(e,true)}d.success=true;d.ref=m}else{if(a&&au()){q.data=a;ae(q,n,e,j);return}else{ay(e,true)}}if(j){j(d)}})}else{if(j){j(d)}}},switchOffAutoHideShow:function(){aI=false},ua:ah,getFlashPlayerVersion:function(){return{major:ah.pv[0],minor:ah.pv[1],release:ah.pv[2]}},hasFlashPlayerVersion:ao,createSWF:function(a,b,c){if(ah.w3){return aA(a,b,c)}else{return undefined}},showExpressInstall:function(b,a,d,c){if(ah.w3&&au()){ae(b,a,d,c)}},removeSWF:function(a){if(ah.w3){aw(a)}},createCSS:function(b,a,c,d){if(ah.w3){az(b,a,c,d)}},addDomLoadEvent:aj,addLoadEvent:aC,getQueryParamValue:function(b){var a=aL.location.search||aL.location.hash;if(a){if(/\?/.test(a)){a=a.split("?")[1]}if(b==null){return ai(a)}var c=a.split("&");for(var d=0;d<c.length;d++){if(c[d].substring(0,c[d].indexOf("="))==b){return ai(c[d].substring((c[d].indexOf("=")+1)))}}}return""},expressInstallCallback:function(){if(aU){var a=aS(ac);if(a&&aJ){a.parentNode.replaceChild(aJ,a);if(ad){ay(ad,true);if(ah.ie&&ah.win){aJ.style.display="block"}}if(ap){ap(at)}}aU=false}}}}();(function(b){function a(g,d){var c=g+"Queue";var f=b("#"+c+" .om-fileupload-queueitem").length;if(d==null||isNaN(d)||d<0||d>=f){return false}var e=b("#"+c+" .om-fileupload-queueitem:eq("+d+")");return e.attr("id").replace(g,"")}b.omWidget("om.omFileUpload",{options:{swf:"/operamasks-ui/ui/om-fileupload.swf",action:"",actionData:{},height:30,width:120,buttonImg:null,multi:false,autoUpload:false,fileDataName:"Filedata",method:"POST",queueSizeLimit:999,removeCompleted:true,fileExt:"*.*",fileDesc:null,sizeLimit:null,onSelect:function(){},onQueueFull:function(){},onCancel:function(){},onError:function(){},onProgress:function(){},onComplete:function(){},onAllComplete:function(){}},upload:function(e){var f=this.element;var h=f.attr("id"),c=null,d=f.attr("id")+"Queue",g=f.attr("id")+"Uploader";if(typeof(e)!="undefined"){if((c=a(h,e))===false){return}}document.getElementById(g).startFileUpload(c,false)},cancel:function(e){var f=this.element;var h=f.attr("id"),c=null,d=f.attr("id")+"Queue",g=f.attr("id")+"Uploader";if(typeof(e)!="undefined"){if(isNaN(e)){c=e}else{if((c=a(f.attr("id"),e))===false){return}}document.getElementById(g).cancelFileUpload(c,true,true,false)}else{document.getElementById(g).clearFileUploadQueue(false)}},_setOption:function(g,h){var k=document.getElementById(this.element.attr("id")+"Uploader");if(g=="actionData"){var j="";for(var e in h){j+="&"+e+"="+h[e]}var d=document.cookie.split(";");for(var f=0;f<d.length;f++){if(d[f]!==""){j+="&"+d[f]}}h=encodeURI(j.substr(1));k.updateSettings(g,h);return}var c=["buttonImg","buttonText","fileDesc","fileExt","height","action","sizeLimit","width"];if(b.inArray(g,c)!=-1){k.updateSettings(g,h)}},_create:function(){var m=this;var f=this.element;var d=b.extend({},this.options);d.wmode="opaque";d.expressInstall=null;d.displayData="percentage";d.folder="";d.simUploadLimit=1;d.scriptAccess="sameDomain";d.queueID=false;d.onInit=function(){};d.onSelectOnce=function(){};d.onClearQueue=function(){};d.id=this.element.attr("id");b(f).data("settings",d);var h=location.pathname;h=h.split("/");h.pop();h=h.join("/")+"/";var e={};e.omFileUploadID=d.id;e.pagepath=h;if(d.buttonImg){e.buttonImg=escape(d.buttonImg)}e.buttonText=encodeURI(b.om.lang._get(d,"omFileUpload","buttonText"));if(d.rollover){e.rollover=true}e.action=d.action;e.folder=escape(d.folder);var k="";var l=document.cookie.split(";");for(var g=0;g<l.length;g++){k+="&"+l[g]}if(d.actionData){for(var c in d.actionData){k+="&"+c+"="+d.actionData[c]}}e.actionData=escape(encodeURI(k.substr(1)));e.width=d.width;e.height=d.height;e.wmode=d.wmode;e.method=d.method;e.queueSizeLimit=d.queueSizeLimit;e.simUploadLimit=d.simUploadLimit;if(d.hideButton){e.hideButton=true}if(d.fileDesc){e.fileDesc=d.fileDesc}if(d.fileExt){e.fileExt=d.fileExt}if(d.multi){e.multi=true}if(d.autoUpload){e.autoUpload=true}if(d.sizeLimit){e.sizeLimit=d.sizeLimit}if(d.checkScript){e.checkScript=d.checkScript}if(d.fileDataName){e.fileDataName=d.fileDataName}if(d.queueID){e.queueID=d.queueID}if(d.onInit()!==false){f.css("display","none");f.after('<div id="'+f.attr("id")+'Uploader"></div>');swfobject.embedSWF(d.swf,d.id+"Uploader",d.width,d.height,"9.0.24",d.expressInstall,e,{quality:"high",wmode:d.wmode,allowScriptAccess:d.scriptAccess},{},function(i){if(typeof(d.onSWFReady)=="function"&&i.success){d.onSWFReady()}});if(d.queueID==false){b("#"+f.attr("id")+"Uploader").after('<div id="'+f.attr("id")+'Queue" class="om-fileupload-queue"></div>')}else{b("#"+d.queueID).addClass("om-fileupload-queue")}}if(typeof(d.onOpen)=="function"){f.bind("omFileUploadOpen",d.onOpen)}f.bind("omFileUploadSelect",{action:d.onSelect,queueID:d.queueID},function(o,i,n){if(m._trigger("onSelect",o,i,n)!==false){var p=Math.round(n.size/1024*100)*0.01;var q="KB";if(p>1000){p=Math.round(p*0.001*100)*0.01;q="MB"}var r=p.toString().split(".");if(r.length>1){p=r[0]+"."+r[1].substr(0,2)}else{p=r[0]}if(n.name.length>20){fileName=n.name.substr(0,20)+"..."}else{fileName=n.name}queue="#"+b(this).attr("id")+"Queue";if(o.data.queueID){queue="#"+o.data.queueID}b(queue).append('<div id="'+b(this).attr("id")+i+'" class="om-fileupload-queueitem">                            <div class="cancel" onclick="$(\'#'+b(this).attr("id")+"').omFileUpload('cancel','"+i+'\')">                            </div>                            <span class="fileName">'+fileName+" ("+p+q+')</span><span class="percentage"></span>                            <div class="om-fileupload-progress">                                <div id="'+b(this).attr("id")+i+'ProgressBar" class="om-fileupload-progressbar"><!--Progress Bar--></div>                            </div>                        </div>')}});f.bind("omFileUploadSelectOnce",{action:d.onSelectOnce},function(i,n){m._trigger("onSelectOnce",i,n);if(d.autoUpload){b(this).omFileUpload("upload")}});f.bind("omFileUploadQueueFull",{action:d.onQueueFull},function(i,n){if(m._trigger("onQueueFull",i,n)!==false){alert(b.om.lang.omFileUpload.queueSizeLimitMsg+n+".")}});f.bind("omFileUploadCancel",{action:d.onCancel},function(r,n,q,s,i,p){if(m._trigger("onCancel",r,n,q,s)!==false){if(i){var o=(p==true)?0:250;b("#"+b(this).attr("id")+n).fadeOut(o,function(){b(this).remove()})}}});f.bind("omFileUploadClearQueue",{action:d.onClearQueue},function(o,n){var i=(d.queueID)?d.queueID:b(this).attr("id")+"Queue";if(n){b("#"+i).find(".om-fileupload-queueitem").remove()}if(m._trigger("onClearQueue",o,n)!==false){b("#"+i).find(".om-fileupload-queueitem").each(function(){var p=b(".om-fileupload-queueitem").index(this);b(this).delay(p*100).fadeOut(250,function(){b(this).remove()})})}});var j=[];f.bind("omFileUploadError",{action:d.onError},function(q,i,p,o){if(m._trigger("onError",q,i,p,o)!==false){var n=new Array(i,p,o);j.push(n);b("#"+b(this).attr("id")+i).find(".percentage").text(" - "+o.type+" Error");b("#"+b(this).attr("id")+i).find(".om-fileupload-progress").hide();b("#"+b(this).attr("id")+i).addClass("om-fileupload-error")}});if(typeof(d.onUpload)=="function"){f.bind("omFileUploadUpload",d.onUpload)}f.bind("omFileUploadProgress",{action:d.onProgress,toDisplay:d.displayData},function(o,i,n,p){if(m._trigger("onProgress",o,i,n,p)!==false){b("#"+b(this).attr("id")+i+"ProgressBar").animate({width:p.percentage+"%"},250,function(){if(p.percentage==100){b(this).closest(".om-fileupload-progress").fadeOut(250,function(){b(this).remove()})}});if(o.data.toDisplay=="percentage"){displayData=" - "+p.percentage+"%"}if(o.data.toDisplay=="speed"){displayData=" - "+p.speed+"KB/s"}if(o.data.toDisplay==null){displayData=" "}b("#"+b(this).attr("id")+i).find(".percentage").text(displayData)}});f.bind("omFileUploadComplete",{action:d.onComplete},function(p,i,o,n,q){if(m._trigger("onComplete",p,i,o,unescape(n),q)!==false){b("#"+b(this).attr("id")+i).find(".percentage").text(" - Completed");if(d.removeCompleted){b("#"+b(p.target).attr("id")+i).fadeOut(250,function(){b(this).remove()})}b("#"+b(p.target).attr("id")+i).addClass("completed")}});if(typeof(d.onAllComplete)=="function"){f.bind("omFileUploadAllComplete",{action:d.onAllComplete},function(i,n){if(m._trigger("onAllComplete",i,n)!==false){j=[]}})}}});b.om.lang.omFileUpload={queueSizeLimitMsg:"文件上传队列已满，数量不能超过",buttonText:"选择文件"}})(jQuery);(function(a){a.omWidget("om.omGrid",{options:{height:462,width:"100%",colModel:false,autoFit:false,showIndex:true,dataSource:false,extraData:{},method:"GET",preProcess:false,limit:15,rowClasses:["oddRow","evenRow"],singleSelect:true,title:"",onRowSelect:function(d,c,b){},onRowDeselect:function(d,c,b){},onRowClick:function(d,c,b){},onRowDblClick:function(d,c,b){},onPageChange:function(c,b,d){},onSuccess:function(e,b,d,c){},onError:function(c,e,d,b){},onRefresh:function(d,b,c){},_onRefreshCallbacks:[],_onResizableStopCallbacks:[],_onResizableCallbacks:[],_onResizeCallbacks:[]},_create:function(){var b=this.options,d=this.element.show().attr({cellPadding:0,cellSpacing:0,border:0}).empty().append("<tbody></tbody>");d.wrap('<div class="om-grid om-widget om-widget-content"><div class="bDiv" style="width:auto"></div></div>').closest(".om-grid");if(!a.isArray(this._getColModel())){return}this.hDiv=a('<div class="hDiv om-state-default"></div>').append('<div class="hDivBox"><table cellPadding="0" cellSpacing="0"></table></div>');d.parent().before(this.hDiv);this.pDiv=a('<div class="pDiv om-state-default"></div>');d.parent().after(this.pDiv);var c=d.closest(".om-grid");this.loadMask=a('<div class="gBlock"><div align="center" class="gBlock-valignMiddle" ><div class="loadingImg" style="display:block"/></div></div>').mousedown(function(f){return false}).hide();c.append(this.loadMask);this.titleDiv=a("<div class='titleDiv'></div>");c.prepend(this.titleDiv);this.tbody=this.element.children().eq(0);this._guid=0;b._onRefreshCallbacks.push(function(){this._refreshHeaderCheckBox()});this._bindScrollEnvent()},_init:function(){var c=this.element,d=this.options,b=c.closest(".om-grid");this._measure(b,d);if(!a.isArray(this._getColModel())){return}this._extraData={};this.tbody.empty();a("table",this.hDiv).empty();this.pDiv.empty();this.titleDiv.empty();this._buildTableHead();this._buildPagingToolBar();this._buildLoadMask();this._bindSelectAndClickEnvent();this._makeColsResizable();this._buildTitle();this._resetHeight();this.pageData={nowPage:1,totalPages:1};this._populate()},resize:function(d){var e=this,g=this.options,c=this.element.closest(".om-grid"),f,b;d=d||{};g.width=d.width||arguments[0]||g.width;g.height=d.height||arguments[1]||g.height;this._measure(c,g);this._buildLoadMask();this._resetWidth();this._resetHeight();a.each(g._onResizeCallbacks,function(h,i){i.call(e)})},_measure:function(b,c){b.outerWidth(c.width==="fit"?b.parent().width():c.width);b.outerHeight(c.height==="fit"?b.parent().height():c.height)},_resetHeight:function(){var e=this.element,b=e.closest(".om-grid");var c=this.hDiv.outerHeight(true),d=this.pDiv.is(":hidden")?0:this.pDiv.outerHeight(true),f=this.titleDiv.is(":hidden")?0:this.titleDiv.outerHeight(true);b.children(".bDiv").outerHeight(b.height()-c-d-f)},_resetWidth:function(){var g=this.options,e=this._getColModel(),c=-1,b=this.element.closest(".om-grid"),f=a("thead",this.hDiv),h=0;a.each(e,function(j,i){var k=i.width||60;if(i.width=="autoExpand"){k=0;c=j}f.find("th[axis='col"+j+"'] >div").width(k);h+=k});this._fixHeaderWidth(c,h);var d={};a(this._getHeaderCols()).each(function(){d[a(this).attr("abbr")]=a("div",a(this)).width()});this.tbody.find("td[abbr]").each(function(j,k){var i=a(k).prop("abbr");if(d[i]!=null){a(k).find(">div:first").width(d[i])}})},_getColModel:function(){return this.options.colModel},_buildTitle:function(){var b=this.titleDiv;if(this.options.title){b.html("<div class='titleContent'>"+this.options.title+"</div>").show()}else{b.empty().hide()}},_fixHeaderWidth:function(c,k){var l=this.element.closest(".om-grid"),i=a("thead",this.hDiv),j=this._getColModel(),d=this.options;if(c!=-1){var g=l.width()-32,e=i.find('th[axis="col'+c+'"] div');e.parent().hide();var f=g-i.width();e.parent().show();if(f<=0){e.css("width",60)}else{e.css("width",f)}}else{if(d.autoFit){var g=l.width()-22,f=g-i.width(),h=1+f/k,b=i.find('th[axis^="col"] >div');a.each(j,function(m){var n=b.eq(m);n.width(parseInt(n.width()*h))})}}},_buildTableHead:function(){var j=this.options,f=this.element,b=f.closest(".om-grid"),m=this._getColModel(),p=0,g=0,r=0,d=-1;thead=a("<thead></thead>");tr=a("<tr></tr>").appendTo(thead);if(j.showIndex){var q=a("<th></th>").attr({axis:"indexCol",align:"center"}).addClass("indexCol").append(a('<div class="indexheader" style="text-align:center;width:25px;"></div>'));tr.append(q);g=25}if(!j.singleSelect){var q=a("<th></th>").attr({axis:"checkboxCol",align:"center"}).addClass("checkboxCol").append(a('<div class="checkboxheader" style="text-align:center;width:17px;"><span class="checkbox"/></div>'));tr.append(q);r=17}for(var h=0,l=m.length;h<l;h++){var o=m[h],c=o.width||60,k=o.align||"center";if(c=="autoExpand"){c=0;d=h}var n=a("<div></div>").html(o.header).css({"text-align":k,width:c});o.wrap&&n.addClass("wrap");var e=a("<th></th>").attr("axis","col"+h).addClass("col"+h).append(n);if(o.name){e.attr("abbr",o.name)}if(o.align){e.attr("align",o.align)}p+=c;tr.append(e)}f.prepend(thead);a("table",this.hDiv).append(thead);this._fixHeaderWidth(d,p);this.thead=thead;thead=null},_buildPagingToolBar:function(){var f=this.options;if(f.limit<=0){this.pDiv.css("border-width",0).hide();this.pager=this.pDiv;return}var c=this,d=this.element,b=this.pDiv;b.show().html('<div class="pDiv2"><div class="pGroup"><div class="pFirst pButton om-icon"><span class="om-icon-seek-start"></span></div><div class="pPrev pButton om-icon"><span class="om-icon-seek-prev"></span></div></div><div class="btnseparator"></div><div class="pGroup"><span class="pControl"></span></div><div class="btnseparator"></div><div class="pGroup"><div class="pNext pButton om-icon"><span class="om-icon-seek-next"></span></div><div class="pLast pButton om-icon"><span class="om-icon-seek-end"></span></div></div><div class="btnseparator"></div><div class="pGroup"><div class="pReload pButton om-icon"><span class="om-icon-refresh"></span></div></div><div class="btnseparator"></div><div class="pGroup"><span class="pPageStat"></span></div></div>');var e=a.om.lang._get(f,"omGrid","pageText").replace(/{totalPage}/,"<span>1</span>").replace(/{index}/,'<input type="text" size="4" value="1" />');a(".pControl",b).html(e);d.parent().after(b);a(".pReload",b).click(function(){c._populate()});a(".pFirst",b).click(function(){c._changePage("first")});a(".pPrev",b).click(function(){c._changePage("prev")});a(".pNext",b).click(function(){c._changePage("next")});a(".pLast",b).click(function(){c._changePage("last")});a(".pControl input",b).keydown(function(g){if(g.keyCode==a.om.keyCode.ENTER){c._changePage("input")}});a(".pButton",b).hover(function(){a(this).addClass("om-state-hover")},function(){a(this).removeClass("om-state-hover")});this.pager=b},_buildLoadMask:function(){var b=this.element.closest(".om-grid");this.loadMask.css({width:"100%",height:b.height()})},_changePage:function(c){if(this.loading){return true}var e=this.element,h=this.options,b=e.closest(".om-grid"),d=this.pageData,g=d.nowPage,i=d.totalPages,f=g;this._oldPage=g;switch(c){case"first":f=1;break;case"prev":if(g>1){f=g-1}break;case"next":if(g<i){f=g+1}break;case"last":f=i;break;case"input":var j=parseInt(a(".pControl input",e.closest(".om-grid")).val());if(isNaN(j)){j=g}if(j<1){j=1}else{if(j>i){j=i}}a(".pControl input",this.pDiv).val(j);f=j;break;default:if(/\d/.test(c)){var j=parseInt(c);if(isNaN(j)){j=1}if(j<1){j=1}else{if(j>i){j=i}}a(".pControl input",e.closest(".om-grid")).val(j);f=j}}if(f==g){return false}if(this._trigger("onPageChange",null,c,f)===false){return}d.nowPage=f;this._populate()},_populate:function(){var k=this,f=this.element,b=f.closest(".om-grid"),j=this.options,e=a(".pPageStat",b);if(!j.dataSource){a(".pPageStat",b).html(j.emptygMsg);return false}if(this.loading){return true}var d=this.pageData,h=d.nowPage||1,c=a(".gBlock",b);this.loading=true;e.html(a.om.lang._get(j,"omGrid","loadingMsg"));c.show();var i=(j.limit<=0)?100000000:j.limit;var g=a.extend(true,{},this._extraData,j.extraData,{start:i*(h-1),limit:i,_time_stamp_:new Date().getTime()});a.ajax({type:j.method,url:j.dataSource,data:g,dataType:"json",success:function(o,q,n){var p=j.onSuccess;if(typeof(p)=="function"){k._trigger("onSuccess",null,o,q,n)}k._addData(o);for(var m=0,l=j._onRefreshCallbacks.length;m<l;m++){j._onRefreshCallbacks[m].call(k)}k._trigger("onRefresh",null,h,o.rows);c.hide();k.loading=false},error:function(m,p,o){e.html(a.om.lang._get(j,"omGrid","errorMsg")).css("color","red");try{var l=j.onError;if(typeof(l)=="function"){l(m,p,o)}}catch(n){}finally{c.hide();k.loading=false;k.pageData.data={rows:[],total:0};return false}}})},_addData:function(g){var h=this.options,f=this.element,e=f.closest(".om-grid"),b=a(".pPageStat",e),d=h.preProcess,c=this.pageData;d&&(g=d(g));c.data=g;c.totalPages=Math.ceil(g.total/h.limit);this._buildPager();this._renderDatas()},_buildPager:function(){var i=this.options;if(i.limit<=0){return}var e=this.element,g=this.pager,b=a(".pControl",g),d=this.pageData,f=d.nowPage,j=d.totalPages,h=d.data,l=i.limit*(f-1)+1,k=l-1+h.rows.length,c="";if(h.total===0){c=a.om.lang._get(i,"omGrid","emptyMsg")}else{c=a.om.lang._get(i,"omGrid","pageStat").replace(/{from}/,l).replace(/{to}/,k).replace(/{total}/,h.total)}a("input",b).val(f);a("span",b).html(j);a(".pPageStat",g).html(c)},_renderDatas:function(){var r=this,f=this.element,l=this.options,c=f.closest(".om-grid"),n=this._getHeaderCols(),s=this.pageData.data.rows||[],o=this._getColModel(),h=l.rowClasses,k=a("tbody",f).empty(),b=(typeof h==="function"),e=this.pageData,d=(e.nowPage-1)*l.limit,g="<td align='$' abbr='$' class='$'><div align='$' class='innerCol $' style='width:$px'>$</div></td>",q=[],p=[],m,i;if(!this.pageData.data.rows){this.pageData.data.rows=[]}r.hDiv.scrollLeft(0);a(n).each(function(j){q[j]=a("div",a(this)).width()});a.each(s,function(j,u){var t=b?h(j,u):h[j%h.length];var v=r._buildRowCellValues(o,u,j);p.push("<tr _grid_row_id="+(r._guid++)+" class='om-grid-row "+t+"'>");a(n).each(function(x){var A=a(this).attr("axis"),z=false,y;if(A=="indexCol"){y=j+d+1}else{if(A=="checkboxCol"){y='<span class="checkbox"/>'}else{if(A.substring(0,3)=="col"){var w=A.substring(3);y=v[w];if(o[w].wrap){z=true}}else{y=""}}}m=[this.align,this.abbr,A,this.align,z?"wrap":"",q[x],y];i=0;p.push(g.replace(/\$/g,function(){return m[i++]}))});p.push("</tr>")});k.html(p.join(" "))},_getHeaderCols:function(){return this.hDiv.find("th[axis]")},_buildRowCellValues:function(n,e,m){var h=n.length,o=[];for(var g=0;g<h;g++){var l=n[g],p,b=l.renderer;if(l.name.indexOf(".")>0){var k=l.name.split("."),f=1,d=k.length,p=e[k[0]];while(f<d&&p&&(p=p[k[f++]])!=undefined){}}if(p==undefined){p=e[l.name]==undefined?"":e[l.name]}if(typeof b==="function"){p=b(p,e,m)}o[g]=p;p=null}return o},_bindScrollEnvent:function(){var b=this;this.tbody.closest(".bDiv").scroll(function(){b.hDiv.scrollLeft(a(this).scrollLeft())})},_bindSelectAndClickEnvent:function(){var b=this;this.tbody.unbind();if(!this.options.singleSelect){a("th.checkboxCol span.checkbox",this.thead).click(function(){var e=a(this),d=b._getTrs().size();if(e.hasClass("selected")){e.removeClass("selected");for(var c=0;c<d;c++){b._rowDeSelect(c)}}else{e.addClass("selected");for(var c=0;c<d;c++){b._rowSelect(c)}}});this.tbody.delegate("tr.om-grid-row","click",function(d){var e=a(this),c=b._getRowIndex(e);if(e.hasClass("om-state-highlight")){b._rowDeSelect(c)}else{b._rowSelect(c)}b._refreshHeaderCheckBox();b._trigger("onRowClick",d,c,b._getRowData(c))});this.tbody.delegate("tr.om-grid-row","dblclick",function(d){var e=a(this),c=b._getRowIndex(e);if(e.hasClass("om-state-highlight")){}else{b._rowSelect(c);b._refreshHeaderCheckBox()}b._trigger("onRowDblClick",d,c,b._getRowData(c))})}else{this.tbody.delegate("tr.om-grid-row","click",function(d){var f=a(this),c=b._getRowIndex(f);if(f.hasClass("om-state-highlight")){}else{var e=b._getRowIndex(b.tbody.find("tr.om-state-highlight:not(:hidden)"));(e!=-1)&&b._rowDeSelect(e);b._rowSelect(c)}b._trigger("onRowClick",d,c,b._getRowData(c))});this.tbody.delegate("tr.om-grid-row","dblclick",function(d){var c=b._getRowIndex(this);b._trigger("onRowDblClick",d,c,b._getRowData(c))})}},_getRowData:function(b){return this.pageData.data.rows[b]},_rowSelect:function(d){var e=this.element,g=this.options,c=a("tbody",e),f=this._getTrs().eq(d),b=a("td.checkboxCol span.checkbox",f);f.addClass("om-state-highlight");b.addClass("selected");this._trigger("onRowSelect",null,d,this._getRowData(d))},_rowDeSelect:function(d){var e=this.element,g=this.options,c=a("tbody",e),f=this._getTrs().eq(d),b=a("td.checkboxCol span.checkbox",f);f.removeClass("om-state-highlight");b.removeClass("selected");this._trigger("onRowDeselect",null,d,this._getRowData(d))},_refreshHeaderCheckBox:function(){var e=this.getSelections(),d=this._getTrs(),c=a("th.checkboxCol span.checkbox",this.thead),b=d.length;c.toggleClass("selected",b>0&&b==e.length)},_makeColsResizable:function(){var b=this,e=b.tbody.closest(".bDiv"),d=b.element.closest(".om-grid"),c=this.titleDiv,f;a('th[axis^="col"] div',b.thead).omResizable({handles:"e",containment:"document",minWidth:60,resize:function(n,g){var m=b.options._onResizableCallbacks;for(var j=0,l=m.length;j<l;j++){m[j].call(b)}var k=a(this),o=k.parent().attr("abbr"),h=a('td[abbr="'+o+'"] > div',b.tbody),p=b.thead.closest(".hDiv");k.width(n.size.width).height("");h.width(n.size.width).height("");e.height(d.height()-(c.is(":hidden")?0:c.outerHeight(true))-p.outerHeight(true)-(b.pDiv.is(":hidden")?0:b.pDiv.outerHeight(true)));p.scrollLeft(e.scrollLeft())},start:function(h,g){f=a(this).parent().width()},stop:function(n,m){var l=b.options._onResizableStopCallbacks,k=a(this).parent(),h=b.thead.closest(".hDiv");f=k.width()-f;for(var j=0,g=l.length;j<g;j++){l[j].call(b,k,f)}h.scrollLeft(e.scrollLeft())}})},_getRowIndex:function(b){return this._getTrs().index(b)},_getTrs:function(){return this.tbody.find("tr.om-grid-row:not([_delete]=true)")},setData:function(b){this.options.dataSource=b;this.pageData={nowPage:1,totalPages:1};this._populate()},getData:function(){return this.pageData.data},refresh:function(){if(this.loading){return true}this.loading=true;var d=this.options;a(".pPageStat",this.pager).html(a.om.lang._get(d,"omGrid","loadingMsg"));this.loadMask.show();this._buildPager();this._renderDatas();this._trigger("onRefresh",null,this.pageData.nowPage||1,this.pageData.data.rows);for(var c=0,b=d._onRefreshCallbacks.length;c<b;c++){d._onRefreshCallbacks[c].call(this)}this.loadMask.hide();this.loading=false},reload:function(b){if(this.loading){return true}if(typeof b!=="undefined"){b=parseInt(b)||1;if(b<0){b=1}if(b>this.pageData.totalPages){b=this.pageData.totalPages}this.pageData.nowPage=b}this._populate()},setSelections:function(c){var b=this;if(!a.isArray(c)){c=[c]}var d=this.getSelections();a(d).each(function(){b._rowDeSelect(this)});a(c).each(function(){b._rowSelect(this)});b._refreshHeaderCheckBox()},getSelections:function(c){var f=this,e=f._getTrs(),g=e.filter(".om-state-highlight"),b=[];if(c){var d=f.getData().rows;g.each(function(h,i){b[b.length]=d[e.index(i)]})}else{g.each(function(h,i){b[b.length]=e.index(i)})}return b},destroy:function(){var b=this.element;b.closest(".om-grid").after(b).remove()}});a.om.lang.omGrid={loadingMsg:"正在加载数据，请稍候...",emptyMsg:"没有数据",errorMsg:"取数出错",pageText:"第{index}页，共{totalPage}页",pageStat:"共{total}条数据，显示{from}-{to}条"}})(jQuery);(function(a){a.omWidget("om.omMenu",{options:{contextMenu:false,maxWidth:200,minWidth:100,dataSource:"local"},show:function(b){var j=this,k=j.options,h,d,f=j.element;var e=a(b).offset();if(k.contextMenu){h=b.pageY;d=b.pageX;b.preventDefault();b.stopPropagation();b.cancelBubble=true}else{var g=parseInt(a(b).css("borderBottomWidth").replace("px",""));h=e.top+a(b).height()+(g!="NaN"?g:0)+1;d=e.left+1}var i=f.parent();while(i.css("position")=="static"&&i[0].nodeName!="BODY"){i=i.parent()}h-=i.offset().top;d-=i.offset().left;if((d+f.outerWidth())>document.documentElement.clientWidth){d=d-f.outerWidth()-20}a(f).css({top:h,left:d}).show();a(f).children("ul.om-menu").show();var c=a(f).width()*0.7;a(f).children("ul.om-menu").children().each(function(m,l){if(a(l).find("span:first").hasClass("om-menu-item-sep")){a(l).find("span:first").width("98%")}else{if(a(l).find("span:first").width()>c){a(l).find("span:first").width(a(l).attr("aria-haspopup")?c-15:c)}}})},hide:function(){this._hide()},disableItem:function(b){this.element.find("#"+b).addClass("om-state-disabled").unbind(".menuItem")},enableItem:function(e){var c=this,d=c.element;var b=d.find("#"+e);b.removeClass("om-state-disabled");c._bindLiEvent(b)},destroy:function(){var c=a(document),b;while(b=this.globalEvent.pop()){c.unbind(".omMenu",b)}},_create:function(){var c=this,d=c.options,f=c.element,e=d.dataSource;f.addClass("om-menu-container om-menu-content om-corner-all");f.css("position","absolute");if(e){if(e!="local"){if(typeof e=="string"){c._ajaxLoad(f,e)}else{if(typeof e=="object"){f.append(c._appendNodes.apply(c,[e]));c._bindEvent()}}}else{var b=f.children("ul").addClass("om-menu");c._parseDomMenu(b);c._bindEvent()}}},_init:function(){var b=this.options,c=this.element;c.css({minWidth:b.minWidth-10,maxWidth:b.maxWidth-10});if(a.browser.msie&&a.browser.version=="6.0"){c.css("width",b.minWidth+30)}if(a.browser.msie&&a.browser.version=="7.0"){c.css("width",b.maxWidth-10)}},_ajaxLoad:function(d,c){var b=this;a.ajax({url:c,method:"POST",dataType:"json",success:function(e){d.append(b._appendNodes.apply(b,[e]));b._bindEvent()}})},_appendNodes:function(h,d){var b=this,c=[];var f=(d==undefined)?"om-menu":"om-menu-content";var i=(d==undefined)?"block":"none";var e=(d==undefined)?"om-menu-icon":"om-menu-icon om-menu-icon-child";c.push('<ul class="'+f+' om-corner-all" style="display:'+i+';">');var g=[];a(h).each(function(k,l){if(l.children!=null){if(l.disabled===true||l.disabled=="true"){g.push('<li id="'+l.id+'" aria-haspopup="true"  class="om-state-disabled">')}else{g.push('<li id="'+l.id+'"  aria-haspopup="true">')}g.push('<a href="javascript:void(0)" class="om-corner-all om-menu-indicator">');l.icon?g.push('<img class="'+e+'" src="'+l.icon+'">'):null;l.icon?g.push("<span>"+l.label+"</span>"):g.push('<span style="margin-left:2em;">'+l.label+"</span>");g.push('<span class="ui-icon-span" role="popup"></span>');g.push("</a>");g.push(b._appendNodes(l.children,k++));g.push("</li>")}else{if(l.disabled===true||l.disabled=="true"){g.push('<li id="'+l.id+'"  class="om-state-disabled">')}else{g.push('<li id="'+l.id+'" >')}g.push('<a href="javascript:void(0)" class="om-corner-all om-menu-indicator">');l.icon?g.push('<img class="'+e+'" src="'+l.icon+'">'):null;l.icon?g.push("<span>"+l.label+"</span>"):g.push('<span style="margin-left:2em;">'+l.label+"</span>");g.push("</a>");g.push("</li>")}if(l.seperator=="true"||l.seperator==true){g.push('<li class="om-menu-sep-li"  ><span class="om-menu-item-sep">&nbsp;</span></li>')}var j=a(b.element).attr("id")+"_"+l.id;a(b.element).data(j,l)});c.push(g.join(""));c.push("</ul>");return c.join("")},_parseDomMenu:function(f){if(f.parent().attr("aria-haspopup")=="true"){f.addClass("om-menu-content om-corner-all")}f.css("display","none");var d=f.children();for(var e=0;e<d.length;e++){var b=a(d[e]),c=b.children("ul");if(c.length>0){b.attr("aria-haspopup","true");b.find("span[role='popup']").addClass("ui-icon-span");this._parseDomMenu(c)}b.find("a").addClass("om-corner-all om-menu-indicator");b.find("img").addClass("om-menu-icon")}},_showChildren:function(b){var c=this;if(b&&b.length>0){var e=b.children("ul").eq(0);e.css({minWidth:this.options.minWidth,top:b.position().top});var d=b.width();if((2*d+b.offset().left)>document.documentElement.clientWidth){d=-d}e.css("left",d);e.show();e.children().each(function(g,f){if(a(f).find("span:first").hasClass("om-menu-item-sep")){a(f).find("span:first").width("98%")}else{if(e.width()>c.options.maxWidth){e.width(c.options.maxWidth);width=c.options.maxWidth*0.6}else{if(e.attr("hasShow")==undefined){e.width(e.find("li:eq(0)>a:eq(0)").width()+15);e.attr("hasShow",true)}width=e.width()*0.6}a(f).find("span:first").width(width)}})}},_hideChildren:function(b){b.children("ul").eq(0).hide()},_bindLiEvent:function(b){var c=this,e=c.element,d=c.options;a(b).bind("mouseenter.menuItem",function(){var f=a(this);var g=f.parent().width();f.addClass("om-menu-item-hover");if(a.browser.msie&&a.browser.version=="9.0"){f.parent().width(g)}if(f.attr("aria-haspopup")){setTimeout(function(){c._showChildren(f)},200)}}).bind("mouseleave.menuItem",function(){var f=a(this);f.removeClass("om-menu-item-hover");setTimeout(function(){f.children("ul").hide()},200)}).bind("mousedown.menuItem",function(g){var f=a(e).data(a(e).attr("id")+"_"+this.id);if(d.onSelect){c._trigger("onSelect",g,f)}})},_bindEvent:function(){var b=this,g=b.element,h=g.find("ul"),d=g.find("li"),k=a(document),f;for(var e=0;e<d.length;e++){if(!a(d[e]).hasClass("om-state-disabled")){b._bindLiEvent(d[e])}}for(var c=0;c<h.length;c++){a(h[c]).bind("mouseleave.menuContainer",function(){var i=a(this);if(i.parent().attr("aria-haspopup")=="true"){i.hide()}})}this.globalEvent=[];k.bind("mousedown.omMenu",f=function(){b._hide()});this.globalEvent.push(f);k.bind("keyup.omMenu",f=function(j){var i=j.keyCode,l=a.om.keyCode;switch(i){case l.DOWN:b._selectNext();break;case l.UP:b._selectPrev();break;case l.LEFT:b._hideRight();break;case l.RIGHT:b._showRight();break;case l.ENTER:if(g.css("display")=="block"){b._backfill(g)}b._hide();break;case l.ESCAPE:b._hide();break;default:null}});this.globalEvent.push(f);k.bind("keydown.omMenu",f=function(i){if(i.keyCode>=37&&i.keyCode<=40){i.preventDefault()}});this.globalEvent.push(f)},_hide:function(){var b=this,c=b.element;c.find("ul").css("display","none");c.find("li.om-menu-item-hover").each(function(d,e){a(e).removeClass("om-menu-item-hover")});c.hide()},_findNext:function(b){var c,e=b;while((c=b.next("li")).length!==0){if(!c.hasClass("om-menu-sep-li")&&!c.hasClass("om-state-disabled")){return c}b=c}var d=e.parent().find("li:first");while(d.length!==0&&d!=e){if(!d.hasClass("om-menu-sep-li")&&!d.hasClass("om-state-disabled")){return d}d=d.next("li")}},_findPrev:function(b){var e,f=b;while((e=b.prev("li")).length!==0){if(!e.hasClass("om-menu-sep-li")&&!e.hasClass("om-state-disabled")){return e}b=e}var d=f.parent().children();var c=d.eq(d.length-1);while(c.length!==0&&c!=f){if(!c.hasClass("om-menu-sep-li")&&!c.hasClass("om-state-disabled")){return c}c=c.prev("li")}},_selectNext:function(){var c=this,d=c.element,f;var b=d.find("li.om-menu-item-hover");var e=b.eq(b.length-1);if(b.length==0){f=d.find("li").eq(0);while(f.hasClass("om-state-disabled")){f=f.next("li")}f.addClass("om-menu-item-hover")}else{f=c._findNext(e);if(f.length<=0){return}f.addClass("om-menu-item-hover");e.removeClass("om-menu-item-hover")}this._hideChildren(e);this._showChildren(f)},_selectPrev:function(){var c=this,e=c.element,g;var b=e.find("li.om-menu-item-hover");var f=b.eq(b.length-1);g=e.find("ul.om-menu > li");if(b.length==0){var h=g.eq(g.length-1),d=1;while(h.hasClass("om-state-disabled")){h=g.eq(g.length-(d++))}(g=h).addClass("om-menu-item-hover")}else{g=c._findPrev(f);if(g.length<=0){return}g.addClass("om-menu-item-hover");f.removeClass("om-menu-item-hover")}this._hideChildren(f);this._showChildren(g)},_hideRight:function(){var b=this,d=b.element;var c=d.find("li.om-menu-item-hover"),e=c.eq(c.length-1);e.removeClass("om-menu-item-hover");b._hideChildren(e)},_showRight:function(){var c=this,d=c.element,f;var e=d.find("li.om-menu-item-hover"),b=e.eq(e.length-1);if(b.attr("aria-haspopup")=="true"){f=b.children("ul").find("li").eq(0);f.addClass("om-menu-item-hover")}c._showChildren(f)},_backfill:function(b){var c=b.find("li.om-menu-item-hover");c.eq(c.length-1).mousedown()}})})(jQuery);(function(d,f){var b='<div class="om-messageBox om-widget om-widget-content om-corner-all" tabindex="-1"><div class="om-messageBox-titlebar om-widget-header om-corner-top om-helper-clearfix"><span class="om-messageBox-title"></span><a href="#" class="om-messageBox-titlebar-close om-corner-tr"><span class="om-icon om-icon-closethick"></span></a></div><div class="om-messageBox-content om-widget-content"><table><tr vailgn="top"><td class="om-messageBox-imageTd"><div class="om-messageBox-image"/>&nbsp;</td><td class="om-message-content-html"></td></tr></table></div><div class="om-messageBox-buttonpane om-widget-content om-corner-bottom om-helper-clearfix"><div class="om-messageBox-buttonset"></div></div></div>';var c=function(){if(d.browser.msie&&d.browser.version<7){var i=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),h=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight);return(i<h)?d(window).height():i}else{return d(document).height()}};var a=function(){if(d.browser.msie){var h=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),i=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth);return(h<i)?d(window).width():h}else{return d(document).width()}};var e=function(k,h,i,j){if(k.hasClass("om-messageBox-waiting")){return}i?i(j):jQuery.noop();k.remove();h.remove()};var g=function(j){var o=j.onClose;var k=d(b).appendTo(document.body).css("z-index",1500).position({of:window,collision:"fit"}).omDraggable({containment:"document",cursor:"move",handle:".om-messageBox-titlebar"}).hide().keydown(function(q){if(q.keyCode&&q.keyCode===d.om.keyCode.ESCAPE){e(k,p,null,false);q.preventDefault()}});var p=d('<div class="om-widget-overlay"/>').appendTo(document.body).show().css({height:c(),width:a()});var i=k.find("span.om-messageBox-title").html(j.title).next().hover(function(){d(this).addClass("om-state-hover")},function(){d(this).removeClass("om-state-hover")}).focus(function(){d(this).addClass("om-state-focus")}).blur(function(){d(this).removeClass("om-state-focus")}).click(function(q){e(k,p,null,false);return false}).bind("mousedown mouseup",function(){d(this).toggleClass("om-state-mousedown")});k.find("div.om-messageBox-image").addClass("om-messageBox-image-"+j.type);var n=j.content;if(j.type=="prompt"){n=n||"";n+='<br/><input id="om-messageBox-prompt-input" type="text"/>'}k.find("td.om-message-content-html").html(n);var m=k.find("div.om-messageBox-buttonset");switch(j.type){case"confirm":m.html('<button id="confirm">确定</button><button id="cancel">取消</button>');if(d.fn.omButton){m.find("button#confirm").omButton({width:60,onClick:function(q){e(k,p,o,true)}});m.find("button#cancel").omButton({width:60,onClick:function(q){e(k,p,o,false)}})}break;case"prompt":m.html('<button id="confirm">确定</button><button id="cancel">取消</button>');if(d.fn.omButton){m.find("button#confirm").omButton({width:60,onClick:function(r){var q=o?o(d("#om-messageBox-prompt-input").val()):jQuery.noop();if(q!==false){k.remove();p.remove()}}});m.find("button#cancel").omButton({width:60,onClick:function(q){e(k,p,o,false)}})}break;case"waiting":k.addClass("om-messageBox-waiting");p.addClass("om-messageBox-waiting");i.hide();m.parent().hide();k.find(">.om-messageBox-content").addClass("no-button om-corner-bottom");break;default:m.html('<button id="confirm">确定</button>');if(d.fn.omButton){m.find("button#confirm").omButton({width:60,onClick:function(q){e(k,p,o,true)}})}}var l=d("button",m);l.width("100%");k.show();var h=l.first()[0];h?h.focus():k.focus()};d.omMessageBox={alert:function(h){h=h||{};h.title=h.title||"提示";h.type=h.type||"alert";g(h)},confirm:function(h){h=h||{};h.title=h.title||"确认";h.type="confirm";g(h)},prompt:function(h){h=h||{};h.title=h.title||"请输入";h.type="prompt";g(h)},waiting:function(h){if(h==="close"){d(".om-messageBox-waiting").remove();return}h=h||{};h.title=h.title||"请等待";h.type="waiting";g(h)}}}(jQuery));(function(a,b){a.omMessageTip={show:function(d){d=a.extend({title:"提醒",content:"&#160;",type:"alert"},d);var e='<div class="om-messageTip om-widget om-corner-all" tabindex="-1"><div class="om-widget-header om-corner-top om-helper-clearfix"><span class="om-messageTip-title">'+d.title+'</span><a href="#" class="om-messageTip-titlebar-close om-corner-tr"><span class="om-icon-closethick"></span></a></div><div class="om-messageTip-content om-widget-content om-corner-bottom"><div class="om-messageTip-image om-messageTip-image-'+d.type+'"></div><div class="om-messageTip-content-body">'+d.content+"</div></div></div>";var g=a(e).appendTo(document.body).css("z-index",3000).hide();var c={d:g,l:d.onClose};g.find("a.om-messageTip-titlebar-close").bind("mouseenter mouseleave",function(){a(this).toggleClass("om-state-hover")}).bind("focus blur",function(){a(this).toggleClass("om-state-focus")}).bind("mousedown mouseup",function(){a(this).toggleClass("om-state-mousedown")}).click(function(i){a.omMessageTip._close(c);return false});g.slideDown("slow");var h;function f(i){h=setTimeout(function(){a.omMessageTip._close(c)},i)}if(d.timeout){f(d.timeout)}g.bind("mouseover",function(){clearTimeout(h)}).bind("mouseout",function(){if(h){f(d.timeout)}});return g},_close:function(c){c.d.slideUp("slow");if(c.l){c.l()}setTimeout(function(){c.d.remove()},1000)}}}(jQuery));(function(a){var b=function(e,h,f){var d=e.indexOf(".");if(isNaN(e)&&e!="."){for(;isNaN(e);){e=e.substring(0,e.length-1)}}if(!f.allowNegative&&e.indexOf("-")!=-1){var g=e.split("-");e=g.join("")}if(!f.allowDecimals&&d!=-1||e.charAt(e.length-1)==="."){return e.substring(0,d)}if(d!=-1){e=e.substring(0,d+f.decimalPrecision+1)}return e.length>0?parseFloat(e):""};a.omWidget("om.omNumberField",{options:{allowDecimals:true,allowNegative:true,decimalPrecision:2,disabled:false,onBlur:function(c){},readOnly:false},_create:function(){var d=this.options,c=this;this.element.addClass("om-numberfield om-widget om-state-default om-state-nobg").css("ime-mode","disabled");this.element.keypress(function(h){if(h.which==null&&(h.charCode!=null||h.keyCode!=null)){h.which=h.charCode!=null?h.charCode:h.keyCode}var f=h.which;if(f===8||(f==46&&h.button==-1)||f===0){return}var g=String.fromCharCode(f);a.data(this,"character",g);var i=a.data(this,"allowed");if(i.indexOf(g)===-1||(a(this).val().indexOf("-")!==-1&&g=="-")||(a(this).val().indexOf(".")!==-1&&g==".")){h.preventDefault()}}).focus(function(){a(this).addClass("om-state-focus")}).blur(function(g){a(this).removeClass("om-state-focus");var f=a.data(this,"character");this.value=b(this.value,f,d);c._trigger("onBlur",g,this.value)}).keydown(function(f){c._checkLast(this);if(229===f.which){f.preventDefault()}}).keyup(function(f){c._checkLast(this)}).bind("cut paste",function(f){return false})},_init:function(){var e=this.element,c=this.options;if(typeof c.disabled!=="boolean"){c.disabled=e.attr("disabled")}if(c.readOnly){e.attr("readonly","readonly")}var d=a.data(e[0],"character");this._buildAllowChars();if(c.disabled){this.disable()}else{this.enable()}},_checkLast:function(e){var d=e.value,c=d.length;if(d&&a.data(e,"allowed").indexOf(d.charAt(c-1))===-1||d.indexOf(".")!=d.lastIndexOf(".")||d.indexOf("-")!=d.lastIndexOf("-")){e.value=d=d.substring(0,(c--)-1)}},_buildAllowChars:function(){var c="0123456789";if(this.options.allowDecimals){c=c+"."}if(this.options.allowNegative){c=c+"-"}if(this.options.readOnly){c=""}a.data(this.element[0],"allowed",c)},disable:function(){this.element.attr("disabled",true).addClass("om-numberfield-disabled")},enable:function(){this.element.attr("disabled",false).removeClass("om-numberfield-disabled")}})})(jQuery);(function(a){a.omWidget("om.omSlider",{options:{autoPlay:true,interval:5000,directionNav:false,pauseOnHover:true,controlNav:true,activeNavCls:"nav-selected",effect:"fade",animSpeed:400,startSlide:0,delay:200,onBeforeSlide:function(b){},onAfterSlide:function(b){}},slideTo:function(b){opts=this.element.data("omSlider:opts");this._slideTo(this.element,b)},next:function(){opts=this.element.data("omSlider:opts");this._next(this.element)},prev:function(){opts=this.element.data("omSlider:opts");this._prev(this.element)},destroy:function(){var c=this.element,b=this.options,d=this._getSliderVars(c);clearTimeout(d.slideTimer);clearInterval(d.autoPlayTimer);if(d.customNav){a(b.controlNav).children().unbind(".omSlider").removeData("sid").removeClass(b.activeNavCls)}},_getSliderVars:function(b){return b.data("omSlider:vars")},_runSlideEffect:function(c,f,n){var h=this,g=this._getSliderVars(c),l=c.find("ul.om-slider-content:first"),j=l.children(),b=this.options,i=0,d=0;var m=n?n:b.effect;if(b.effect=="random"){l.addClass("om-slider-effect-"+m)}l.stop();if(m=="slide-v"||m=="slide-h"){var e=(m=="slide-v");if(b.effect=="random"){var k=0;j.each(function(o){if(o!==g.currentSlide){k-=(e?a(this).height():a(this).width())}else{return false}});l.css(e?"top":"left",k)}j.each(function(o){if(o==f){return false}e?i-=a(this).height():d-=a(this).width()})}else{return false}g.running=true;l.animate({top:i,left:d},b.animSpeed,function(){g.running=false;h._trigger("onAfterSlide",null,f)})},_runFadeEffect:function(f,d){var b=this,g=this._getSliderVars(f),c=f.find("ul.om-slider-content:first").children(),e=this.options;c.each(function(i){var h=a(this);if(i==d){g.running=true;h.fadeIn(e.animSpeed,function(){g.running=false;b._trigger("onAfterSlide",null,d)})}else{if(i==g.currentSlide){h.fadeOut(e.animSpeed)}}})},_runNoEffect:function(f,d){var b=this,g=this._getSliderVars(f),e=this.options,c=f.find("ul.om-slider-content:first").children();c.each(function(i){var h=a(this);if(i==d){h.show();b._trigger("onAfterSlide",null,d)}else{if(i==g.currentSlide){h.hide()}}})},_toggleControlNav:function(f,c){var g=this._getSliderVars(f);var e=this.options;var d=f;if(g.customNav){d=a("body")}var b=d.find(g.controlNav).children();b.each(function(h){a(this).toggleClass(e.activeNavCls,h==c)})},_slideTo:function(f,c){var g=this._getSliderVars(f),h=f.find("ul.om-slider-content:first");var e=this.options,b=this;if(isNaN(c)||c<0||c>=g.totalSlides){return}if(this._trigger("onBeforeSlide",null,c)===false){return false}if(e.effect=="random"){var i=["fade","slide-h","slide-v"];var d=i[Math.floor(Math.random()*3)];h.removeClass().addClass("om-slider-content");h.removeAttr("style");h.find("li").removeAttr("style");if(d=="slide-h"||d=="slide-v"){b._runSlideEffect(f,c,d)}else{b._runFadeEffect(f,c)}}else{if(e.effect=="slide-h"||e.effect=="slide-v"){b._runSlideEffect(f,c)}else{if(e.effect=="fade"||e.effect===true){b._runFadeEffect(f,c)}else{b._runNoEffect(f,c)}}}if(g.controlNav){b._toggleControlNav(f,c)}g.currentSlide=c;return f},_next:function(c){var d=this._getSliderVars(c),b=0;if(d.currentSlide+2<=d.totalSlides){b=d.currentSlide+1}return this._slideTo(c,b)},_prev:function(c){var d=this._getSliderVars(c),b=d.totalSlides-1;if(d.currentSlide!=0){b=d.currentSlide-1}return this._slideTo(c,b)},_processDirectionNav:function(d){var e=this._getSliderVars(d),c=a('<div class="om-slider-directionNav">').appendTo(d),b=this;a('<a class="om-slider-prevNav"></a>').appendTo(c).click(function(){if(e.running){return false}b._prev(d)});a('<a class="om-slider-nextNav"></a>').appendTo(c).click(function(){if(e.running){return false}b._next(d)});d.hover(function(){c.show()},function(){c.hide()})},_processControlNav:function(g){var h=this._getSliderVars(g),f=this.options,e=this,i;if(f.controlNav===true||f.controlNav==="classical"){var b=a('<ul class="om-slider-nav-classical"></ul>');h.controlNav=".om-slider-nav-classical";for(i=0;i<h.totalSlides;i++){var c=a("<li>"+(i+1)+"</li>");c.data("sid",i);var d=0;c.click(function(){e._slideTo(g,a(this).data("sid"))});c.hover(function(){if(h.running||h.stop){return false}var j=a(this);if(j.hasClass(f.activeNavCls)){return false}h.slideTimer=d=setTimeout(function(){e._slideTo(g,j.data("sid"))},f.delay)},function(){clearTimeout(d)});b.append(c)}g.append(b)}else{if(f.controlNav==="dot"){var b=a('<div class="om-slider-nav-dot"></div>');h.controlNav=".om-slider-nav-dot";for(i=0;i<h.totalSlides;i++){var c=a('<a href="javascript:void(0)">'+(i+1)+"</a>");c.data("sid",i);var d=0;c.click(function(){e._slideTo(g,a(this).data("sid"))});c.hover(function(){if(h.running||h.stop){return false}var j=a(this);if(j.hasClass(f.activeNavCls)){return false}h.slideTimer=d=setTimeout(function(){e._slideTo(g,j.data("sid"))},f.delay)},function(){clearTimeout(d)});b.append(c)}b.appendTo(g).css({marginLeft:-1*b.width()/2})}else{if(a(f.controlNav).length>0){h.controlNav=f.controlNav;h.customNav=true;var b=a(f.controlNav);b.children().each(function(l){var j=a(this);j.data("sid",l);var k=0;j.bind("click.omSlider",function(){e._slideTo(g,a(this).data("sid"))});j.bind("mouseover.omSlider",function(){if(h.running||h.stop){return false}var m=a(this);if(m.hasClass(f.activeNavCls)){return false}h.slideTimer=k=setTimeout(function(){e._slideTo(g,m.data("sid"))},f.delay)}).bind("mouseout.omSlider",function(){clearTimeout(k)})})}}}},_create:function(){var h=0;var g=this.element;var b=this;var e=this.options;var f={currentSlide:0,totalSlides:0,running:false,paused:false,stop:false,controlNav:".om-slider-nav-classical"};g.data("omSlider",g).data("omSlider:vars",f).data("omSlider:opts",e).addClass("om-slider");if(e.startSlide>0){f.currentSlide=e.startSlide}var d=g.children();d.wrapAll('<ul class="om-slider-content"></ul>').wrap('<li class="om-slider-item"></li>');if(e.effect=="slide-v"||e.effect=="slide-h"){g.find(".om-slider-content").addClass("om-slider-effect-"+e.effect)}f.totalSlides=d.length;this._processControlNav(g);function c(k,j){if(isNaN(j)||j<0||j>=f.totalSlides){return}var n=k.find("ul.om-slider-content:first"),i=n.children(),m=0,l=0;if(e.effect=="slide-h"){i.each(function(o){if(o==j){return false}l-=a(this).width()});setTimeout(function(){n.css({left:l,top:m})},0)}else{if(e.effect=="slide-v"){i.each(function(o){if(o==j){return false}m-=a(this).height()});setTimeout(function(){n.css({left:l,top:m})},0)}else{n.children().eq(j).show()}}if(f.controlNav){b._toggleControlNav(k,j)}if(e.autoPlay){f.autoPlayTimer=h=setInterval(function(){b._next(k)},e.interval)}if(e.pauseOnHover){k.hover(function(){f.paused=true;clearInterval(h)},function(){f.paused=false;if(e.autoPlay){f.autoPlayTimer=h=setInterval(function(){b._next(k)},e.interval)}})}if(e.directionNav){b._processDirectionNav(k)}}if(e.startSlide>0&&(e.effect=="slide-h"||e.effect=="slide-v")){a(window).load(function(){c(g,e.startSlide)})}else{c(g,e.startSlide)}}})})(jQuery);(function(c){var a="om-suggestion-list-row";var b="om-state-hover";c.omWidget("om.omSuggestion",{options:{disabled:false,readOnly:false,minChars:1,delay:500,cacheSize:10,method:"GET",listMaxHeight:300,queryName:"key",crossDomain:false,preProcess:function(e,d){return d},onBeforeSuggest:function(e,d){},onSuggesting:function(e,d){},onSuccess:function(e,f,d){},onError:function(f,g,e,d){},onSelect:function(f,g,d,e){}},_create:function(){this.element.addClass("om-suggestion om-widget om-state-default om-state-nobg");this.dropList=c('<div class="om-widget"><div class="om-widget-content om-droplist"></div></div>').css({position:"absolute",zIndex:2000}).appendTo(document.body).children().first().hide()},_init:function(){var d=this,e=this.options,g=this.element.attr("autocomplete","off"),f=this.dropList;if(e.minChars<0){e.minChars=0}if(e.cacheSize<0){e.cacheSize=0}if(e.delay<0){e.delay=0}e.disabled?this.disable():this.enable();e.readOnly?g.attr("readonly","readonly"):g.removeAttr("readonly");g.focus(function(){c(this).addClass("om-state-focus")}).blur(function(){c(this).removeClass("om-state-focus")}).keydown(function(h){if(h.keyCode==c.om.keyCode.TAB){f.hide()}}).keyup(function(j){var i=j.keyCode,k=c.om.keyCode;switch(i){case k.DOWN:if(f.css("display")!=="none"){d._selectNext()}else{if(f.find("."+a).size()>0){f.show()}}break;case k.UP:if(f.css("display")!=="none"){d._selectPrev()}else{if(f.find("."+a).size()>0){f.show()}}break;case k.ENTER:if(f.css("display")==="none"){return}f.hide();d._triggerOnSelect(j);return false;case k.ESCAPE:f.hide();break;case k.TAB:break;default:if(e.disabled||e.readOnly){return false}if(e.delay>0){var h=c.data(g,"delayTimer");if(h){clearTimeout(h)}h=setTimeout(function(){d._suggest()},e.delay);c.data(g,"delayTimer",h)}else{d._suggest()}}}).mousedown(function(h){h.stopPropagation()});f.mousedown(function(h){h.stopPropagation()});c(document).bind("mousedown.omSuggestion",this.globalEvent=function(){f.hide()})},clearCache:function(){c.removeData(this.element,"cache")},showMessage:function(f){var g=this.element;var e=this.dropList.empty().css("height","auto");c("<div>"+f+"<div>").appendTo(e);e.parent().css("left",g.offset().left).css("top",g.offset().top+g.outerHeight());var h=this.options.listWidth;if(!h){e.parent().width(g.outerWidth())}else{if(h!=="auto"){e.parent().width(h)}}e.show();var d=this.options.listMaxHeight;if(d!=="auto"){if(e.height()>d){e.height(d).css("overflow","auto")}}return this},disable:function(){this.options.disabled=true;return this.element.attr("disabled","disabled").addClass("om-state-disabled")},enable:function(){this.options.disabled=false;return this.element.removeAttr("disabled").removeClass("om-state-disabled")},setData:function(e){var d=this.options;if(e){d.dataSource=e}if(d.cacheSize>0){this.clearCache()}},getData:function(){var d=c.data(this.element,"records");return d||null},getDropList:function(){return this.dropList},destroy:function(){c(document).unbind("mousedown.omSuggestion",this.globalEvent);this.dropList.parent().remove()},_clear:function(){this.element.val("");return this.dropList.find("."+a).removeClass(b)},_selectNext:function(){var e=this.dropList,d=e.find("."+b).index(),f=this._clear();d+=1;if(d>=f.size()){d=0}this._scrollToAndSelect(f,d,e)},_selectPrev:function(){var e=this.dropList,d=e.find("."+b).index(),f=this._clear();d-=1;if(d<0){d=f.size()-1}this._scrollToAndSelect(f,d,e)},_scrollToAndSelect:function(g,d,f){if(g.size()<1){return}var h=c(g.get(d)).addClass(b);var e=h.position().top;if(e<=0){f.scrollTop(f.scrollTop()+e)}else{var i=e+h.outerHeight()-f.height();if(i>0){f.scrollTop(f.scrollTop()+i)}}this._select(d)},_select:function(e){var g=this.element;var d=c.data(g,"records");var f,h;if(d.valueField){f=d.data[e];h=f[d.valueField]}else{f=d[e];h=f}g.val(h);c.data(g,"lastStr",h)},_suggest:function(){var g=this.element;var i=g.val();var h=c.data(g,"lastStr");if(h&&h===i){return}c.data(g,"lastStr",i);var l=this.options;var d=c.data(g,"cache");if(i.length>0&&i.length>=l.minChars){if(d){var e=d[i];if(e){c.data(g,"records",e);this._buildDropList(e,i);return}}if(l.onBeforeSuggest){if(this._trigger("onBeforeSuggest",null,i)===false){this.dropList.empty().hide();return}}var k=this;var j={url:l.dataSource,type:l.method,dataType:l.crossDomain?"jsonp":"json",data:{},success:function(q,s){var r=l.onSuccess;if(r&&k._trigger("onSuccess",null,q,s)===false){return}var o=l.preProcess;if(o){q=o(i,q)}if(typeof q==="undefined"){q=[]}if(l.cacheSize>0){var n=c.data(g,"cache")||{___keys:[]};var p=n.___keys;if(p.length==l.cacheSize){var m=p[0];n.___keys=p.slice(1);n[m]=undefined}n[i]=q;n.___keys.push(i);c.data(g,"cache",n)}c.data(g,"records",q);k._buildDropList(q,i)},error:function(n,p,o){var m=l.onError;if(m){k._trigger("onError",null,n,p,o)}}};j.data[l.queryName]=i;c.ajax(j);var f=l.onSuggesting;if(f){k._trigger("onSuggesting",null,i)}}else{this.dropList.empty().hide()}},_buildDropList:function(e,k){var j=this.element;var d=this.dropList.empty().css("height","auto");var g=e.valueField?false:true;var l=this.options.clientFormatter;var m=this;if(g){if(l){c(e).each(function(n){m._addRow(l(this,n),d)})}else{c(e).each(function(n){m._addRow(this,d)})}}else{if(l){c(e.data).each(function(n){m._addRow(l(this,n),d)})}}var i=d.find("."+a);if(i.size()>0){d.parent().css("left",parseInt(j.offset().left)).css("top",j.offset().top+j.outerHeight());var h=this.options.listWidth;if(!h){d.parent().width(j.outerWidth())}else{if(h!=="auto"){d.parent().width(h)}}i.mouseover(function(){i.removeClass(b);c(this).addClass(b)}).mousedown(function(o){var n=d.find("."+b).index();m._select(n);d.hide();m._triggerOnSelect(o)});d.show();var f=this.options.listMaxHeight;if(f!=="auto"){if(d.height()>f){d.height(f).css("overflow","auto")}}d.scrollTop(0)}},_addRow:function(e,d){c('<div class="'+a+'">'+e+"</div>").appendTo(d)},_triggerOnSelect:function(g){var f=this.options.onSelect;if(f){var e=this.dropList.find("."+b).index();if(e<0){return}var d=c.data(this.element,"records"),h,i;if(d.valueField){h=d.data[e];i=h[d.valueField]}else{h=d[e];i=h}this._trigger("onSelect",g,h,i,e)}}})})(jQuery);(function(){var f="om-tabs-"+(((1+Math.random())*65536)|0).toString(16).substring(1)+"-",e=0;var b="om-tabs-activated om-state-active",c="om-tabs-scroll-disabled";function a(h,g){if(g.content){$(h).html(g.content)}return $(h).omPanel(g)}function d(){return $.browser.msie&&parseInt($.browser.version)==7}$.omWidget("om.omTabs",{options:{width:"auto",height:"auto",border:true,tabWidth:"auto",tabHeight:27,scrollable:true,closable:false,position:"top",switchMode:"click",autoPlay:false,interval:1000,active:0,lazyLoad:false,tabMenu:false,onBeforeActivate:function(h,g){},onActivate:function(h,g){},onBeforeClose:function(h,g){},onClose:function(h,g){},onBeforeCloseAll:function(g){},onCloseAll:function(){},onAdd:function(g,h){},onBeforeAdd:function(g,h){},onLoadComplete:function(g,h){}},add:function(g){this._add(g)},close:function(g){this._close(g)},closeAll:function(){this._closeAll()},activate:function(g){this._activate(g)},getAlter:function(g){return this._getAlter(g)},getActivated:function(){return this._getActivated()},getLength:function(){return this._getLength()},setDataSource:function(g){if(g.index===undefined||(!g.url&&!g.content)){return}this._setDataSource(g)},reload:function(h,g,i){this._reload(h,g,i)},doLayout:function(){this._doLayout()},_create:function(){this._makeSketch();this._collectItems();this.history=[]},_init:function(){this._render();this._afterRender();this._buildEvent()},_makeSketch:function(){this.element.addClass("om-tabs om-widget om-widget-content om-corner-all").append('<div class="om-tabs-panels om-widget-content om-corner-bottom" />').find(">ul").wrap('<div class="om-tabs-headers om-helper-reset om-helper-clearfix om-widget-header om-corner-all" />');this.$menu=$("<div></div>").appendTo($("body"))},_collectItems:function(){var g=this,k=this.element,j=this.options,i=[],h=[];k.find(">div.om-tabs-headers a").each(function(){var m=this.getAttribute("href",2);var q=m.split("#")[0],s;if(q&&(q===location.toString().split("#")[0]||(s=$("base")[0])&&q===s.href)){m=this.hash;this.href=m}var o=$(this);var n=o.attr("tabId")||o.attr("id")||f+e++;o.attr("tabId",n);var l={tabId:n,title:o.text(),_closeMode:"visibility",header:false,closed:true,onSuccess:function(t,v,u){g._trigger("onLoadComplete",null,l.tabId)},onError:function(u,v,t){g._trigger("onLoadComplete",null,l.tabId)}};var r=$(">"+m,k)[0];if(!r&&m.indexOf("#")!=0){if(j.lazyLoad===false){l.url=m}else{h.push({tabId:n,url:m,loaded:false})}}var p=new a(r||$("<div></div>")[0],l);i.push(p)});$lis=k.find(">div.om-tabs-headers ul li");$('<span class="left-placeholder"></span>').insertBefore($lis.eq(0));$('<span class="right-placeholder"></span>').insertAfter($lis.eq($lis.length-1));if(h.length>0){this.loadInfo=h}this.items=i},_render:function(){var h=this,l=this.element,j=this.options,g=this.items,k=l.find(">div.om-tabs-headers");if(typeof j.active=="number"){if(j.active<0){j.active=0}if(j.active>g.length-1){j.active=g.length-1}}if(j.border!==false){l.children(":first").addClass("header-no-border")}if(j.width=="fit"){l.outerWidth(l.parent().width())}else{if(j.width!="auto"){l.css("width",j.width);var m=isNaN(j.width)&&j.width.indexOf("%")!=-1;l.children(":first").outerWidth(m?"100%":j.width)}}if(j.height=="fit"){l.outerHeight(l.parent().height())}else{if(j.height!="auto"){l.css("height",j.height)}}if(j.closable&&j.tabMenu&&$.fn.omMenu){var i=l.attr("id");this.menu=this.$menu.omMenu({contextMenu:true,dataSource:[{id:i+"_001",label:"关闭"},{id:i+"_002",label:"关闭其它"},{id:i+"_003",label:"关闭所有"}],onSelect:function(n,o){if(n.id==i+"_001"){h.close(h.getAlter($(h.$currentLi).find("a.om-tabs-inner").attr("tabid")))}else{if(n.id==i+"_002"){k.find("ul li").each(function(q,r){var p=$(h.$currentLi).find("a.om-tabs-inner").attr("tabid");var s=$(r).find("a.om-tabs-inner").attr("tabid");if(p===s){return}h.close(h.getAlter(s))})}else{if(n.id==i+"_003"){h.closeAll()}}}}})}this._renderHeader();this._renderBody()},_renderHeader:function(){var j=this.element,g=this.options,h=this.history;$headers=j.find(">div.om-tabs-headers"),$lis=$headers.find("ul li");$lis.addClass("om-state-default om-corner-top");$lis.each(function(l){var k=$(this).find("a:first");if(d()){k.attr("hideFocus","true")}k.addClass("om-tabs-inner");if(l===g.active||g.active===k.attr("tabId")){$(this).addClass(b);g.activeTabId=k.attr("tabId");g.active=l;if(!$.inArray(g.activeTabId,h)){h.push(g.activeTabId)}}else{$(this).removeClass(b)}k.css({width:g.tabWidth,height:g.tabHeight});$('<span class="lileft"></span>').insertBefore(k);if(g.closable===true||($.isArray(g.closable)&&-1!==$.inArray(l,g.closable))){if(k.next(".om-icon-close").length<=0){$('<a class="om-icon om-icon-close"></a>').insertAfter(k)}$('<span class="liright"></span>').insertAfter(k.next(".om-icon-close"))}else{k.next().remove();$('<span class="liright"></span>').insertAfter(k)}});var i=$lis.find("a.om-tabs-inner").height();$lis.parent().css({height:++i,"line-height":i+"px"});$headers.height(i);this._checkScroller()&&this._enableScroller()},_renderBody:function(){var n=this.element,j=this.options,h=this.items,m=n.find(">div.om-tabs-panels");m.children().detach();if(j.height!=="auto"){var g=n.innerHeight(),l=n.find(">div.om-tabs-headers").outerHeight();m.css("height",g-l)}n.toggleClass("om-tabs-noborder",!j.border);var k=h.length;while(k--){h[k].addClass("om-state-nobd").parent().prependTo(m)}},_afterRender:function(){var n=this.element,k=this.options,h=this.items;var l=h.length;n.children().each(function(){$(this).is(".om-tabs-headers,.om-tabs-panels")||$(this).remove()});if(!k.lazyLoad){$(h).omPanel("reload")}else{var g=$(h[k.active]);var m=g.omPanel("option","tabId");var j=this._getUnloadedUrl(m);g.omPanel("open");g.omPanel("reload",j);this._removeLoadInfo(m)}while(l--){var g=$(h[l]);if(l==k.active){g.omPanel("open")}else{g.omPanel("close")}}n.css("height",n.height());n.css("height",k.height)},_buildEvent:function(){var j=this,n=this.element,g=this.options,h=n.find(">div.om-tabs-headers a.om-icon-close");h.unbind("click.omtabs").bind("click.omtabs",function(p){var o=$(p.target).prev().attr("tabId");j._close(o);return false});var l=n.find(">div.om-tabs-headers a.om-tabs-inner");if(g.switchMode.indexOf("mouseover")!=-1){l.bind("mouseover.omtabs",function(){var o=$(this).attr("tabId"),p=$.data(n,"activateTimer");(typeof p!=="undefined")&&clearTimeout(p);p=setTimeout(function(){j._activate(o);return false},100);$.data(n,"activateTimer",p)})}else{if(g.switchMode.indexOf("click")!=-1){l.bind("click.omtabs",function(){j._activate($(this).attr("tabId"))})}}l.bind("click.omtabs",function(){return false});if(g.autoPlay!=false){g.autoInterId=setInterval(function(){n.omTabs("activate","next")},g.interval)}else{clearInterval(g.autoInterId)}if(g.switchMode.indexOf("mouseover")==-1){var i=n.find(">div.om-tabs-headers li");var k=function(p,o){if(o.is(":not(.om-state-disabled)")){o.addClass("om-state-"+p)}};var m=function(p,o){o.removeClass("om-state-"+p)};i.bind("mouseover.omtabs",function(){k("hover",$(this))});i.bind("mouseout.omtabs",function(){m("hover",$(this))});if(g.closable&&g.tabMenu){i.each(function(o,p){$(p).bind("contextmenu",function(q){if($.fn.omMenu){j.$currentLi=this;$(j.menu).omMenu("show",q)}})})}}n.find(">div.om-tabs-headers >span").bind("click.omtabs",function(o){if($(this).hasClass("om-tabs-scroll-disabled")){return false}var p=$(this).parent().find("ul").children("li:last").outerWidth(true);if($(this).hasClass("om-tabs-scroll-left")){j._scroll(p,j._scrollCbFn())}if($(this).hasClass("om-tabs-scroll-right")){j._scroll(-p,j._scrollCbFn())}return false})},_purgeEvent:function(){var i=this.element,g=this.options;var h=i.find(">div.om-tabs-headers");h.children().unbind(".omtabs");h.find(">ul >li >a").unbind(".omtabs");if(g.autoInterId){clearInterval(g.autoInterId)}},_activate:function(s){var x=this.element,j=this.options,r=this.items,k;var o=x.find(">div.om-tabs-headers ul");if(j.activeTabId===s||j.active===s){return false}s=s||0;var p,w=s;if(s=="next"){s=(j.active+1)%r.length}else{if(s=="prev"){s=(j.active-1)%r.length}}if(typeof s=="number"){w=this._getAlter(s)}else{if(typeof s=="string"){s=this._getAlter(s)}}if(j.onBeforeActivate&&this._trigger("onBeforeActivate",null,s)===false){return false}p=o.find("li a[tabId="+w+"]");p.parent().addClass(b).siblings().removeClass(b);j.activeTabId=w;j.active=s;var u=r.length;for(u=r.length;u--;u>=0){var h=r[u];if(h.omPanel("option","tabId")==w){h.omPanel("open");if(k=this._getUnloadedUrl(w)){h.omPanel("reload",k);this._removeLoadInfo(w)}}}for(u=r.length;u--;u>=0){var h=r[u];if(h.omPanel("option","tabId")!=w){h.omPanel("close")}}if(this._checkScroller()){o.stop(true,true);x.clearQueue();var q=o.prev();var z=o.next();var t=p.parent().offset().left;var v=t+p.parent().outerWidth(true);var m=q.offset().left+q.outerWidth(true)+4-t;var g=z.offset().left-v;if(m>=0){this._scroll(m,this._scrollCbFn())}else{if(g<=0){this._scroll(g,this._scrollCbFn())}else{this._scrollCbFn()()}}}var y=this.history,l=$.inArray(w,y);l===-1?y.push(w):y.push(y.splice(l,1)[0]);j.onActivate&&this._trigger("onActivate",null,s)},_getUnloadedUrl:function(h){var j=this.loadInfo;for(var g in j){if(j[g].tabId===h&&j[g].loaded===false){return j[g].url}}return null},_removeLoadInfo:function(j){var h=this.loadInfo,g,i;if(h){g=h.length;while(i=h[--g]){if(i.tabId===j){h.splice(g,1);break}}}},_addLoadInfo:function(h,g){this.loadInfo.push({tabId:h,loaded:false,url:g})},_getAlter:function(i){var h=this.element,g;if(typeof i=="number"){g=h.find(">div.om-tabs-headers li:eq("+i+") a.om-tabs-inner").attr("tabId")}else{if(typeof i=="string"){h.find(">div.om-tabs-headers li a.om-tabs-inner").each(function(j){if($(this).attr("tabId")==i){g=j;return false}})}}return g===undefined?null:g},_getActivated:function(){return this.options.activeTabId},_add:function(i){var m=this,o=this.element,q=this.options,l=this.items;var j=o.find(">div.om-tabs-headers ul");var h=i.tabId?i.tabId:f+e++;i.index=i.index||"last";if(i.index=="last"||i.index>l.length-1){i.index=l.length}i.title=i.title||"New Title "+h;i.url=$.trim(i.url);i.content=$.trim(i.content);if(i.url){i.content=undefined}else{i.url=undefined;i.content=i.content||"New Content "+h}if(q.onBeforeAdd&&m._trigger("onBeforeAdd",null,i)==false){return false}var n=$('<li class="om-state-default om-corner-top"> </li>');var p=$('<a class="om-tabs-inner"></a>').html(i.title).attr({href:"#"+h,tabId:h}).css({width:q.tabWidth,height:q.tabHeight}).appendTo(n);$('<span class="lileft"></span>').insertBefore(p);if(d()){p.attr("hideFocus","true")}if((i.closable===true)||(i.closable==undefined&&q.closable)){p.after('<a class="om-icon om-icon-close"></a>');$('<span class="liright"></span>').insertAfter(p.next(".om-icon-close"))}else{$('<span class="liright"></span>').insertAfter(p)}var k={tabId:h,title:p.text(),_closeMode:"visibility",header:false,closed:true,onSuccess:function(r,t,s){m._trigger("onLoadComplete",null,h)},onError:function(s,t,r){m._trigger("onLoadComplete",null,h)}};$.extend(k,i);if(i.url&&(q.lazyLoad||i.lazyLoad)){m.loadInfo.push({tabId:h,url:i.url,loaded:false});k.url=null}var g=new a($("<div>"+(i.content||"")+"</div>")[0],k);if(i.index==l.length){l[i.index]=g;n.insertBefore(j.find("span.right-placeholder"))}else{l.splice(i.index,0,g);j.children().eq(i.index).before(n)}if(j.innerWidth()-n.position().left<500){j.width(j.width()+500)}this._checkScroller()&&this._enableScroller();l[i.index].addClass("om-state-nobd").parent().insertAfter(i.index>0?o.find(">div.om-tabs-panels").children().eq(i.index-1):0);this._purgeEvent();this._buildEvent();this._trigger("onAdd",null,k);if(!(i.activateNew===false)){this._activate(i.index)}},_close:function(m){var p=this.element,q=this.options,n=this.items,o=p.find(">div.om-tabs-headers"),h=p.find(">div.om-tabs-panels"),k=p.height(),j=m,g=this.history;m=(m===undefined?q.active:m);if(typeof m=="string"){m=this._getAlter(m)}else{j=this._getAlter(m)}if(q.onBeforeClose&&this._trigger("onBeforeClose",null,m)==false){return false}this._removeLoadInfo(this._getAlter(m));o.find("li").eq(m).remove();h.children().find(">.om-panel-body").eq(m).empty().remove();n.splice(m,1);if(h.children().length==0){h.css({height:k-o.outerHeight()})}for(var l=g.length-1;l>=0;l--){if(j===g[l]){g.splice(l,1);break}}q.onClose&&this._trigger("onClose",null,m);if(n.length==0){q.active=-1;q.activeTabId=null;return}else{if(m==q.active){q.active=-1;this._activate(g.length>0?g.pop():0)}else{m<q.active&&q.active--;this._checkScroller()&&this._enableScroller()}}},_closeAll:function(){var o=this.element,k=this.options,j=this.items,n=o.find(">div.om-tabs-headers"),m=o.find(">div.om-tabs-panels"),h=o.height();if(k.onBeforeCloseAll&&this._trigger("onBeforeCloseAll")===false){return false}for(var l=0,g=j.length;l<g;l++){this._removeLoadInfo(j[l].omPanel("option","tabId"))}n.find("li").remove();m.empty();j.splice(0,j.length);m.css({height:h-n.outerHeight()});k.active=-1;k.activeTabId=null;this.history=[];k.onCloseAll&&this._trigger("onCloseAll")},_checkScroller:function(){var l=this.element,k=this.options;if(!k.scrollable){return false}var j=l.find(">div.om-tabs-headers ul");var h=4;j.children().each(function(){h+=$(this).outerWidth(true)});if(h>j.parent().innerWidth()){if(!j.hasClass("om-tabs-scrollable")){var m=$("<span></span>").insertBefore(j).addClass("om-tabs-scroll-left");var i=$("<span></span>").insertAfter(j).addClass("om-tabs-scroll-right");var g=(j.height()-m.height())/2;j.addClass("om-tabs-scrollable")}return true}else{j.removeClass("om-tabs-scrollable").siblings().remove();return false}},_scrollCbFn:function(){var g=this;return function(){g._enableScroller()}},_enableScroller:function(){var n=this.element.find(">div.om-tabs-headers"),l=n.children("ul"),o=l.prev(),j=l.next(),m=l.children(":last"),g=n.offset().left,k=j.offset().left,h=l.offset().left,i=m.offset().left+m.outerWidth(true);o.toggleClass(c+" om-tabs-scroll-disabled-left",h>=g);j.toggleClass(c+" om-tabs-scroll-disabled-right",i<=k)},_scroll:function(k,i){var g=this;$self=this.element,$ul=$self.find(">div.om-tabs-headers ul"),$li=$ul.children(":last");if(k==0){return}var h=k>0?$ul.prev().offset():$ul.next().offset();var j=function(m){if(k>0&&$ul.prev().hasClass(c)||k<0&&$ul.next().hasClass(c)){$ul.stop(true,true);$self.clearQueue();return}var l=false;k=(k>0)?"+="+Math.min(h.left-$ul.offset().left,k):"-="+Math.min($li.offset().left+$li.outerWidth(true)-h.left,Math.abs(k));g.isScrolling=true;$ul.animate({left:k+"px"},"normal","swing",function(){!!i&&i();g.isScrolling=false;m()})};$self.queue(j);if($self.queue().length==1&&!g.isScrolling){$self.dequeue()}},_getLength:function(){return this.items.length},_doLayout:function(){this._checkScroller()&&this._enableScroller()},_setDataSource:function(j){var k=this.element,g=this.items,i=this.options,h=this._getAlter(j.index);j.url=$.trim(j.url);j.content=$.trim(j.content);if(j.url){if(i.lazyLoad!==false){this._addLoadInfo(h,j.url);g[j.index].omPanel("option","url",j.url)}else{this._removeLoadInfo(h);g[j.index].omPanel("reload",j.url)}}else{g[j.index].html(j.content)}},_reload:function(j,i,k){var l=this.element,g=this.items,h=this._getAlter(j);if(i){this._removeLoadInfo(h);g[j].omPanel("reload",i)}else{if(k){g[j].html(k)}else{g[j].omPanel("reload",this._getUnloadedUrl(h));this._removeLoadInfo(h)}}}})})(jQuery);(function(a){var b={open:"open",closed:"closed",expandable:"expandable",expandableHitarea:"expandable-hitarea",lastExpandableHitarea:"lastExpandable-hitarea",collapsable:"collapsable",collapsableHitarea:"collapsable-hitarea",lastCollapsableHitarea:"lastCollapsable-hitarea",lastCollapsable:"lastCollapsable",lastExpandable:"lastExpandable",last:"last",hitarea:"hitarea"};a.omWidget("om.omTree",{_swapClass:function(f,e,d){var c=f.filter("."+e);f.filter("."+d).removeClass(d).addClass(e);c.removeClass(e).addClass(d)},_getParentNode:function(d){if(d){var c=a(d).parent().parent();if(c&&c.hasClass("om-tree-node")){return c}}return null},_setParentCheckbox:function(e){var h=this._getParentNode(e);if(h){var g=h.find(">ul >li >div.tree-checkbox");var c=g.length;var i=g.filter(".checkbox_full").length;var d=g.filter(".checkbox_part").length;var f=h.find(">div.tree-checkbox");f.removeClass("checkbox_full checkbox_part");if(i==c){f.addClass("checkbox_full")}else{if(i>0||d>0){f.addClass("checkbox_part")}}this._setParentCheckbox(h)}},_setChildCheckbox:function(d,c){var e=d.find(">ul").find(".tree-checkbox");e.removeClass("checkbox_part checkbox_full");if(c){e.addClass("checkbox_full")}},_applyEvents:function(f){var j=this,k=j.options,h=k.onClick,d=k.onDblClick,i=k.onRightClick,e=k.onDrag,g=k.onSelect,c=k.onDrop;f.find("span").bind("click",function(m){var l=j.element.data("nodes")[a(this).parent().attr("id")];h&&j._trigger("onClick",m,l);j.select(l);return false}).bind("dblclick",function(n){var l=a(this).parent();var m=j.element.data("nodes")[l.attr("id")];if(l.hasClass("hasChildren")){l.find("span.folder").removeClass("folder").addClass("placeholder")}if(l.has("ul").length>0&&a(n.target,this)){j.toggler(l)}l.find("span.placeholder").removeClass("placeholder").addClass("folder");d&&j._trigger("onDblClick",n,m)}).bind("contextmenu",function(m){var l=j.element.data("nodes")[a(this).parent().attr("id")];i&&j._trigger("onRightClick",m,l)}).bind("mouseover mouseout",function(l){if(l.type=="mouseover"){a(this).addClass("hover")}else{if(l.type=="mouseout"){a(this).removeClass("hover")}}return false});j._bindHitEvent(f);f.find("div.tree-checkbox").click(function(n){var m=a(this).parent();var l=j.findByNId(m.attr("id"));j._toggleCheck(m,j.isCheck(l))});if(j.options.draggable){f.omDraggable({revert:"invalid",onStart:function(m,n){var l=j.findByNId(m.helper.attr("id"));e&&j._trigger("onDrag",n,l)}});f.omDroppable({greedy:true,accept:"li.om-tree-node",onDragOver:function(n,m){var l=f.filter(".treenode-droppable");if(l.length>0){l.removeClass("treenode-droppable")}else{a(this).addClass("treenode-droppable")}},onDragOut:function(m,l){a(this).removeClass("treenode-droppable")},onDrop:function(l,n){var r,s,t=l;var m=this;var q=m.find(">ul");a(this).removeClass("treenode-droppable");t.css("left","");t.css("top","");var o=j.findByNId(m.attr("id"));var u=j.findByNId(t.attr("id"));if(m.has("ul").length>0){r=o}else{s=o;u.pid=o.pid}var p=j.findByNId(t.parent().find("li").attr("id"));j.remove(u);j.insert(u,r,s,true);c&&j._trigger("onDrop",n,p)}})}f.bind("mousedown",function(l){l.stopPropagation()})},_bindHitEvent:function(d){var c=this;d.find("div.hitarea").click(function(){var e=a(this).parent();if(e.hasClass("hasChildren")){e.find("span.folder").removeClass("folder").addClass("placeholder")}c.toggler(e);e.find("span.placeholder").removeClass("placeholder").addClass("folder")})},options:{initExpandLevel:0,lineHover:false,showIcon:true,showLine:true,showCheckbox:false,cascadeCheck:true,draggable:false,filter:null,nodeCount:0,simpleDataModel:false},_create:function(){this.element.data("nodes",[]).data("selected","").data("init_dataSource",[]).addClass("om-tree om-widget")},updateNode:function(f){var d=this,e=d.options;var c=f.find("li");d._applyEvents(c);if(e.control){d._treeController(d,e.control)}},toggler:function(f){var j=this,k=j.options;var c=f.attr("id");var d=j.findByNId(c);var e=f.hasClass(b.expandable);if(e){var i=k.onBeforeExpand;if(i&&false===j._trigger("onBeforeExpand",null,d)){return j}}else{var g=k.onBeforeCollapse;if(g&&false===j._trigger("onBeforeCollapse",null,d)){return j}}var h=f.find(f.find(">.hitarea"));j._swapClass(h,b.collapsableHitarea,b.expandableHitarea);j._swapClass(h,b.lastCollapsableHitarea,b.lastExpandableHitarea);j._swapClass(f,b.collapsable,b.expandable);j._swapClass(f,b.lastCollapsable,b.lastExpandable);f.find(">ul").each(function(){if(e){a(this).show();var m=k.onExpand;m&&j._trigger("onExpand",null,d)}else{a(this).hide();var l=k.onCollapse;l&&j._trigger("onCollapse",null,d)}})},_init:function(){var c=this,d=c.options,f=c.element,e=d.dataSource;f.empty();if(e){if(typeof e=="string"){c._ajaxLoad(f,e)}else{if(typeof e=="object"){if(d.simpleDataModel){e=c._transformToNodes(e)}f.data("init_dataSource",e);c._appendNodes.apply(c,[f,e]);c.updateNode(f)}}}},_ajaxLoad:function(h,e){var c=this,d=this.options,g=d.onBeforeLoad,i=d.onSuccess,f=d.onError;g&&c._trigger("onBeforeLoad",null,c.findByNId(h.parent().attr("id")));a.ajax({url:e,method:"POST",dataType:"json",cache:false,success:function(j){if(d.simpleDataModel){j=c._transformToNodes(j)}h.data("init_dataSource",j);c._appendNodes.apply(c,[h,j]);c.updateNode(h);i&&c._trigger("onSuccess",null,j)},error:function(j,l,k){f&&c._trigger("onError",null,j,l,k)}})},check:function(c){this._toggleCheck(a("#"+c.nid),false)},uncheck:function(c){this._toggleCheck(a("#"+c.nid),true)},_toggleCheck:function(h,f){var g=h.find(">div.tree-checkbox"),c=this,d=c.options,e=d.onCheck;if(f){g.removeClass("checkbox_part checkbox_full")}else{g.removeClass("checkbox_part").addClass("checkbox_full")}if(c.options.cascadeCheck){c._setChildCheckbox(h,!f);c._setParentCheckbox(h)}e&&c._trigger("onCheck",null,c.findByNId(h.attr("id")))},checkAll:function(c){if(c){this.element.find(".tree-checkbox").removeClass("checkbox_part").addClass("checkbox_full")}else{this.element.find(".tree-checkbox").removeClass("checkbox_part checkbox_full")}},isCheck:function(c){return a("#"+c.nid).find(">div.tree-checkbox").hasClass("checkbox_full")},getChecked:function(f){var d=this,c=[];var e=f?".checkbox_full":":not(.checkbox_full)";this.element.find(".tree-checkbox").filter(e).each(function(h,g){c.push(d.element.data("nodes")[a(this).parent().attr("id")])});return c},select:function(i){var d=this,g=this.options,f=g.onBeforeSelect,e=g.onSelect;if(f&&false===d._trigger("onBeforeSelect",null,i)){return d}var h=a("#"+i.nid);a(" >span",h).addClass("selected");var j=d.element.data("selected");var c=h.attr("id");if(j!=""&&!(j==c)){a("#"+j+" >span").removeClass("selected")}d.element.data("selected",c);e&&d._trigger("onSelect",null,i)},unselect:function(f){var d=this;var e=a("#"+f.nid);a(" >span",e).removeClass("selected");var g=d.element.data("selected");var c=e.attr("id");if(g==c){d.element.data("selected","")}},getSelected:function(){var c=this.element.data("selected");return c?this.element.data("nodes")[c]:null},findNodes:function(h,k,g,e){var d=[],c;var j=g?g.children:this.element.data("init_dataSource");e=(e!=false)?true:e;if(j&&(c=j.length)>0){for(var f=0;f<c;f++){d=this._searchNode.apply(j[f],[h,k,this._searchNode,d,false,e])}}return d.length>0?d:null},findNode:function(h,k,g,d){var f,c,j=g?g.children:this.element.data("init_dataSource");d=(d!=false)?true:d;if(j&&(c=j.length)>0){for(var e=0;e<c;e++){f=this._searchNode.apply(j[e],[h,k,this._searchNode,[],true,d]);if(f!=null){return f}}}return null},findByNId:function(c){return this.element.data("nodes")[c]||null},findNodesBy:function(h,g,d){var f,j=g?g.children:this.element.data("init_dataSource");d=(d!=false)?true:d;var c=[];if(j&&(len=j.length)>0){for(var e=0;e<len;e++){if(h.call(j[e],j[e])===true){c.push(j[e])}if(d&&j[e].children){f=this.findNodesBy(h,j[e],d);if(f){c=c.concat(f)}}}}return c.length>0?c:null},findNodeBy:function(h,g,d){var f,j=g?g.children:this.element.data("init_dataSource");d=(d!=false)?true:d;if(j&&(c=j.length)>0){for(var e=0,c=j.length;e<c;e++){if(h.call(j[e],j[e])===true){return j[e]}if(d){f=this.findNodeBy(h,j[e],d);if(f!=null){return f}}}}return null},_searchNode:function(h,k,f,c,j,d){if(j){if(this[h]==k){return this}if(this.children&&this.children.length&&d){for(var g in this.children){var e=f.apply(this.children[g],[h,k,f,[],true,d]);if(e){return e}}}}else{if(this[h]==k){c.push(this)}if(this.children&&this.children.length&&d){a.each(this.children,f,[h,k,f,c,false,d])}return c}},getParent:function(d){var c=this.element.data("nodes")["pid"+d.nid];return c?this.findByNId(c):null},getChildren:function(c){return c.children},getData:function(){return this.options.dataSource},setData:function(c){this.options.dataSource=c},expand:function(f){if(f.nid){var d=b.expandable,e=a("#"+f.nid);var c=a(">div."+b.hitarea,e).filter(function(){return d?a(this).parent("."+d).length:true}).parent().parentsUntil(this.element).andSelf().filter(function(){return a(this).filter("li").hasClass(d)});this.toggler(c)}},collapse:function(c){if(c.nid){this._collapseHandler(b.collapsable,a("#"+c.nid))}},expandAll:function(){this._collapseHandler(b.expandable,this.element,true)},collapseAll:function(){this._collapseHandler(b.collapsable,this.element,true)},_collapseHandler:function(d,e,c){var f=(c?"":">")+"div."+b.hitarea;this.toggler(a(f,e).filter(function(){return d?a(this).parent("."+d).length:true}).parent())},refresh:function(k){var g=this,e=g.element;var j=g.getData();if(!k){e.empty();if(typeof j=="string"){g._ajaxLoad(e,j)}else{if(typeof j=="object"){g.setData([]);for(var h=0,d=j.length;h<d;h++){g.insert(j[h])}}}}else{var c=a("#"+k.nid).next();var f=e.data("nodes")["pid"+k.nid];g.remove(k);g.insert(k,g.findByNId(f),g.findByNId(c.attr("id")))}},_transformToNodes:function(g){var e,c;if(!g){return[]}var f=[];var h=[];for(e=0,c=g.length;e<c;e++){h[g[e]["id"]]=g[e]}for(e=0,c=g.length;e<c;e++){if(h[g[e]["pid"]]){var d=g[e]["pid"];if(!h[d]["children"]){h[d]["children"]=[]}h[d]["children"].push(g[e])}else{f.push(g[e])}}return f},_appendNodes:function(v,m,e,f){var j=this,t=[];var g=j.options.showCheckbox;var c=j.element.attr("id")?j.element.attr("id"):("treeId"+parseInt(Math.random()*1000));j.element.attr("id",c);for(var q=0,o=m.length;q<o;q++){var n=m[q],k=(q==(m.length-1));var w="om-tree-node "+(g?"treenode-checkable ":"")+(n.hasChildren?"hasChildren ":"");var h=c+"_"+(++j.options.nodeCount);n.nid=h;var d=j.element.data("nodes");d[n.nid]=n;if(typeof v=="string"){d["pid"+n.nid]=v;if(k){v=null}}else{d["pid"+n.nid]=v.parent("li").attr("id")}var u=[];if(n.children&&n.children.length>0){u.push((j._appendNodes(n.nid,n.children)).join(""))}var r=0;if(n.children&&(r=n.children.length)>0||n.hasChildren){if(n.expanded){w=w+"open "+b.collapsable+" "+(k?b.lastCollapsable:"")}else{w=w+b.expandable+" "+(k?b.lastExpandable:"")}}else{w=w+(k?b.last:"")}t.push("<li id='",n.nid,"' class='",w,"'>");if(n.hasChildren||r>0){var s="";a.each(w.split(" "),function(){s+=this+"-hitarea "});t.push("<div class='",b.hitarea+" "+s,"'/>")}if(g){t.push("<div class='tree-checkbox'/>")}var p=(n.classes?n.classes:"");if(j.options.showIcon){if(n.hasChildren||n.children&&n.children.length>0){p=p+" folder "}else{p=p+" file "}}t.push("<span class='",p,"'>","<a href='#'>",n.text,"</a></span>");if(n.hasChildren||r>0){t.push("<ul"," style='display:",(n.expanded?"block":"none"),"'>");t.push(u.join(""));t.push("</ul>")}t.push("</li>")}if(e){if(f){a("#"+e.nid).after(t.join(""))}else{a("#"+e.nid).before(t.join(""))}}else{if(v){v.append(t.join(""))}}return t},remove:function(j,l){var k,m=this,f=l?l.children:m.element.data("init_dataSource");for(var g in f){if(f[g]==j){var c=[];c=m._findChildrenId(j,c);c.push(j.nid);for(var d=0,h=c.length;d<h;d++){delete m.element.data("nodes")[c[d]];delete m.element.data("nodes")["pid"+c[d]]}if(j.nid==m.element.data("selected")){this.element.data("selected",null)}var e=a("#"+j.nid).prev();if(a("#"+j.nid).next().length<1&&e.length>0){if(e.hasClass(b.collapsable)){e.addClass(b.lastCollapsable);e.find("div.hitarea").first().addClass(b.lastCollapsableHitarea)}else{if(e.hasClass(b.expandable)){e.addClass(b.lastExpandable);e.find("div.hitarea").first().addClass(b.lastExpandableHitarea)}else{e.addClass(b.last)}}}a("#"+j.nid).remove();f.splice(g,1);if(l&&l.nid&&f.length<1){m._changeToFolderOrFile(l,false)}return true}else{if(f[g].children){k=m.remove(j,f[g]);if(k){return true}}}}return false},_findChildrenId:function(g,f){if(g.children){for(var e=0,d=g.children,c=d.length;e<c;e++){f.push(d[e].nid);if(d[e].children){this._findChildrenId(d[e],f)}}}return f},insert:function(j,o,c,l){if(!j){return}var p=this,d=[],n,h,k=a.isArray(j);if(k){d=j}else{d.push(j)}if(c){o=o||p.findByNId(p.element.data("nodes")["pid"+c.nid])}var i,g=o?o.children:p.element.data("init_dataSource");if(o&&(!o.children||o.children.length<1)){if(!o.hasChildren){p._changeToFolderOrFile(o,true);p._bindHitEvent(a("#"+o.nid))}g=o.children=[]}n=o?a("#"+o.nid).children("ul").first():p.element;h=n.find("li");if(c&&((i=a.inArray(c,g))>=0)){p._appendNodes(n,d,c,l);g.splice(i,0,j)}else{p._appendNodes(n,d,c,l);if(k){a.merge(g,j)}else{g.push(j)}}var f=n.find("li").filter("."+b.last+",."+b.lastCollapsable+",."+b.lastExpandable).not(n.find("li").filter(":last-child:not(ul)"));f.removeClass(b.last+" "+b.lastCollapsable+" "+b.lastExpandable);f.find(" >div").removeClass(b.lastCollapsableHitarea+" "+b.lastExpandableHitarea);var e=n.find("li").not(h);p._applyEvents(e)},_changeToFolderOrFile:function(g,h){var f=a("#"+g.nid),d=this;if(h){var e=a("<ul/>").css("display","block").appendTo(f);f.addClass("open "+b.collapsable);d._swapClass(f,b.last,b.lastCollapsable);g.children=[]}else{f.find("ul").remove();f.find("div."+b.hitarea).remove();f.filter("."+b.lastCollapsable+",."+b.lastExpandable).removeClass(b.lastCollapsable+" "+b.lastExpandable).addClass(b.last);f.removeClass("open "+b.collapsable+" "+b.expandable)}if(d.options.showIcon){d._swapClass(f.children("span"),"file","folder")}var c=f.filter(":has(>ul)").prepend('<div class="'+b.hitarea+'"/>').find("div."+b.hitarea);c.each(function(){var i="";a.each(a(this).parent().attr("class").split(" "),function(){i+=this+"-hitarea "});a(this).addClass(i)})},modify:function(h,f,e){if(h&&f){var d=this,c=a("#"+h.nid).next(),g;e=e||this.findByNId(d.element.data("nodes")["pid"+h.nid]);if(c.is("ul")||c.is("li")){g=d.findByNId(c.attr("id"))}d.remove(h,e);d.insert(f,e,g)}},disable:function(){},enable:function(){}})})(jQuery);(function(a){a.extend(a.fn,{validate:function(b){if(!this.length){b&&b.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing");return}var c=a.data(this[0],"validator");if(c){return c}c=new a.validator(b,this[0]);a.data(this[0],"validator",c);if(c.settings.onsubmit){this.find("input, button").filter(".cancel").click(function(){c.cancelSubmit=true});if(c.settings.submitHandler){this.find("input, button").filter(":submit").click(function(){c.submitButton=this})}this.submit(function(d){if(c.settings.debug){d.preventDefault()}function e(){if(c.settings.submitHandler){if(c.submitButton){var f=a("<input type='hidden'/>").attr("name",c.submitButton.name).val(c.submitButton.value).appendTo(c.currentForm)}c.settings.submitHandler.call(c,c.currentForm);if(c.submitButton){f.remove()}return false}return true}if(c.cancelSubmit){c.cancelSubmit=false;return e()}if(c.form()){if(c.pendingRequest){c.formSubmitted=true;return false}return e()}else{c.focusInvalid();return false}})}return c},valid:function(){if(a(this[0]).is("form")){return this.validate().form()}else{var c=true;var b=a(this[0].form).validate();this.each(function(){c&=b.element(this)});return c}},removeAttrs:function(d){var b={},c=this;a.each(d.split(/\s/),function(e,f){b[f]=c.attr(f);c.removeAttr(f)});return b},rules:function(e,b){var g=this[0];if(e){var d=a.data(g.form,"validator").settings;var i=d.rules;var j=a.validator.staticRules(g);switch(e){case"add":a.extend(j,a.validator.normalizeRule(b));i[g.name]=j;if(b.messages){d.messages[g.name]=a.extend(d.messages[g.name],b.messages)}break;case"remove":if(!b){delete i[g.name];return j}var h={};a.each(b.split(/\s/),function(k,l){h[l]=j[l];delete j[l]});return h}}var f=a.validator.normalizeRules(a.extend({},a.validator.metadataRules(g),a.validator.classRules(g),a.validator.attributeRules(g),a.validator.staticRules(g)),g);if(f.required){var c=f.required;delete f.required;f=a.extend({required:c},f)}return f}});a.extend(a.expr[":"],{blank:function(b){return !a.trim(""+b.value)},filled:function(b){return !!a.trim(""+b.value)},unchecked:function(b){return !b.checked}});a.validator=function(b,c){this.settings=a.extend(true,{},a.validator.defaults,b);this.currentForm=c;this.init()};a.validator.format=function(b,c){if(arguments.length==1){return function(){var d=a.makeArray(arguments);d.unshift(b);return a.validator.format.apply(this,d)}}if(arguments.length>2&&c.constructor!=Array){c=a.makeArray(arguments).slice(1)}if(c.constructor!=Array){c=[c]}a.each(c,function(d,e){b=b.replace(new RegExp("\\{"+d+"\\}","g"),e)});return b};a.extend(a.validator,{defaults:{validateOnEmpty:false,messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:true,focusCleanup:false,errorContainer:a([]),errorLabelContainer:a([]),onsubmit:true,ignore:[],ignoreTitle:false,onfocusin:function(b){this.lastActive=b;if(this.settings.focusCleanup&&!this.blockFocusCleanup){this.settings.unhighlight&&this.settings.unhighlight.call(this,b,this.settings.errorClass,this.settings.validClass);this.addWrapper(this.errorsFor(b)).hide()}},onfocusout:function(b){if(this.settings.validateOnEmpty){if(!this.checkable(b)||(b.name in this.submitted)){this.element(b)}}else{if(!this.checkable(b)&&(b.name in this.submitted||!this.optional(b))){this.element(b)}}},onkeyup:function(b){if(b.name in this.submitted||b==this.lastElement){this.element(b)}},onclick:function(b){if(b.name in this.submitted){this.element(b)}else{if(b.parentNode.name in this.submitted){this.element(b.parentNode)}}},highlight:function(d,b,c){if(d.type==="radio"){this.findByName(d.name).addClass(b).removeClass(c)}else{a(d).addClass(b).removeClass(c)}},unhighlight:function(d,b,c){if(d.type==="radio"){this.findByName(d.name).removeClass(b).addClass(c)}else{a(d).removeClass(b).addClass(c)}}},setDefaults:function(b){a.extend(a.validator.defaults,b)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",number:"Please enter a valid number.",digits:"Please enter only digits.",equalTo:"Please enter the same value again.",accept:"Please enter a value with a valid extension.",maxlength:a.validator.format("Please enter no more than {0} characters."),minlength:a.validator.format("Please enter at least {0} characters."),rangelength:a.validator.format("Please enter a value between {0} and {1} characters long."),range:a.validator.format("Please enter a value between {0} and {1}."),max:a.validator.format("Please enter a value less than or equal to {0}."),min:a.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:false,prototype:{init:function(){this.labelContainer=a(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||a(this.currentForm);this.containers=a(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var b=(this.groups={});a.each(this.settings.groups,function(e,f){a.each(f.split(/\s/),function(h,g){b[g]=e})});var d=this.settings.rules;a.each(d,function(e,f){d[e]=a.validator.normalizeRule(f)});function c(g){var f=a.data(this[0].form,"validator"),e="on"+g.type.replace(/^validate/,"");f.settings[e]&&f.settings[e].call(f,this[0])}a(this.currentForm).validateDelegate(":text, :password, :file, select, textarea","focusin focusout keyup",c).validateDelegate(":radio, :checkbox, select, option","click",c);if(this.settings.invalidHandler){a(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)}},form:function(){this.checkForm();a.extend(this.submitted,this.errorMap);this.invalid=a.extend({},this.errorMap);if(!this.valid()){a(this.currentForm).triggerHandler("invalid-form",[this])}this.showErrors();return this.valid()},checkForm:function(){this.prepareForm();for(var b=0,c=(this.currentElements=this.elements());c[b];b++){this.check(c[b])}return this.valid()},element:function(c){c=this.clean(c);this.lastElement=c;this.prepareElement(c);this.currentElements=a(c);var b=this.check(c);if(b){delete this.invalid[c.name]}else{this.invalid[c.name]=true}if(!this.numberOfInvalids()){this.toHide=this.toHide.add(this.containers)}this.showErrors();return b},showErrors:function(c){if(c){a.extend(this.errorMap,c);this.errorList=[];for(var b in c){this.errorList.push({message:c[b],element:this.findByName(b)[0]})}this.successList=a.grep(this.successList,function(d){return !(d.name in c)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){if(a.fn.resetForm){a(this.currentForm).resetForm()}this.submitted={};this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(d){var c=0;for(var b in d){c++}return c},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return this.size()==0},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid){try{a(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(b){}}},findLastActive:function(){var b=this.lastActive;return b&&a.grep(this.errorList,function(c){return c.element.name==b.name}).length==1&&b},elements:function(){var c=this,b={};return a(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){!this.name&&c.settings.debug&&window.console&&console.error("%o has no name assigned",this);if(this.name in b||!c.objectLength(a(this).rules())){return false}b[this.name]=true;return true})},clean:function(b){return a(b)[0]},errors:function(){return a(this.settings.errorElement+"."+this.settings.errorClass,this.errorContext)},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=a([]);this.toHide=a([]);this.currentElements=a([])},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers)},prepareElement:function(b){this.reset();this.toHide=this.errorsFor(b)},check:function(c){c=this.clean(c);if(this.checkable(c)){c=this.findByName(c.name).not(this.settings.ignore)[0]}var h=a(c).rules();var d=false;for(var i in h){var g={method:i,parameters:h[i]};try{var b=a.validator.methods[i].call(this,c.value.replace(/\r/g,""),c,g.parameters);if(b=="dependency-mismatch"){d=true;continue}d=false;if(b=="pending"){this.toHide=this.toHide.not(this.errorsFor(c));return}if(!b){this.formatAndAdd(c,g);return false}}catch(f){this.settings.debug&&window.console&&console.log("exception occured when checking element "+c.id+", check the '"+g.method+"' method",f);throw f}}if(d){return}if(this.objectLength(h)){this.successList.push(c)}return true},customMetaMessage:function(b,d){if(!a.metadata){return}var c=this.settings.meta?a(b).metadata()[this.settings.meta]:a(b).metadata();return c&&c.messages&&c.messages[d]},customMessage:function(c,d){var b=this.settings.messages[c];return b&&(b.constructor==String?b:b[d])},findDefined:function(){for(var b=0;b<arguments.length;b++){if(arguments[b]!==undefined){return arguments[b]}}return undefined},defaultMessage:function(b,c){return this.findDefined(this.customMessage(b.name,c),this.customMetaMessage(b,c),!this.settings.ignoreTitle&&b.title||undefined,a.validator.messages[c],"<strong>Warning: No message defined for "+b.name+"</strong>")},formatAndAdd:function(c,e){var d=this.defaultMessage(c,e.method),b=/\$?\{(\d+)\}/g;if(typeof d=="function"){d=d.call(this,e.parameters,c)}else{if(b.test(d)){d=jQuery.format(d.replace(b,"{$1}"),e.parameters)}}this.errorList.push({message:d,element:c});this.errorMap[c.name]=d;this.submitted[c.name]=d},addWrapper:function(b){if(this.settings.wrapper){b=b.add(b.parent(this.settings.wrapper))}return b},defaultShowErrors:function(){for(var c=0;this.errorList[c];c++){var b=this.errorList[c];this.settings.highlight&&this.settings.highlight.call(this,b.element,this.settings.errorClass,this.settings.validClass);this.showLabel(b.element,b.message)}if(this.errorList.length){this.toShow=this.toShow.add(this.containers)}if(this.settings.success){for(var c=0;this.successList[c];c++){this.showLabel(this.successList[c])}}if(this.settings.unhighlight){for(var c=0,d=this.validElements();d[c];c++){this.settings.unhighlight.call(this,d[c],this.settings.errorClass,this.settings.validClass)}}this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return a(this.errorList).map(function(){return this.element})},showLabel:function(c,d){var b=this.errorsFor(c);if(b.length){b.removeClass().addClass(this.settings.errorClass);b.attr("generated")&&b.html(d)}else{b=a("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(c),generated:true}).addClass(this.settings.errorClass).html(d||"");if(this.settings.wrapper){b=b.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()}if(!this.labelContainer.append(b).length){this.settings.errorPlacement?this.settings.errorPlacement(b,a(c)):b.insertAfter(c)}}if(!d&&this.settings.success){b.text("");typeof this.settings.success=="string"?b.addClass(this.settings.success):this.settings.success(b)}this.toShow=this.toShow.add(b)},errorsFor:function(c){var b=this.idOrName(c);return this.errors().filter(function(){return a(this).attr("for")==b})},idOrName:function(b){return this.groups[b.name]||(this.checkable(b)?b.name:b.id||b.name)},checkable:function(b){return/radio|checkbox/i.test(b.type)},findByName:function(b){var c=this.currentForm;return a(document.getElementsByName(b)).map(function(d,e){return e.form==c&&e.name==b&&e||null})},getLength:function(c,b){switch(b.nodeName.toLowerCase()){case"select":return a("option:selected",b).length;case"input":if(this.checkable(b)){return this.findByName(b.name).filter(":checked").length}}return c.length},depend:function(c,b){return this.dependTypes[typeof c]?this.dependTypes[typeof c](c,b):true},dependTypes:{"boolean":function(c,b){return c},string:function(c,b){return !!a(c,b.form).length},"function":function(c,b){return c(b)}},optional:function(b){return !a.validator.methods.required.call(this,a.trim(b.value),b)&&"dependency-mismatch"},startRequest:function(b){if(!this.pending[b.name]){this.pendingRequest++;this.pending[b.name]=true}},stopRequest:function(b,c){this.pendingRequest--;if(this.pendingRequest<0){this.pendingRequest=0}delete this.pending[b.name];if(c&&this.pendingRequest==0&&this.formSubmitted&&this.form()){a(this.currentForm).submit();this.formSubmitted=false}else{if(!c&&this.pendingRequest==0&&this.formSubmitted){a(this.currentForm).triggerHandler("invalid-form",[this]);this.formSubmitted=false}}},previousValue:function(b){return a.data(b,"previousValue")||a.data(b,"previousValue",{old:null,valid:true,message:this.defaultMessage(b,"remote")})}},classRuleSettings:{required:{required:true},email:{email:true},url:{url:true},date:{date:true},number:{number:true},digits:{digits:true},creditcard:{creditcard:true}},addClassRules:function(b,c){b.constructor==String?this.classRuleSettings[b]=c:a.extend(this.classRuleSettings,b)},classRules:function(c){var d={};var b=a(c).attr("class");b&&a.each(b.split(" "),function(){if(this in a.validator.classRuleSettings){a.extend(d,a.validator.classRuleSettings[this])}});return d},attributeRules:function(c){var e={};var b=a(c);for(var f in a.validator.methods){var d=b.attr(f);if(d){e[f]=d}}if(e.maxlength&&/-1|2147483647|524288/.test(e.maxlength)){delete e.maxlength}return e},metadataRules:function(b){if(!a.metadata){return{}}var c=a.data(b.form,"validator").settings.meta;return c?a(b).metadata()[c]:a(b).metadata()},staticRules:function(c){var d={};var b=a.data(c.form,"validator");if(b.settings.rules){d=a.validator.normalizeRule(b.settings.rules[c.name])||{}}return d},normalizeRules:function(c,b){a.each(c,function(f,e){if(e===false){delete c[f];return}if(e.param||e.depends){var d=true;switch(typeof e.depends){case"string":d=!!a(e.depends,b.form).length;break;case"function":d=e.depends.call(b,b);break}if(d){c[f]=e.param!==undefined?e.param:true}else{delete c[f]}}});a.each(c,function(d,e){c[d]=a.isFunction(e)?e(b):e});a.each(["minlength","maxlength","min","max"],function(){if(c[this]){c[this]=Number(c[this])}});a.each(["rangelength","range"],function(){if(c[this]){c[this]=[Number(c[this][0]),Number(c[this][1])]}});if(a.validator.autoCreateRanges){if(c.min&&c.max){c.range=[c.min,c.max];delete c.min;delete c.max}if(c.minlength&&c.maxlength){c.rangelength=[c.minlength,c.maxlength];delete c.minlength;delete c.maxlength}}if(c.messages){delete c.messages}return c},normalizeRule:function(c){if(typeof c=="string"){var b={};a.each(c.split(/\s/),function(){b[this]=true});c=b}return c},addMethod:function(b,d,c){a.validator.methods[b]=d;a.validator.messages[b]=c!=undefined?c:a.validator.messages[b];if(d.length<3){a.validator.addClassRules(b,a.validator.normalizeRule(b))}},methods:{required:function(c,b,e){if(!this.depend(e,b)){return"dependency-mismatch"}switch(b.nodeName.toLowerCase()){case"select":var d=a(b).val();return d&&d.length>0;case"input":if(this.checkable(b)){return this.getLength(c,b)>0}default:return a.trim(c).length>0}},remote:function(f,c,g){if(this.optional(c)){return"dependency-mismatch"}var d=this.previousValue(c);if(!this.settings.messages[c.name]){this.settings.messages[c.name]={}}d.originalMessage=this.settings.messages[c.name].remote;this.settings.messages[c.name].remote=d.message;g=typeof g=="string"&&{url:g}||g;if(this.pending[c.name]){return"pending"}if(d.old===f){return d.valid}d.old=f;var b=this;this.startRequest(c);var e={};e[c.name]=f;a.ajax(a.extend(true,{url:g,mode:"abort",port:"validate"+c.name,dataType:"json",data:e,success:function(i){b.settings.messages[c.name].remote=d.originalMessage;var k=i===true;if(k){var h=b.formSubmitted;b.prepareElement(c);b.formSubmitted=h;b.successList.push(c);b.showErrors()}else{var l={};var j=i||b.defaultMessage(c,"remote");l[c.name]=d.message=a.isFunction(j)?j(f):j;b.showErrors(l)}d.valid=k;b.stopRequest(c,k)}},g));return"pending"},minlength:function(c,b,d){return this.optional(b)||this.getLength(a.trim(c),b)>=d},maxlength:function(c,b,d){return this.optional(b)||this.getLength(a.trim(c),b)<=d},rangelength:function(d,b,e){var c=this.getLength(a.trim(d),b);return this.optional(b)||(c>=e[0]&&c<=e[1])},min:function(c,b,d){return this.optional(b)||c>=d},max:function(c,b,d){return this.optional(b)||c<=d},range:function(c,b,d){return this.optional(b)||(c>=d[0]&&c<=d[1])},email:function(c,b){return this.optional(b)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(c)},url:function(c,b){return this.optional(b)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(c)},date:function(c,b){return this.optional(b)||!/Invalid|NaN/.test(new Date(Date.parse(c.replace(/-/g,"/"))))},number:function(c,b){return this.optional(b)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(c)},digits:function(c,b){return this.optional(b)||/^\d+$/.test(c)},accept:function(c,b,d){d=typeof d=="string"?d.replace(/,/g,"|"):"png|jpe?g|gif";return this.optional(b)||c.match(new RegExp(".("+d+")$","i"))},equalTo:function(c,b,e){var d=a(e).unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){a(b).valid()});return c==d.val()}}});a.format=a.validator.format})(jQuery);(function(c){var a={};if(c.ajaxPrefilter){c.ajaxPrefilter(function(f,e,g){var d=f.port;if(f.mode=="abort"){if(a[d]){a[d].abort()}a[d]=g}})}else{var b=c.ajax;c.ajax=function(e){var f=("mode" in e?e:c.ajaxSettings).mode,d=("port" in e?e:c.ajaxSettings).port;if(f=="abort"){if(a[d]){a[d].abort()}return(a[d]=b.apply(this,arguments))}return b.apply(this,arguments)}}})(jQuery);(function(a){if(!jQuery.event.special.focusin&&!jQuery.event.special.focusout&&document.addEventListener){a.each({focus:"focusin",blur:"focusout"},function(c,b){a.event.special[b]={setup:function(){this.addEventListener(c,d,true)},teardown:function(){this.removeEventListener(c,d,true)},handler:function(f){arguments[0]=a.event.fix(f);arguments[0].type=b;return a.event.handle.apply(this,arguments)}};function d(f){f=a.event.fix(f);f.type=b;return a.event.handle.call(this,f)}})}a.extend(a.fn,{validateDelegate:function(d,c,b){return this.bind(c,function(e){var f=a(e.target);if(f.is(d)){return b.apply(f,arguments)}})}})})(jQuery);(function(a){a.omWidget("om.omProgressbar",{options:{value:0,text:"{value}%",width:"auto",max:100},min:0,_create:function(){var b=this.element;b.addClass("om-progressbar om-widget om-widget-content om-corner-all");this.textDiv=a("<div class='om-progressbar-text'></div>").appendTo(b);this.valueDiv=a("<div class='om-progressbar-value om-widget-header om-corner-left'></div>").appendTo(b)},_init:function(){var b=this.element.width();if(typeof(this.options.width)=="number"){b=this.options.width;this.element.width(b)}this.textDiv.width(Math.floor(b));this.oldValue=this._value();this._refreshValue()},value:function(b){if(b===undefined){return this._value()}this.options.value=b;this._refreshValue()},_value:function(){var b=this.options.value;if(typeof b!=="number"){b=0}return Math.min(this.options.max,Math.max(this.min,b))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var d=this,f=d.value(),c=d.options.onChange;var b=d._percentage();var g=d.options.text,e="";d.valueDiv.toggle(f>d.min).toggleClass("om-corner-right",f===d.options.max).width(b.toFixed(0)+"%");if(typeof(g)=="function"){e=g.call(f,f)}else{if(typeof(g)=="string"){e=g.replace("{value}",f)}}d.textDiv.html(e);if(d.oldValue!==f){c&&d._trigger("onChange",null,f,d.oldValue);d.oldValue=f}}})})(jQuery);(function(a){a.omWidget("om.omTooltip",{options:{width:"auto",minWidth:null,maxWidth:null,height:"auto",maxHeight:null,minHeight:null,delay:300,anchor:false,trackMouse:false,showOn:"mouseover",lazyLoad:false,url:null,offset:[5,5],anchorOffset:0,region:null,html:null,contentEL:null},_create:function(){this.tipContent=a('<div class="tip-body"></div>');this.tipAnchor=a('<div class="tip-anchor"></div>');this.regionMap={right:"left",top:"bottom",left:"right",bottom:"top"};this.tip=a('<div class="tip"></div>').append(this.tipContent)},_init:function(){var c=this,d=c.options;this.tipContent.empty();this.tip.find("div.tip-anchor").remove();if(d.anchor){c.tip.append(c.tipAnchor)}c.adjustWidth=6;c.adjustHeight=6;if(d.width!="auto"){this.tip.css("width",d.width-c.adjustWidth)}else{this.tip.css("width","auto")}if(d.height!="auto"){this.tip.css("height",d.height-c.adjustHeight)}else{this.tip.css("height","auto")}if(d.minWidth){this.tip.css("minWidth",d.minWidth-c.adjustWidth)}if(d.maxWidth){this.tip.css("maxWidth",d.maxWidth-c.adjustWidth)}if(d.maxHeight){this.tip.css("maxHeight",d.maxHeight-c.adjustHeight)}if(d.minHeight){this.tip.css("minHeight",d.minHeight-c.adjustHeight)}if(d.url&&!d.lazyLoad){c._ajaxLoad(d.url)}else{if(d.html){this.tip.find(".tip-body").append(d.html)}else{var b=a(d.contentEL).clone();a(d.contentEL).remove();this.tip.find(".tip-body").append(b.show())}}this._bindEvent()},_ajaxLoad:function(c){var b=this;a.ajax({url:c,method:"POST",dataType:"html",success:function(d,e){b.tip.find(".tip-body").append(d)},error:function(d,f,e){b.tip.find(".tip-body").append(a.om.lang.omTooltip.FailedToLoad)}})},_bindEvent:function(){var b=this,c=b.options,d=b.element;if(c.showOn=="mouseover"){d.bind("mouseover.tooltip",function(f){if(b.showTime){clearTimeout(b.showTime)}b.showTime=setTimeout(function(){b.show(f)},c.delay)})}else{if(c.showOn=="click"){b.showTime=d.bind("click.tooltip",function(f){setTimeout(function(){b.show(f)},c.delay)})}}if(c.trackMouse){d.bind("mousemove.tooltip",function(f){b._adjustPosition(f)})}d.bind("mouseleave.tooltip",function(){if(b.showTime){clearTimeout(b.showTime)}b.hideTime=setTimeout(function(){b.hide()},c.delay)});b.tip.bind("mouseover.tooltip",function(){if(b.hideTime){clearTimeout(b.hideTime)}}).bind("mouseleave.tooltip",function(){setTimeout(function(){b.hide()},c.delay)})},show:function(d){var b=this,c=b.options;if(a(document.body).find(b.tip).length<=0){if(c.url&&c.lazyLoad){b._ajaxLoad(c.url)}b.tip.appendTo(document.body).fadeIn();b._adjustPosition(d)}else{b._adjustPosition(d);b.tip.fadeIn()}},_adjustPosition:function(g){var b=this,c=b.options,d=b.element,i,h,f=a(d).offset();if(g&&!c.region){i=g.pageY+c.offset[0];h=g.pageX+c.offset[1];b.tip.find(".tip-anchor").css({top:c.anchorOffset+3,left:"-9px"}).addClass("tip-anchor-left")}else{var e=parseInt(a(d).css("borderBottomWidth").replace("px",""));i=f.top+a(d).height()+(isNaN(e)?0:e)+c.offset[0];h=f.left+c.offset[1];if(c.region=="right"){h=f.left+c.offset[1]+a(d).width()+b.adjustWidth;i=i-b.element.height()+b.adjustHeight+c.offset[0];b.tip.find(".tip-anchor").css({top:c.anchorOffset+3,left:"-9px"})}else{if(c.region=="left"){h=f.left-b.tip.width()-b.adjustWidth-c.offset[1]-2;i=i-b.element.height()-b.adjustHeight-c.offset[0];b.tip.find(".tip-anchor").css({top:c.anchorOffset+3,left:b.tip.outerWidth()-2})}else{if(c.region=="top"){i=i-(b.element.height()+b.tip.height()+b.adjustHeight+2)-c.offset[0];h=h+c.offset[1];b.tip.find(".tip-anchor").css({top:b.tip.outerHeight()-3,left:c.anchorOffset+3})}else{if(c.region=="bottom"){i=i+c.offset[0];h=h+c.offset[1];b.tip.find(".tip-anchor").css({top:-9,left:c.anchorOffset+3})}}}}b.tip.find(".tip-anchor").addClass("tip-anchor-"+b.regionMap[c.region])}if((h+b.tip.width())>document.documentElement.clientWidth){h=h-b.tip.width()-20}if((i+b.tip.height())>document.documentElement.clientHeight){i=i-(b.element.height()+b.tip.height())-20}b.tip.css({top:i-a(document).scrollTop(),left:h-a(document).scrollLeft()})},hide:function(){this.tip.hide()},destroy:function(){clearTimeout(this.showTime);clearTimeout(this.hideTime);this.element.unbind(".tooltip");this.tip.remove()}});a.om.lang.omTooltip={FailedToLoad:"加载提示信息出错！"}})(jQuery);(function(a){a.omWidget("om.omItemSelector",{options:{width:"300px",height:"300px",dataSource:[],value:[],clientFormatter:false,autoSort:false,preProcess:function(b){return b},onError:jQuery.noop,onSuccess:jQuery.noop,onBeforeItemSelect:jQuery.noop,onBeforeItemDeselect:jQuery.noop,onItemSelect:jQuery.noop,onItemDeselect:jQuery.noop},_create:function(){this.element.addClass("om-itemselector om-widget").html('<table style="height:100%;width:100%" cellpadding="0" cellspacing="0"><tr><td class="om-itemselector-leftpanel"></td><td class="om-itemselector-toolbar"></td><td class="om-itemselector-rightpanel"></td></tr></table>');var c=a("td",this.element);var d=a("<thead></thead>");var b=a("<th></th>").attr({axis:"checkboxCol",align:"center"}).append(a('<div class="header"><span class="checkbox"/><span class="om-itemselector-title"/></div>'));a("<tr></tr>").append(b).appendTo(d);this.leftPanel=a('<table cellspacing="0" cellpadding="0"></table>').append(d).append('<tr><td><div class="om-itemselector-up"><span class="upbtn"/></div><div class="om-itemselector-items"><dl></dl></div><div class="om-itemselector-down"><span class="downbtn"/></div></tr></td>').appendTo(c.eq(0));this.toolbar=a("<div></div>").appendTo(c.eq(1));this.rightPanel=this.leftPanel.clone().appendTo(c.eq(2))},_init:function(){var d=this.options,c=d.dataSource;this.leftPanel.find(".om-itemselector-title").html(a.om.lang._get(d,"omItemSelector","availableTitle"));this.rightPanel.find(".om-itemselector-title").html(a.om.lang._get(d,"omItemSelector","selectedTitle"));this.element.css({width:d.width,height:d.height});this._buildToolbar();this._resizePanel();this._bindEvents();if(typeof c==="string"){var b=this;a.ajax({url:c,method:"GET",dataType:"json",success:function(e,f){if(b._trigger("onSuccess",null,e,f)===false){return}e=d.preProcess(e);d.dataSource=e;b._buildList()},error:function(e,g,f){b._trigger("onError",null,e,g,f)}})}else{this._buildList()}this._refreshPageButton(this.leftPanel);this._refreshPageButton(this.rightPanel)},_buildToolbar:function(){var d="",f=["add","space","remove"];for(var c=0,b=f.length;c<b;c++){var e=f[c];d+='<div class="om-icon om-itemselector-tbar-'+e+'" title="'+(a.om.lang._get({},"omItemSelector",e+"IconTip")||"")+'"></div>'}this.toolbar.html(d)},_resizePanel:function(){var d=this,f=d.leftPanel,g=d.rightPanel,c=a(".om-itemselector-items",f),i=a(".om-itemselector-items",g),e=f.parent().innerHeight()-c.offset().top+f.offset().top,b=(a("tr",d.element).innerWidth()-d.toolbar.outerWidth())/2,h=f.outerWidth(b).innerWidth();c.outerHeight(e).width(h);i.outerHeight(e).width(h);d.element.data("dltop",a(".om-itemselector-items >dl",f).offset().top)},_buildList:function(){var f=this.options;dataSource=f.dataSource,value=f.value,fmt=f.clientFormatter,leftHtml="",rightHtml="",inArray=function(k,h){for(var j=0,g=h.length;j<g;j++){if(k.value===h[j]){return true}}return false},buildHtml=fmt?function(g,h){return'<dt _index="'+g+'"><span class="checkbox"/>'+fmt(h,g)+"</dt>"}:function(g,h){return'<dt _index="'+g+'"><span class="checkbox"/>'+h.text+"</dt>"};if(a.isArray(dataSource)&&jQuery.isArray(value)){a.each(dataSource,function(g,h){if(inArray(h,value)){rightHtml+=buildHtml(g,h)}else{leftHtml+=buildHtml(g,h)}})}a(".om-itemselector-items>dl",this.leftPanel).html(leftHtml);a(".om-itemselector-items>dl",this.rightPanel).html(rightHtml);var c=a(".om-itemselector-items"),b=a(">dl>dt",c).outerHeight(),d=c.outerHeight(),e=b-d%b;c.outerHeight(d+e)},_bindEvents:function(){var b=this,c=b.toolbar;b.leftPanel.delegate(".om-itemselector-items>dl>dt","click.omItemSelector",function(d){a(this).toggleClass("om-state-highlight");b._refreshHeaderCheckbox(b.leftPanel)});b.rightPanel.delegate(".om-itemselector-items>dl>dt","click",function(d){a(this).toggleClass("om-state-highlight");b._refreshHeaderCheckbox(b.rightPanel)});this.leftPanel.delegate(".om-itemselector-items>dl>dt","dblclick",function(){a(".om-itemselector-items>dl>dt",b.element).removeClass("om-state-highlight");a(this).addClass("om-state-highlight");b._moveItemsToTarget(".om-state-highlight",true)});this.rightPanel.delegate(".om-itemselector-items>dl>dt","dblclick",function(){a(".om-itemselector-items>dl>dt",b.element).removeClass("om-state-highlight");a(this).addClass("om-state-highlight");b._moveItemsToTarget(".om-state-highlight",false)});a(".om-itemselector-tbar-add",c).click(function(){b._moveItemsToTarget(".om-state-highlight",true)});a(".om-itemselector-tbar-remove",c).click(function(){b._moveItemsToTarget(".om-state-highlight",false)});a(".header span.checkbox",b.leftPanel).click(function(){var d=b.leftPanel,e=a(".om-itemselector-items>dl>dt",d);a(this).toggleClass("selected");if(a("div.om-itemselector-up:visible",d).length>0){e=a(b._getPageItems(d,e))}if(a(this).hasClass("selected")){e.addClass("om-state-highlight")}else{e.removeClass("om-state-highlight")}});a(".header span.checkbox",b.rightPanel).click(function(){var d=b.rightPanel,e=a(".om-itemselector-items>dl>dt",d);a(this).toggleClass("selected");if(a("div.om-itemselector-up:visible",d).length>0){e=a(b._getPageItems(d,e))}if(a(this).hasClass("selected")){e.addClass("om-state-highlight")}else{e.removeClass("om-state-highlight")}});b.element.delegate("div.om-itemselector-up:not([disabled])","click",function(){b._page(a(this),true);b._refreshHeaderCheckbox(a(this).parentsUntil("table").last().parent())});b.element.delegate("div.om-itemselector-down:not([disabled])","click",function(){b._page(a(this),false);b._refreshHeaderCheckbox(a(this).parentsUntil("table").last().parent())})},_page:function(e,c){var i=c?e.next():e.prev(),f=i.children("dl"),g=i.outerHeight()-2,b=f.outerHeight(),k=f.offset().top,d,j=this.element.data("dltop")+20;if(c){f.offset({top:k+g});d=i.next();if((k=f.offset().top)>0||(f.outerHeight()-k-j)>g){d.removeAttr("disabled").removeClass("om-itemselector-down-disabled")}if(k>0&&k<g){e.attr("disabled","disabled").addClass("om-itemselector-up-disabled")}}else{f.offset({top:k-g});d=i.prev();d.removeAttr("disabled").removeClass("om-itemselector-up-disabled");if((k=f.offset().top)<0&&(b+k-j)<=g){e.attr("disabled","disabled").addClass("om-itemselector-down-disabled")}}},_refreshHeaderCheckbox:function(b){var d=a(".om-itemselector-items>dl>dt",b);d=a(this._getPageItems(b,d));var c=d.filter(".om-state-highlight").length;a(".header span.checkbox",b).toggleClass("selected",c>0&&d.length===c)},_refreshPageButton:function(c){var g=a(".om-itemselector-items",c),e=a(".om-itemselector-items >dl",c),d=a(".om-itemselector-up",c),i=a(".om-itemselector-down",c),f=g.outerHeight(),b=e.outerHeight(),j=e.offset().top,h=this.element.data("dltop")+20;if(b>20&&(h-j)>=b){e.offset({top:j+f});j=e.offset().top}if(b>f){if(d.is(":hidden")){g.outerHeight(f-d.outerHeight()*2);d.show();i.show()}if(j>0&&j<f){d.attr("disabled","disabled").addClass("om-itemselector-up-disabled")}else{d.removeAttr("disabled").removeClass("om-itemselector-up-disabled")}if(j>0||(b+j-h)>(f)){i.removeAttr("disabled").removeClass("om-itemselector-down-disabled")}else{i.attr("disabled","disabled").addClass("om-itemselector-down-disabled")}}else{if(d.is(":visible")){g.outerHeight(f+d.outerHeight()*2);d.hide();i.hide()}}},_getPageItems:function(b,l){var i=a(".om-itemselector-items",b),f=i.outerHeight(),e=a(">dl",i),d=[],h=i.next(":visible").length>0,c=l.outerHeight(),g=f/c,k=e.offset().top,j=this.element.data("dltop");k=h?j-k+20:j-k;d=a.grep(l,function(o,m){return m<g*(k/f+1)-1&&m>=g*(k/f)});return d},select:function(d){if(!a.isArray(indexes)){indexes=[indexes]}for(var c=0,b=d.length;c<b;c++){a('.om-itemselector-items>dl>dt[_index="'+d[c]+'"]').addClass("om-state-highlight")}},_moveItemsToTarget:function(c,d){var e=this,f=d?this.leftPanel:this.rightPanel,i=a(".om-itemselector-items>dl>dt"+c,f);if(i.size()==0){return}var g=d?this.rightPanel:this.leftPanel,h=this.options,b=[];i.each(function(){b.push(h.dataSource[a(this).attr("_index")])});if(d){if(e._trigger("onBeforeItemSelect",null,b)===false){return}i.appendTo(a(".om-itemselector-items>dl",g)).removeClass("om-state-highlight");e._trigger("onItemSelect",null,b)}else{if(e._trigger("onBeforeItemDeselect",null,b)===false){return}i.appendTo(a(".om-itemselector-items>dl",g)).removeClass("om-state-highlight");e._trigger("onItemDeselect",null,b)}e._refreshHeaderCheckbox(f);e._refreshPageButton(f);e._refreshPageButton(g)},value:function(c){if(arguments.length==0){var e=this.options,d=a(".om-itemselector-items>dl>dt",this.rightPanel),b=[];d.each(function(){b.push(e.dataSource[a(this).attr("_index")].value)});return b}else{if(a.isArray(c)){this.options.value=c;this._buildList()}}}});a.om.lang.omItemSelector={availableTitle:"可选项",selectedTitle:"已选项",addIconTip:"右移",removeIconTip:"左移"}})(jQuery);(function(a){a.omWidget("om.omBorderLayout",{options:{fit:false,spacing:5,hideCollapsBtn:false,onBeforeDrag:function(b,c){},onAfterDrag:function(b,c){}},_create:function(){if(!this.options.panels){return}this._minWidth=50;this._minHeight=28;this._buildRegion();this._resizeRegion(true);a(window).resize(a.proxy(this,"_resizeRegion"))},_getRegionSize:function(e){var b=this._getRegion(e),c=this._getRegionProxy(e),d={};d.width=this._regionVisible(b)?b.outerWidth(true):(this._regionVisible(c)?c.outerWidth(true):0);d.height=this._regionVisible(b)?b.outerHeight(true):(this._regionVisible(c)?c.outerHeight(true):0);return d},_resizeRegion:function(u){var k=this._getRegion("center"),e=this._getRegion("north"),b=this._getRegion("south"),l=this._getRegion("west"),t=this._getRegion("east"),d=this._getRegionProxy("north"),f=this._getRegionProxy("south"),i=this._getRegionProxy("west"),s=this._getRegionProxy("east"),c=this._getRegionSize("north").height;southHeight=this._getRegionSize("south").height;westWidth=this._getRegionSize("west").width;eastWidth=this._getRegionSize("east").width;centerWidth=this._getRegionSize("center").width;layoutWidth=this.element.width();layoutHeight=this.element.height();westOpt=this._getPanelOpts("west");eastOpt=this._getPanelOpts("east");k.css({top:c,left:westWidth});k.find(">.om-panel-body").omPanel("resize",{height:layoutHeight-c-southHeight});if(!u){k.find(">.om-panel-body").omPanel("resize",{width:layoutWidth-westWidth-eastWidth})}var n=k.outerHeight(true);if(e){var p=layoutWidth-(westOpt.expandToTop?westWidth:0)-(eastOpt.expandToTop?eastWidth:0);e.find(">.om-panel-body").omPanel("resize",{width:p});e.css({left:westOpt.expandToTop?westWidth:0});if(d){d.outerWidth(p).css({left:westOpt.expandToTop?westWidth:0})}}if(b){var q=layoutWidth-(westOpt.expandToBottom?westWidth:0)-(eastOpt.expandToBottom?eastWidth:0);b.find(">.om-panel-body").omPanel("resize",{width:q});b.css({top:layoutHeight-b.outerHeight(true),left:westOpt.expandToBottom?westWidth:0});if(f){f.outerWidth(q).css({left:westOpt.expandToBottom?westWidth:0})}}if(l){var j=westOpt.expandToTop?0:c;var h=n+(westOpt.expandToBottom?southHeight:0)+(westOpt.expandToTop?c:0);l.css({top:j});l.find(">.om-panel-body").omPanel("resize",{height:h});if(i){i.css({top:j});i.outerHeight(h)}}if(t){var m=eastOpt.expandToTop?0:c;var o=n+(eastOpt.expandToBottom?southHeight:0)+(eastOpt.expandToTop?c:0);t.css({top:m});t.find(">.om-panel-body").omPanel("resize",{height:o});if(s){s.css({top:m});s.outerHeight(o)}}if(u){var r=this._getPanelOpts("east")&&!this._getPanelOpts("east").width;var g=this._getPanelOpts("west")&&!this._getPanelOpts("west").width;var v=!this._getPanelOpts("center").width;if(r||g||v){if(!v&&r&&g){eastWidth=westWidth=(layoutWidth-centerWidth)/2}else{if(v&&!r&&g){centerWidth=westWidth=(layoutWidth-eastWidth)/2}else{if(v&&r&&!g){centerWidth=eastWidth=(layoutWidth-westWidth)/2}else{if(v&&r&&g){eastWidth=westWidth=centerWidth=layoutWidth/3}}}}}if(v){k.find(">.om-panel-body").omPanel("resize",{width:Math.floor(layoutWidth-westWidth-eastWidth)})}if(r){t.find(">.om-panel-body").omPanel("resize",{width:Math.ceil(layoutWidth-westWidth-centerWidth)-this.options.spacing})}if(g){l.find(">.om-panel-body").omPanel("resize",{width:Math.ceil(layoutWidth-eastWidth-centerWidth)-this.options.spacing});k.css({left:l.width()+this.options.spacing})}}},_regionVisible:function(b){return b&&b.css("display")!="none"},_createRegionProxy:function(e,f){var c=this;var b="";if(f){b='<div class="om-borderlayout-proxy om-borderlayout-trigger-proxy-'+e.region+'" proxy="'+e.region+'"><div class="om-borderlayout-expand-trigger"></div></div>';var d=a(b);if(e.region=="west"||e.region=="east"){d.width(c.options.spacing)}else{if(e.region=="north"||e.region=="south"){d.height(c.options.spacing)}}(function(g){d.find(".om-borderlayout-expand-trigger").click(function(){c.expandRegion(g.region)})})(e)}else{b='<div class="om-borderlayout-proxy om-borderlayout-proxy-'+e.region+'" proxy="'+e.region+'"><div class="om-panel-title"></div><div class="om-panel-tool"><div class="om-icon panel-tool-expand"></div></div></div>';var d=a(b);(function(g){d.find(".panel-tool-expand").hover(function(){a(this).toggleClass("panel-tool-expand-hover")}).click(function(){c.expandRegion(g.region)})})(e)}d.hover(function(){a(this).toggleClass("om-borderlayout-proxy-hover")}).appendTo(this.element)},_buildRegion:function(){var j=this;var c=this.element;this.element.addClass("om-borderlayout");if(this.options.hideCollapsBtn){this.element.addClass("om-borderlayout-hide-collaps-btn")}if(this.options.fit){c.css({width:"100%",height:"100%"})}for(var g=0;g<this.options.panels.length;g++){var b=a.extend({},this.options.panels[g]);var k=this.element.find("#"+b.id);var m=b.collapsible&&j.options.hideCollapsBtn;if(b.collapsible&&b.region!="center"){this._createRegionProxy(b,m)}if(b.collapsible){a.extend(b,{collapsible:false});if(!j.options.hideCollapsBtn){a.extend(b,{tools:[{iconCls:["panel-tool-collapse","panel-tool-collapse-hover"],handler:function(i){j.collapseRegion(i.element.parent().attr("region"))}}]})}}if(b.closable){var d=b.onClose;a.extend(b,{onClose:function(){d&&d.call(k[0]);j._resizeRegion()}})}k.omPanel(b);if(b.region=="north"||b.region=="south"){k.omPanel("resize",{width:c.width()})}var f="0",h=this.options.spacing+"px";if(b.resizable&&b.region!="center"){var l="";handleClass={};if(b.region=="west"){l="e";handleClass.width=h;handleClass.right="-"+h}else{if(b.region=="east"){l="w";handleClass.width=h;handleClass.left="-"+h}else{if(b.region=="south"){l="n";handleClass.height=h;handleClass.top="-"+h}else{if(b.region=="north"){l="s";handleClass.height=h;handleClass.bottom="-"+h}}}}k.parent().omResizable({handles:l,helper:"om-borderlayout-resizable-helper-"+l,stop:function(n,i){c.find(">.om-borderlayout-mask").remove();n.element.find(">.om-panel-body").omPanel("resize",n.size);j._resizeRegion();j.options.onAfterDrag&&j._trigger("onAfterDrag",null,n.element)},start:function(q,p){var o=q.element.omResizable("option","helper");a("body").find("."+o).css("border-width",j.options.spacing);var r=q.element.attr("region"),n=c.width()-2*j._minWidth,i=c.height()-2*j._minHeight;if(r=="west"){n=c.width()-(j._getRegionSize("east").width+j._minWidth);q.element.omResizable("option","maxWidth",n)}else{if(r=="east"){n=c.width()-(j._getRegionSize("west").width+j._minWidth);q.element.omResizable("option","maxWidth",n)}else{if(r=="north"){i=c.height()-(j._getRegionSize("south").height+j._minHeight+j.options.spacing);q.element.omResizable("option","maxHeight",i)}else{if(r=="south"){i=c.height()-(j._getRegionSize("north").height+j._minHeight+j.options.spacing);q.element.omResizable("option","maxHeight",i)}}}}a('<div class="om-borderlayout-mask"></div>').css({width:c.width(),height:c.height()}).appendTo(c);j.options.onBeforeDrag&&j._trigger("onBeforeDrag",null,q.element)},minWidth:j._minWidth,minHeight:j._minHeight});k.parent().find(".om-resizable-handle").css(handleClass);f=(b.region=="south"?h:0)+" "+(b.region=="west"?h:0)+" "+(b.region=="north"?h:0)+" "+(b.region=="east"?h:0);if(m){var e=a("<div class='om-borderlayout-collaps-trigger-"+b.region+"'></div>");(function(i){e.click(function(){j.collapseRegion(i.attr("region"))})})(k.parent());k.parent().find(".om-resizable-handle").append(e)}}k.parent().addClass("om-borderlayout-region").addClass("om-borderlayout-region-"+b.region).css("margin",f).attr("region",b.region);k.addClass("om-borderlayout-region-body");k.prev().addClass("om-borderlayout-region-header")}},_getRegion:function(c){var b=this.element.find('>[region="'+c+'"]');return b.size()>0?b:false},_getRegionProxy:function(b){var c=this.element.find('>[proxy="'+b+'"]');return c.size()>0?c:false},_getPanelOpts:function(c){for(var b=0;b<this.options.panels.length;b++){if(c==this.options.panels[b].region){return this.options.panels[b]}}return false},collapseRegion:function(d){var c=this._getPanelOpts(d);if(!c||!c.collapsible){return}var b=this._getRegion(d);$body=b.find(">.om-panel-body");if(b){var e=a.data($body[0],"omPanel");if(e.options.closed){return}if(c.onBeforeCollapse&&e._trigger("onBeforeCollapse")===false){return false}b.hide();c.onCollapse&&e._trigger("onCollapse");this._getRegionProxy(d).show();this._resizeRegion()}},expandRegion:function(d){var c=this._getPanelOpts(d);if(!c||!c.collapsible){return}var b=this._getRegion(d);$body=b.find(">.om-panel-body");if(b){var e=a.data($body[0],"omPanel");if(e.options.closed){return}if(c.onBeforeExpand&&e._trigger("onBeforeExpand")===false){return false}b.show();c.onExpand&&e._trigger("onExpand");this._getRegionProxy(d).hide();this._resizeRegion()}},closeRegion:function(d){var c=this._getPanelOpts(d);if(!c||!c.closable){return}var b=this._getRegion(d);$body=b.find(">.om-panel-body");if(b){var e=a.data($body[0],"omPanel");if(e.options.closed){return}b.find(">.om-panel-body").omPanel("close");this._getRegionProxy(d).hide();this._resizeRegion()}},openRegion:function(d){var c=this._getPanelOpts(d);if(!c||!c.closable){return}var b=this._getRegion(d);$body=b.find(">.om-panel-body");if(b){var e=a.data($body[0],"omPanel");if(!e.options.closed){return}b.find(">.om-panel-body").omPanel("open");this._getRegionProxy(d).hide();this._resizeRegion()}}})})(jQuery);(function(a){a.omWidget("om.omScrollbar",{options:{thick:8},_create:function(){var b=this.options;this._vScrollbar=a("<div class='om-widget om-scrollbar om-corner-all'></div>").width(b.thick).appendTo("body").hide();this._vScrollbar.type="v";this._hScrollbar=a("<div class='om-widget om-scrollbar om-corner-all'></div>").height(b.thick).appendTo("body").hide();this._hScrollbar.type="h"},_init:function(){this.element.css("overflow","hidden");this._buildEvent()},destroy:function(){this._vScrollbar.remove();this._hScrollbar.remove()},_buildEvent:function(){var e=this,d=this.element,c=[this._vScrollbar,this._hScrollbar];a(c).each(function(g,i){i._hover=false;i._enable=true;var h=i.type;var f=0;i.omDraggable({axis:h==="v"?"y":"x",containment:d,onStart:function(k,j){f=h==="v"?d.scrollTop():d.scrollLeft()},onDrag:function(k,j){var l=k.position,m=k.originalPosition;h=="v"?d.scrollTop(f+e._getInt((l.top-m.top)*d.innerHeight()/i.outerHeight())):d.scrollLeft(f+e._getInt((l.left-m.left)*d.innerWidth()/i.outerWidth()))}}).hover(function(){a(c).each(function(j,k){k._hover=true;clearTimeout(k._timer)});a(this).addClass("scrollbar-state-hover")},function(){a(c).each(function(j,k){k._hover=false;e._setTimer(k.type)});a(this).removeClass("scrollbar-state-hover")})});var b=a.browser.mozilla?"DOMMouseScroll":"mousewheel";d.bind(b,function(f){e._mousewheelListener.call(e,f)});a(c).each(function(f,g){g.bind(b,function(h){e._mousewheelListener.call(e,h)})});d.hover(function(){a(c).each(function(f,g){g._hover=true;clearTimeout(g._timer);e._resize(g);if(g._enable){g.fadeIn("fast")}})},function(){a(c).each(function(f,g){g._hover=false;e._setTimer(g.type)})})},_mousewheelListener:function(d){var k=this;if(!k._vScrollbar._enable){return}var j=0;if(d.wheelDelta){j=-d.wheelDelta}else{j=d.detail*40}var b=j/120*10,f=k._vScrollbar,e=k.element,h=e.offset().top+k._getInt(e.css("border-top-width"))+k._getInt(e.css("padding-top"))+k._getInt(e.css("padding-top-width")),g=f.position().top-h,i=e.height(),c=i-f.outerHeight();if(b+g<0){f.css("top",h);e.scrollTop(0)}else{if(b+g>c){f.css("top",h+c);e.scrollTop(e[0].scrollHeight-e.height())}else{f.css("top","+="+b);e.scrollTop(e.scrollTop()+parseInt(b*e.innerHeight()/f.outerHeight()))}}d.preventDefault()},_getScrollbar:function(b){return"h"===b?this._hScrollbar:this._vScrollbar},_setTimer:function(c){var b=this;clearTimeout(this._getScrollbar(c)._timer);(function(d){setTimeout(function(){var e=b._getScrollbar(d);if(!e._hover){e.fadeOut("fast")}},200)})(c)},refresh:function(){var c=[this._vScrollbar,this._hScrollbar],b=this;a(c).each(function(d,e){b._resize(e)})},_resize:function(d){var b=this.element,k=d.type,q=0,g=b.offset(),l=b.width(),i=b.height(),e=b.outerWidth(),n=b.outerHeight(),c=this._getInt(b.css("border-left-width")),o=this._getInt(b.css("border-right-width")),m=this._getInt(b.css("border-top-width")),j=this._getInt(b.css("border-bottom-width")),f=this._getInt(b.css("padding-left")),p=this._getInt(b.css("padding-top"));if("v"===k){q=b[0].scrollHeight;if(q>i){d._enable=true;d.outerHeight(this._getInt(i*b.innerHeight()/q));d.css({left:g.left+e-d.outerWidth()-o,top:g.top+m+p+this._getInt(b.scrollTop()*i/q)})}else{d._enable=false}}else{if("h"===k){q=b[0].scrollWidth;if(q>b.innerWidth()){d._enable=true;d.outerWidth(this._getInt((f+l)*l/q));d.css({left:g.left+c+f+this._getInt(b.scrollLeft()*l/q),top:g.top+n-d.outerHeight()-j})}else{d._enable=false}}}d._enable?d.fadeIn("fast"):d.fadeOut("fast")},_getInt:function(b){return parseInt(b)||0}})})(jQuery);(function(a){a.omWidget("om.omButtonbar",{options:{width:null},_create:function(){this.element.addClass("om-buttonbar");a("<span></span>").addClass("om-buttonbar-null").appendTo(this.element)},_init:function(){var c=this,d=this.options,e=this.element;var b=e.attr("style")?e.attr("style"):"";if(b){b=b.substr(b.length-1,b.length)==";"?b:b+";"}if(d.width){e.attr("style",b+"width:"+(d.width-2)+"px;")}a.each(d.btns,function(f,h){if(!h.separtor){var i=h.id||e.attr("id")+"_"+f;var g=a('<button type="button"></button>').attr("id",i).appendTo(e);if(a.fn.omButton){g.omButton(h)}}else{a('<span class="om-buttonbar-sep"></span>').appendTo(e)}})}})})(jQuery);(function(b){var a=[{cls:"pFirst",type:"first"},{cls:"pPrev",type:"prev"},{cls:"pNext",type:"next"},{cls:"pLast",type:"last"},{cls:"pReload",type:"reload"}];function c(d,e){var g=d._oldPage,f=d.pageData.nowPage;if("input"===e){return g!=b(".pControl input",d.element.closest(".om-grid")).val()}else{if("reload"===e){return true}else{return g!=f}}}b.omWidget.addInitListener("om.omGrid",function(){var f=this,e=this._getColModel(),h=this._getHeaderCols().filter("[axis^='col']"),j=this.pDiv;b(h).each(function(i){var k=e[i].sort;if(k){var l=b(this).click(function(){var o=e[i].name;var q=l.hasClass("asc")?"asc":l.hasClass("desc")?"desc":null;var n=(q=="asc"?"desc":"asc");h.removeClass("asc desc");l.addClass(n);var p=f._extraData;delete p.sortBy;delete p.sortDir;switch(k){case"serverSide":p.sortBy=o;p.sortDir=n;f.reload();return;case"clientSide":k=function(t,r){var u=t[o],s=r[o];return u==s?0:u>s?1:-1};break;default:}var m=f.pageData.data;if(q==null){m.rows=m.rows.sort(k)}else{m.rows=m.rows.reverse()}f.refresh()});l.children().first().append('<img class="om-grid-sortIcon" src="data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="></img>')}});for(var g=0,d=a.length;g<d;g++){(function(k){j.find("."+a[k].cls).click(function(){var i=c(f,a[k].type);h.each(function(l){var m=b(this);if(i&&(m.hasClass("asc")||m.hasClass("desc"))&&"serverSide"!==e[l].sort){m.removeClass("asc desc")}})})})(g)}b(".pControl input",j).keydown(function(i){var k=c(f,"input");if(i.keyCode==b.om.keyCode.ENTER){h.each(function(l){var m=b(this);if(k&&(m.hasClass("asc")||m.hasClass("desc"))&&"serverSide"!==e[l].sort){m.removeClass("asc desc")}})}});this.clearSort=function(){var i=this._extraData;i.sortBy=undefined;i.sortDir=undefined;this._getHeaderCols().removeClass("asc desc")}})})(jQuery);(function(b){b.omWidget.addInitListener("om.omGrid",function(){var l=this,e=this.options,d=e.rowDetailsProvider,j=e.colModel,h=this.thead;if(!(d&&j.length>0)){return}e._onResizableCallbacks.push(a);e._onResizableStopCallbacks.push(a);h.find("th:first").before('<th align="center" axis="expenderCol" class="expenderCol" rowspan='+(b.isArray(j[0])?j.length:1)+'><div style="text-align: center; width: 14px;"></div></th>');var c=-1,i=0;j=this._getColModel();b(j).each(function(m){if(j[m].width=="autoExpand"){c=m}else{i+=j[m].width}});var f=h.find('th[axis="expenderCol"]').width();if(c!=-1){h.find('th[axis="col'+c+'"] >div').css("width","-="+f)}else{if(e.autoFit){var g=f/i;h.find('th[axis^="col"] >div').each(function(m){b(this).css("width","-="+parseInt(j[m].width*g))})}}var k=this._getHeaderCols().size();this.tbody.delegate("td.expenderCol >div","click",function(o){var q=b(this),m=q.closest("tr"),n=m.next("tr");if(n.hasClass("rowExpand-rowDetails")){n.toggle()}else{var p=l._getTrs().index(m);rowData=l._getRowData(p),rowDetails=d?d(rowData,p):"&#160;";m.after('<tr class="rowExpand-rowDetails"><td colspan="'+(k-1)+'"><div class="rowExpand-rowDetails-content">'+rowDetails+"</div></td></tr>")}q.toggleClass("rowExpand-expanded").parent().attr("rowspan",q.hasClass("rowExpand-expanded")?2:1);a.call(l);return false})});function a(){var c=this.element;var f=c.find("tr.rowExpand-rowDetails");if(f.length==0){return}var d=this.hDiv.find("table");var e=d.width()-d.find("th.expenderCol").outerWidth()-parseInt(f.find("> td").css("border-right-width"));f.each(function(){b(this).find(".rowExpand-rowDetails-content").outerWidth(e)})}})(jQuery);(function(d){var l=Object.prototype.hasOwnProperty;d.omWidget.addInitListener("om.omGrid",function(){var A=this,z=A.element,C=A.options,x=this._getColModel();A._triggered=false;A._globalEditable=false;C.editMode=C.editMode||"all";A._allEditMode=C.editMode=="all";for(var B=0,w=x.length;B<w;B++){A._globalEditable=x[B]["editor"]?true:false;if(A._globalEditable){break}}if(!i(A)){return}A._editComps={};A._errorHolders={};A._colWidthResize;C._onRefreshCallbacks.push(t);C._onResizableStopCallbacks.push(k);C._onResizeCallbacks.push(j);this.tbody.delegate("tr.om-grid-row","dblclick",function(D){b.call(this,A)});this.tbody.delegate("tr.om-grid-row","click",function(D){if(A._triggered&&A._editView.editing){if(A._validator){A._validator.valid()&&b.call(this,A)}else{b.call(this,A)}}});var y;z.parent().scroll(function(){if(A._triggered){if(y){clearTimeout(y)}y=setTimeout(function(){var D=v(A);A._editView.editBtn.animate({left:D.left,top:D.top},A._editView.editing?"fast":0);y=null},300)}});d.extend(this,{cancelEdit:function(F){var E=this._editView,D=this.options;if(!i(this)||!this._triggered||(this._triggered&&!E.editing)){return}E.view.hide();E.editing=false;if(this._rowAdding){this.deleteRow(this._getTrs().index(this.tbody.find("tr[_grid_row_id='"+A._editView.rowId+"']")));this._rowAdding=false}s(this);F&&d(F).blur();D.onCancelEdit&&D.onCancelEdit.call(this)},cancelChanges:function(){this.cancelEdit();if(f(this)){return}g(this);s(this);this.refresh()},editRow:function(D){if(!i(this)){return}b.call(this._getTrs().eq(D)[0],this)},deleteRow:function(F){if(!i(this)||(this._triggered&&this._editView.editing)){return}var E=this._getTrs(),D=this;if(!d.isArray(F)){F=[F]}F.sort(function(H,G){return G-H});d(F).each(function(H,J){var I=E.eq(J),G=I.next(),K=a(I);if(I.attr("_insert")){delete D._changeData.insert[K];I.remove();if(G.hasClass("rowExpand-rowDetails")){G.remove()}}else{D._changeData["delete"][K]=D._rowIdDataMap[K];I.attr("_delete","true").hide();if(G.hasClass("rowExpand-rowDetails")){G.hide()}}});this._refreshHeaderCheckBox()},getChanges:function(H){var J={update:[],insert:[],"delete":[]},D=H?H:"update",G=this._changeData,F;if(D==="update"){var E=G[D];for(F in E){l.call(E,F)&&J[D].push(d.extend(true,{},this._rowIdDataMap[F],E[F]))}D=H?H:"insert"}if(D==="insert"){var I=G[D];for(F in I){l.call(I,F)&&J[D].push(I[F])}D=H?H:"delete"}if(D==="delete"){var K=G[D];for(F in K){l.call(K,F)&&J[D].push(K[F])}}if(H){return J[H]}else{return J}},insertRow:function(O,I,R){var F=this.options,P=this._getColModel(),E=this.element;if(!i(this)||this._rowAdding){return}if(d.isPlainObject(O)){I=O;O=0}if(O===true){I={};O=0;R=true}var G=this._getTrs(),S={};O=("begin"==O||O==undefined)?0:("end"==O?G.length:O);for(var K=0,N=P.length;K<N;K++){S[P[K]["name"]]=""}this._changeData.insert[this._guid]=d.extend(true,S,I);var Q=this._buildRowCellValues(P,S,O),D=[],H=F.rowClasses;isRowClassesFn=(typeof H==="function"),rowCls=isRowClassesFn?H(O,S):H[O%H.length],tdTmp="<td align='$' abbr='$' class='grid-cell-dirty $'><div align='$' class='$' style='width:$px'>$</div></td>";D.push("<tr class='om-grid-row "+rowCls+"' _grid_row_id="+(this._guid++)+" _insert='true'>");this._getHeaderCols().each(function(W){var Y=d(this).attr("axis"),X=false,V,Z,U;if(Y=="indexCol"){V="<a class='om-icon'>新行</a>"}else{if(Y=="checkboxCol"){V='<span class="checkbox"/>'}else{if(Y.substring(0,3)=="col"){var T=Y.substring(3);V=Q[T];if(P[T].wrap){X=true}}else{V=""}}}Z=[this.align,this.abbr,Y,this.align,X?"wrap":"",d("div",d(this)).width(),V];U=0;D.push(tdTmp.replace(/\$/g,function(){return Z[U++]}))});D.push("</tr>");var M=d(D.join(" ")),L,J;if(O==0){M.prependTo(E.find(">tbody"))}else{L=G.eq(O-1);J=L.next();L=J.hasClass("rowExpand-rowDetails")?J:L;L.after(M)}if(!R){this.editRow(O);this._rowAdding=true}},saveChanges:function(){this.cancelEdit();if(f(this)){return}var F=this._changeData.update,E=this.element.find("tr.om-grid-row"),H=[];for(var G in F){if(l.call(F,G)){d.extend(true,this._rowIdDataMap[G],F[G])}}var D=this;E.each(function(I,K){var J=d(K);if(J.attr("_delete")){J.remove()}else{H.push(u(D,K))}});this.pageData.data.rows=H;g(this);s(this);this.refresh()},onBeforeEdit:function(E,D){},onAfterEdit:function(E,D){},onCancelEdit:function(){},getData:function(){var D=this.pageData.data,F=this._getTrs(),E=this;if(i(this)&&h(this)){D={total:D.total};D.rows=[];F.each(function(G,H){D.rows.push(E._getRowData(G))})}return D},_getRowData:function(E){var G=this._getTrs().eq(E),I=a(G),H;if(f(this)){return this.pageData.data.rows[E]}if(G.attr("_insert")){H=this._changeData.insert[I]}else{var F=this._rowIdDataMap[I],D=this._changeData.update;H=F;if(D[I]){H=d.extend(true,{},F,D[I])}}return H}})});function b(H){var C=d(this),x=H.element,D,B,A,G=H._getColModel(),w,F,y=H.options;if(!i(H)){return}if(!H._allEditMode&&!C.attr("_insert")){return}if(H._triggered&&H._editView.editing&&a(C)==H._editView.rowId){return}if(H._rowAdding){return}var E=H._getTrs().index(C),z=H._getRowData(E);if(y.onBeforeEdit&&y.onBeforeEdit.call(H,E,z)===false){return}q(H,C);D=H._editView.editRow;B=D.find(">.grid-edit-form");A=x.parent().scrollLeft();H._getHeaderCols().each(function(Q){var L=d(this).attr("axis"),N,T=C.find("td:eq("+Q+")"),I,V;if(L.substring(0,3)=="col"){var U=L.substring(3);N=G[U]}else{if(d.isEmptyObject(H._editComps)){D.css("padding-left",parseInt(D.css("padding-left"))+T.outerWidth())}return}var P=N.editor;if(!H._triggered){if(!P||(P&&(P.editable===false||(d.isFunction(P.editable)&&P.editable()===false)))){var R=P&&P.renderer;N.editor=P={};P.type="text";if(R){P.renderer=R;P.type="custom"}P.editable=false}else{P.type=P.type||"text";P.editable=true;if(P.rules){H._validate=true}}V=N.editor.name||N.name;P.options=P.options||{};H._editComps[V]={}}else{V=N.editor.name||N.name}w=H._editComps[V];F=(F=n(H,C,N))==undefined?"":F;if(!H._triggered&&P.editable&&P.rules){H._errorHolders[V]=d("<div class='errorContainer' style='display:none'></div>").appendTo(x.parent())}var K=w.instance,O,S=P.type;if(!K){O=d("<div style='position:absolute'></div>").css({left:T.position().left+A,top:3}).appendTo(B).addClass("grid-edit-wrapper");K=w.instance=d("<input></input>").attr({name:V,id:V}).appendTo(O);if("text"!=S&&"custom"!=S){K[S](P.options)}if("omCalendar"==S||"omCombo"==S){var M=K.parent();if("omCalendar"==S){K.val(F).width(T.outerWidth()-24);K.width(T.outerWidth(true)-(M.outerWidth(true)-K.width()))}else{K.next("input").attr({id:K.prop("id"),name:K.prop("name")});K.attr({id:"",name:""});K.next("input").width(T.outerWidth(true)-(M.outerWidth(true)-K.next("input").width()))}}else{if("text"==S){K.addClass("grid-edit-text");if(!P.editable){K.attr("readonly","readonly").addClass("readonly-text")}}if("custom"==S){K=w.instance=O.html(P.renderer.call(H,F,z))}K.width(T.outerWidth(true)-(K.outerWidth(true)-K.width()))}w.model=N;w.type=S;w.id=N.name;if("custom"!=S){var J="omCombo"==S?K.next():K;J.blur(function(X){var W=H._errorHolders[V];W&&W.hide()})}}switch(S){case"omCalendar":K=K.val(F).omCalendar();break;case"omNumberField":K.val(F).trigger("blur");break;case"omCombo":K.omCombo("value",F);break;case"text":K.val(F);break;case"custom":K.html(P.renderer.call(H,F,z));default:}});!H._triggered&&H._validate&&p(H);H._validator&&H._validator.form();H._triggered=true}function g(w){w._changeData={update:{},insert:{},"delete":{}}}function f(w){return !i(w)||!h(w)}function v(x){var w=x.element,z=w.parent(),A=x._editView,B=A.view,y=A.editBtn,D=A.editRow,C={};C.top=D.height();if(w.width()<z.width()){C.left=w.width()/2-y.width()/2}else{C.left=z.scrollLeft()+z.width()/2-y.width()/2}return C}function t(){if(i(this)){g(this);r(this);if(this._triggered){s(this);this._editView.view.hide();this._editView.editing=false;this.hDiv.scrollLeft(0);this.element.parent().scrollLeft(0)}}}function i(w){return !w._allEditMode||w._globalEditable}function r(x){var w=x.getData().rows;x._rowIdDataMap={};x._getTrs().each(function(y,z){x._rowIdDataMap[a(z)]=w[y]})}function s(w){if(w._validator){w._validator.resetForm();d.each(w._errorHolders,function(x,y){y.empty().hide()})}}function h(x){var w=x._changeData;return !(d.isEmptyObject(w.update)&&d.isEmptyObject(w.insert)&&d.isEmptyObject(w["delete"]))}function q(H,D){var w=H.element,G=w.next(".grid-edit-view"),F,C,A=d(D).position(),y=w.parent().scrollTop(),x=H.options;if(G.length==0){G=d("<div class='grid-edit-view'><div class='body-wrapper'><div class='grid-edit-row'><form class='grid-edit-form'></form></div><div class='gird-edit-btn'><input type='button' class='ok' value='确定'/><input type='button' class='cancel' value='取消'/></div></div></div>").width(w.outerWidth()).insertAfter(w);var F=G.find(".gird-edit-btn"),C=F.prev(".grid-edit-row"),E;H._editView={view:G,editRow:C,editBtn:F};E=v(H);F.css({left:E.left,top:E.top});var B=F.find("input.ok").omButton(),z=F.find("input.cancel").omButton();B.click(function(){if(H._validator&&!H._validator.form()){return}var I=w.find("tr[_grid_row_id='"+H._editView.rowId+"']");c(H,I);G.hide();H._editView.editing=false;B.blur();if(H._rowAdding){H._refreshHeaderCheckBox();H._rowAdding=false}var J=H._getTrs().index(I);x.onAfterEdit&&x.onAfterEdit.call(H,J,H._getRowData(J))});z.click(function(){H.cancelEdit(this)})}H._editView.rowId=a(D);if(H._editView.editing){G.animate({top:A.top+y},"fast")}else{G.css({top:A.top+y});H._editView.editing=true;G.show();if(H._colWidthResize){o(H);H._colWidthResize=false}}}function j(){if(!i(this)||!this._triggered){return}if(this._editView.editing){this.element.parent().scrollLeft(0);var w=this;setTimeout(function(){o(w)},0)}else{this._colWidthResize=true}}function o(F,C,y){var w=F.element,B=F._editView,E=B.view,x=w.parent().scrollLeft(),D=B.editBtn,z;E.width(w.outerWidth());F._getHeaderCols().each(function(G,I){var K=d(I).attr("abbr"),H=d(I),J=C&&C.prop("abbr")===H.prop("abbr");if(J){z=true}if(C&&!z){return}d.each(F._editComps,function(M,L){var O=L.instance,N=L.type;if(K==L.id){if(!J&&C){O.closest("div.grid-edit-wrapper").css("left","+="+y);return false}if(!J){O.closest("div.grid-edit-wrapper").width(H.outerWidth()).css("left",H.position().left+x)}if("omCalendar"==N||"omCombo"==N){var P=O.parent();if("omCalendar"==N){O.width(H.outerWidth()-24);O.width(H.outerWidth(true)-(P.outerWidth(true)-O.width()))}else{O.next("input").width(H.outerWidth(true)-(P.outerWidth(true)-O.next("input").width()))}}else{O.width(H.outerWidth(true)-(O.outerWidth(true)-O.width()))}}})});var A=v(F);if(C){D.animate({left:A.left,top:A.top},"fast")}else{D.css({left:A.left,top:A.top})}}function k(w,x){if(!i(this)||!this._triggered||!this._editView.editing){this._colWidthResize=true;return}o(this,w,x)}function c(w,A){var y=d(A),D=w._editView.editRow,C=w._editComps,B=a(y),x=w._getTrs().index(y),z=w._getRowData(x);d.each(C,function(G,F){var I=F.model.name,K=e(w,y,F),E,H,J;if(y.attr("_insert")){w._changeData.insert[B][I]=K}else{E=u(w,A)[I];J=w._changeData.update[B];if(String(K)===String(E)){m(y,F.model,false);J&&delete J[I];d.isEmptyObject(J)&&delete w._changeData.update[B]}else{m(y,F.model,true);J=w._changeData.update[B]=J||{};J[I]=K}}if(F.model.renderer){H=F.model.renderer(K,z,x)}else{H=K==undefined?"":K}y.find("td[abbr='"+I+"'] >div").html(H)})}function m(y,x,w){y.find("td[abbr='"+x.name+"']").toggleClass("grid-cell-dirty",w)}function a(w){return d(w).attr("_grid_row_id")}function e(x,z,w){var B,A=u(x,z),y=w.instance;switch(w.type){case"omCalendar":B=y.val();case"omNumberField":B=y.val();break;case"omCombo":B=y.omCombo("value");break;case"text":B=y.val();break;case"custom":if(w.model.editor.getValue){return w.model.editor.getValue.call(y,A,w.model.name)}default:break}return B}function n(w,A,z){var B,y=z.name;if(A.attr("_insert")){B=u(w,A)[y]}else{var x=w._changeData.update[a(A)];if(x&&x[y]!=null){B=x[y]}else{B=u(w,A)[y]}}return B}function u(w,x){var y=a(x);return d(x).attr("_insert")?w._changeData.insert[y]:w._rowIdDataMap[y]}function p(x){var w=x._editView.editRow.find(">.grid-edit-form"),A={},B=A.rules={},z=A.messages={},y=x._getColModel();d.each(y,function(I,G){var H=G.editor.rules;if(H){var C=B[G.editor.name||G.name]={},E=z[G.editor.name||G.name]={};if(H.length>0&&!d.isArray(H[0])){var K=[];K.push(H);H=K}for(var F=0,J=H.length;F<J;F++){var D=H[F][0];C[D]=H[F][1]==undefined?true:H[F][1];if(H[F][2]){E[D]=H[F][2]}}}});d.extend(A,{onkeyup:function(C){this.element(C)},errorPlacement:function(C,D){},showErrors:function(E,F){if(F&&F.length>0){d.each(F,function(K,M){var I=d(M.element),J=I.attr("name");var L=x._errorHolders[J];if(L){var H=I.offset(),G=x.element.offset();L.css({left:H.left-G.left+I.outerWidth(),top:H.top-G.top+I.outerHeight()}).html(M.message);if(I.is(":focus")){L.show()}}})}else{d.each(this.currentElements,function(G,H){var I=x._errorHolders[d(H).attr("name")];I&&I.empty().hide()})}var C=x._editView.editBtn.find("input.ok"),D=true;d.each(x._errorHolders,function(G,H){if(!H.is(":empty")){return D=false}});D?C.omButton("enable"):C.omButton("disable");this.defaultShowErrors()}});x._validator=w.validate(A);d.each(x._editComps,function(E,D){var G=D.model.editor;if(G.editable&&G.rules){var F=G.name||D.model.name,H=x._errorHolders[F],C=D.type=="omCombo"?D.instance.next("input"):D.instance;C.mouseover(function(){if(H&&!H.is(":empty")){H.show()}}).mouseout(function(){H&&H.hide()})}})}})(jQuery);(function(c){c.omWidget.addBeforeInitListener("om.omGrid",function(){var f=this._getColModel();if(!c.isArray(f)||f.length<=0||!c.isArray(f[0])){return}d(this);this.hDiv.addClass("hDiv-group-header");c.extend(this,{_getColModel:function(){return this._colModel},_getHeaderCols:function(){var g=[],j=this.options,i=this.hDiv,h=i.find("th[axis^='col']");c(h).each(function(){g.push(this)});g.sort(function(l,k){return l.axis.slice(3)-k.axis.slice(3)});!j.singleSelect&&g.unshift(i.find("th[axis='checkboxCol']")[0]);j.showIndex&&g.unshift(i.find("th[axis='indexCol']")[0]);j.rowDetailsProvider&&g.unshift(i.find("th[axis='expenderCol']")[0]);return c(g)},_buildTableHead:function(){var r=this.options,g=this.element,k=g.closest(".om-grid"),p=r.colModel,y=0,o=-1,A="<th class='$' $ $ $ $ $><div class='$' style='text-align:$; $'>$</div></th>",v=["<thead>"],u,z,m,s;for(var x=0,n=p.length;x<n;x++){v.push("<tr>");if(x==0){if(r.showIndex){v.push("<th class='indexCol data-header-"+n+"' align='center' axis='indexCol' rowspan="+n+"><div class='indexheader' style='text-align:center;width:25px;' /></th>")}if(!r.singleSelect){v.push("<th class='checkboxCol data-header-"+n+"' align='center' axis='checkboxCol' rowspan="+n+"><div class='checkboxheader' style='text-align:center;width:17px;'><span class='checkbox'/></div></th>")}}m=p[x];for(var w=0,l=m.length;w<l;w++){z=m[w];var q=z.width||60,t=z.align||"center",B=z.name;if(z.name&&q=="autoExpand"){q=0;o=b(this,z)}var h=z.wrap?"wrap":"";h+=(z.name?" data-header-":" group-header-")+(z.rowspan?z.rowspan:1);u=[h,z.align?"align="+z.align:"",B?"axis=col"+b(this,z):"",B?"abbr="+B:"",z.rowspan?"rowspan="+z.rowspan:"",z.colspan?"colspan="+z.colspan:"",z.wrap?"wrap":"",t,B?"width:"+q+"px":"",z.header];e(v,u,A);if(z.name){y+=q}}v.push("</tr>")}v.push("</thead>");c("table",this.hDiv).html(v.join(""));s=c("thead",this.hDiv);this._fixHeaderWidth(o,y);this.thead=s;s=null}})});function b(h,k){var g=h._getColModel();for(var j=0,f=g.length;j<f;j++){if(g[j].name==k.name){return j}}}function e(h,i,g){var f=0;h.push(g.replace(/\$/g,function(){return i[f++]}))}function d(s){s._colModel=[];var p=s._getColModel(),o=[],k=[],u=1,n=1,m,r,q,l=p.length;for(var h=0;h<l;h++){o[h]=[]}for(var h=0,t=l;h<t;h++){m=p[h];for(var g=0,f=m.length;g<f;g++){r=m[g];u=r.rowspan||1;n=r.colspan||1;q=a(o,h,u,n);if(r.name){k.push({header:r,colIndex:q})}}}k.sort(function(j,i){return j.colIndex-i.colIndex});h=0;while(k[h]&&s._colModel.push(k[h++].header)){}}function a(g,l,n,o){var m=0;while(g[l][m]&&++m){}for(var h=l;h<l+n;h++){for(var f=m;f<m+o;f++){g[h][f]=true}}return m}})(jQuery);